<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dragonfly.windowparameter &#8212; dragonfly-core  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0b9525ea" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/x-icon" href="https://github.com/ladybug-tools/artwork/raw/refs/heads/master/icons_bugs/ico/dragonfly.ico">
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          dragonfly-core</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#commands">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cli/translate.html">translate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate">dragonfly translate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-merge-models-to-honeybee">merge-models-to-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-model-to-honeybee">model-to-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-model-to-honeybee-file">model-to-honeybee-file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/validate.html">validate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate">dragonfly validate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate-model">model</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate-room-collisions">room-collisions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/create.html">create</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/create.html#dragonfly-create">dragonfly create</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-from-geojson">from-geojson</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-from-honeybee">from-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-merge-models">merge-models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/edit.html">edit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit">dragonfly edit</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-align">align</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-convert-units">convert-units</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-remove-short-segments">remove-short-segments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-reset-room-boundaries">reset-room-boundaries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-solve-adjacency">solve-adjacency</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-windows-by-ratio">windows-by-ratio</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dragonfly.html">dragonfly package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.cli.html">dragonfly.cli package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.cli.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.create.html">dragonfly.cli.create module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.from_geojson"><code class="docutils literal notranslate"><span class="pre">from_geojson()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.merge_models"><code class="docutils literal notranslate"><span class="pre">merge_models()</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.edit.html">dragonfly.cli.edit module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.translate.html">dragonfly.cli.translate module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.merge_models_to_honeybee"><code class="docutils literal notranslate"><span class="pre">merge_models_to_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.model_to_honeybee"><code class="docutils literal notranslate"><span class="pre">model_to_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.model_to_honeybee_file"><code class="docutils literal notranslate"><span class="pre">model_to_honeybee_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.validate.html">dragonfly.cli.validate module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.validate.html#dragonfly.cli.validate.validate_model"><code class="docutils literal notranslate"><span class="pre">validate_model()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.validate.html#dragonfly.cli.validate.validate_room_collisions"><code class="docutils literal notranslate"><span class="pre">validate_room_collisions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.cli.html#module-dragonfly.cli">Module contents</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.writer.html">dragonfly.writer package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.writer.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.building.html">dragonfly.writer.building module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.context.html">dragonfly.writer.context module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.model.html">dragonfly.writer.model module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.room2d.html">dragonfly.writer.room2d module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.story.html">dragonfly.writer.story module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.writer.html#module-dragonfly.writer">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.building.html">dragonfly.building module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building"><code class="docutils literal notranslate"><span class="pre">Building</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_roof_geometry"><code class="docutils literal notranslate"><span class="pre">add_roof_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_room_3ds"><code class="docutils literal notranslate"><span class="pre">add_room_3ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_stories"><code class="docutils literal notranslate"><span class="pre">add_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.all_room_2ds"><code class="docutils literal notranslate"><span class="pre">all_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.all_stories"><code class="docutils literal notranslate"><span class="pre">all_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.buildings_to_honeybee"><code class="docutils literal notranslate"><span class="pre">buildings_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.check_collisions_between_stories"><code class="docutils literal notranslate"><span class="pre">check_collisions_between_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_all_room_3ds_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_all_room_3ds_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_multipliers_to_stories"><code class="docutils literal notranslate"><span class="pre">convert_multipliers_to_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_plenum_depths_to_room_2ds"><code class="docutils literal notranslate"><span class="pre">convert_plenum_depths_to_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3d_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_room_3d_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3ds_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_room_3ds_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.district_to_honeybee"><code class="docutils literal notranslate"><span class="pre">district_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.find_adjacency_gaps"><code class="docutils literal notranslate"><span class="pre">find_adjacency_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.footprint"><code class="docutils literal notranslate"><span class="pre">footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_all_story_geometry"><code class="docutils literal notranslate"><span class="pre">from_all_story_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_footprint"><code class="docutils literal notranslate"><span class="pre">from_footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_floors_ceilings"><code class="docutils literal notranslate"><span class="pre">has_floors_ceilings()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.make_basement_stories"><code class="docutils literal notranslate"><span class="pre">make_basement_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.match_and_replace_room_2d_floor_geometry"><code class="docutils literal notranslate"><span class="pre">match_and_replace_room_2d_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.process_alleys"><code class="docutils literal notranslate"><span class="pre">process_alleys()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.remove_duplicate_roofs"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.remove_stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">remove_stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_2ds_by_display_name"><code class="docutils literal notranslate"><span class="pre">room_2ds_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_display_name"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_story"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_story()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_mid_floors"><code class="docutils literal notranslate"><span class="pre">separate_mid_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_room_2d_plenums"><code class="docutils literal notranslate"><span class="pre">separate_room_2d_plenums()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_top_bottom_floors"><code class="docutils literal notranslate"><span class="pre">separate_top_bottom_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.shade_representation"><code class="docutils literal notranslate"><span class="pre">shade_representation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.sort_stories"><code class="docutils literal notranslate"><span class="pre">sort_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.split_room_2d_vertically"><code class="docutils literal notranslate"><span class="pre">split_room_2d_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_display_name"><code class="docutils literal notranslate"><span class="pre">stories_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_to_honeybee"><code class="docutils literal notranslate"><span class="pre">stories_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.suggested_alignment_axes"><code class="docutils literal notranslate"><span class="pre">suggested_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.footprint_area"><code class="docutils literal notranslate"><span class="pre">footprint_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_2d_plenums"><code class="docutils literal notranslate"><span class="pre">has_room_2d_plenums</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_2ds"><code class="docutils literal notranslate"><span class="pre">has_room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_3ds"><code class="docutils literal notranslate"><span class="pre">has_room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_zones"><code class="docutils literal notranslate"><span class="pre">has_zones</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height"><code class="docutils literal notranslate"><span class="pre">height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height_above_ground"><code class="docutils literal notranslate"><span class="pre">height_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height_from_first_floor"><code class="docutils literal notranslate"><span class="pre">height_from_first_floor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_2d_story_names"><code class="docutils literal notranslate"><span class="pre">room_2d_story_names</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_apertures"><code class="docutils literal notranslate"><span class="pre">room_3d_apertures</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_doors"><code class="docutils literal notranslate"><span class="pre">room_3d_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_faces"><code class="docutils literal notranslate"><span class="pre">room_3d_faces</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_shades"><code class="docutils literal notranslate"><span class="pre">room_3d_shades</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_story_names"><code class="docutils literal notranslate"><span class="pre">room_3d_story_names</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds"><code class="docutils literal notranslate"><span class="pre">room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.story_count"><code class="docutils literal notranslate"><span class="pre">story_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.story_count_above_ground"><code class="docutils literal notranslate"><span class="pre">story_count_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_room_2ds"><code class="docutils literal notranslate"><span class="pre">unique_room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_stories"><code class="docutils literal notranslate"><span class="pre">unique_stories</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_stories_above_ground"><code class="docutils literal notranslate"><span class="pre">unique_stories_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.zone_dict"><code class="docutils literal notranslate"><span class="pre">zone_dict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.colorobj.html">dragonfly.colorobj module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D"><code class="docutils literal notranslate"><span class="pre">ColorRoom2D</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attr_name"><code class="docutils literal notranslate"><span class="pre">attr_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attr_name_end"><code class="docutils literal notranslate"><span class="pre">attr_name_end</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes"><code class="docutils literal notranslate"><span class="pre">attributes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes_original"><code class="docutils literal notranslate"><span class="pre">attributes_original</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes_unique"><code class="docutils literal notranslate"><span class="pre">attributes_unique</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.floor_faces"><code class="docutils literal notranslate"><span class="pre">floor_faces</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.graphic_container"><code class="docutils literal notranslate"><span class="pre">graphic_container</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.legend_parameters"><code class="docutils literal notranslate"><span class="pre">legend_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.max_point"><code class="docutils literal notranslate"><span class="pre">max_point</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.min_point"><code class="docutils literal notranslate"><span class="pre">min_point</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.config.html">dragonfly.config module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders"><code class="docutils literal notranslate"><span class="pre">Folders</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_core_version"><code class="docutils literal notranslate"><span class="pre">dragonfly_core_version</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_core_version_str"><code class="docutils literal notranslate"><span class="pre">dragonfly_core_version_str</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_schema_version"><code class="docutils literal notranslate"><span class="pre">dragonfly_schema_version</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_schema_version_str"><code class="docutils literal notranslate"><span class="pre">dragonfly_schema_version_str</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.python_package_path"><code class="docutils literal notranslate"><span class="pre">python_package_path</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.context.html">dragonfly.context module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade"><code class="docutils literal notranslate"><span class="pre">ContextShade</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.apply_vertex_map"><code class="docutils literal notranslate"><span class="pre">apply_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.is_conforming"><code class="docutils literal notranslate"><span class="pre">is_conforming()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.unconforming_vertex_map"><code class="docutils literal notranslate"><span class="pre">unconforming_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.area"><code class="docutils literal notranslate"><span class="pre">area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.geometry"><code class="docutils literal notranslate"><span class="pre">geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.is_detached"><code class="docutils literal notranslate"><span class="pre">is_detached</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.dictutil.html">dragonfly.dictutil module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.dictutil.html#dragonfly.dictutil.dict_to_object"><code class="docutils literal notranslate"><span class="pre">dict_to_object()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.extensionutil.html">dragonfly.extensionutil module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.building_extension_dicts"><code class="docutils literal notranslate"><span class="pre">building_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.context_shade_extension_dicts"><code class="docutils literal notranslate"><span class="pre">context_shade_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.model_extension_dicts"><code class="docutils literal notranslate"><span class="pre">model_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.room2d_extension_dicts"><code class="docutils literal notranslate"><span class="pre">room2d_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.story_extension_dicts"><code class="docutils literal notranslate"><span class="pre">story_extension_dicts()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.model.html">dragonfly.model module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_building"><code class="docutils literal notranslate"><span class="pre">add_building()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_context_shade"><code class="docutils literal notranslate"><span class="pre">add_context_shade()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_model"><code class="docutils literal notranslate"><span class="pre">add_model()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.buildings_by_identifier"><code class="docutils literal notranslate"><span class="pre">buildings_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all"><code class="docutils literal notranslate"><span class="pre">check_all()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_duplicate_identifiers"><code class="docutils literal notranslate"><span class="pre">check_all_duplicate_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_room3d"><code class="docutils literal notranslate"><span class="pre">check_all_room3d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_room_collisions"><code class="docutils literal notranslate"><span class="pre">check_all_room_collisions()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_collisions_between_stories"><code class="docutils literal notranslate"><span class="pre">check_collisions_between_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_degenerate_room_2ds"><code class="docutils literal notranslate"><span class="pre">check_degenerate_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_building_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_building_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_context_shade_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_context_shade_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_room_2d_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_room_2d_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_story_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_story_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_for_error"><code class="docutils literal notranslate"><span class="pre">check_for_error()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_for_extension"><code class="docutils literal notranslate"><span class="pre">check_for_extension()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">check_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_no_roof_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_roof_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_no_room2d_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_room2d_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_plenum_depths"><code class="docutils literal notranslate"><span class="pre">check_plenum_depths()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_roofs_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roofs_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_room2d_floor_heights_valid"><code class="docutils literal notranslate"><span class="pre">check_room2d_floor_heights_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_self_intersecting_room_2ds"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_window_parameters_valid"><code class="docutils literal notranslate"><span class="pre">check_window_parameters_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.clean_irrational_geometry"><code class="docutils literal notranslate"><span class="pre">clean_irrational_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.context_shade_by_identifier"><code class="docutils literal notranslate"><span class="pre">context_shade_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.convert_to_units"><code class="docutils literal notranslate"><span class="pre">convert_to_units()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dfjson"><code class="docutils literal notranslate"><span class="pre">from_dfjson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dfpkl"><code class="docutils literal notranslate"><span class="pre">from_dfpkl()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_file"><code class="docutils literal notranslate"><span class="pre">from_file()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_geojson"><code class="docutils literal notranslate"><span class="pre">from_geojson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_pomf"><code class="docutils literal notranslate"><span class="pre">from_pomf()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.lines_from_pomf"><code class="docutils literal notranslate"><span class="pre">lines_from_pomf()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.model_dict_room_2d_subset"><code class="docutils literal notranslate"><span class="pre">model_dict_room_2d_subset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.model_dict_subset"><code class="docutils literal notranslate"><span class="pre">model_dict_subset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.remove_duplicate_roofs"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reset_coordinate_system"><code class="docutils literal notranslate"><span class="pre">reset_coordinate_system()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reset_ids"><code class="docutils literal notranslate"><span class="pre">reset_ids()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.resolve_id_collisions"><code class="docutils literal notranslate"><span class="pre">resolve_id_collisions()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_2ds_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_2ds_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_3ds_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.separate_top_bottom_floors"><code class="docutils literal notranslate"><span class="pre">separate_top_bottom_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dfjson"><code class="docutils literal notranslate"><span class="pre">to_dfjson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dfpkl"><code class="docutils literal notranslate"><span class="pre">to_dfpkl()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_geojson"><code class="docutils literal notranslate"><span class="pre">to_geojson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_geojson_dict"><code class="docutils literal notranslate"><span class="pre">to_geojson_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.validate"><code class="docutils literal notranslate"><span class="pre">validate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.ERROR_MAP"><code class="docutils literal notranslate"><span class="pre">ERROR_MAP</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.angle_tolerance"><code class="docutils literal notranslate"><span class="pre">angle_tolerance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_height"><code class="docutils literal notranslate"><span class="pre">average_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_height_above_ground"><code class="docutils literal notranslate"><span class="pre">average_height_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_story_count"><code class="docutils literal notranslate"><span class="pre">average_story_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_story_count_above_ground"><code class="docutils literal notranslate"><span class="pre">average_story_count_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.buildings"><code class="docutils literal notranslate"><span class="pre">buildings</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.context_shades"><code class="docutils literal notranslate"><span class="pre">context_shades</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.footprint_area"><code class="docutils literal notranslate"><span class="pre">footprint_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reference_vector"><code class="docutils literal notranslate"><span class="pre">reference_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_3ds"><code class="docutils literal notranslate"><span class="pre">room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.stories"><code class="docutils literal notranslate"><span class="pre">stories</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.tolerance"><code class="docutils literal notranslate"><span class="pre">tolerance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.units"><code class="docutils literal notranslate"><span class="pre">units</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.projection.html">dragonfly.projection module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.lon_lat_to_polygon"><code class="docutils literal notranslate"><span class="pre">lon_lat_to_polygon()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.meters_to_long_lat_factors"><code class="docutils literal notranslate"><span class="pre">meters_to_long_lat_factors()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.origin_long_lat_from_location"><code class="docutils literal notranslate"><span class="pre">origin_long_lat_from_location()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.polygon_to_lon_lat"><code class="docutils literal notranslate"><span class="pre">polygon_to_lon_lat()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.properties.html">dragonfly.properties module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties"><code class="docutils literal notranslate"><span class="pre">BuildingProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_ceiling_plenum_face_properties"><code class="docutils literal notranslate"><span class="pre">apply_ceiling_plenum_face_properties()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_floor_plenum_face_properties"><code class="docutils literal notranslate"><span class="pre">apply_floor_plenum_face_properties()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_properties_from_geojson_dict"><code class="docutils literal notranslate"><span class="pre">apply_properties_from_geojson_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.make_plenums"><code class="docutils literal notranslate"><span class="pre">make_plenums()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties"><code class="docutils literal notranslate"><span class="pre">ContextShadeProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties"><code class="docutils literal notranslate"><span class="pre">ModelProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.apply_properties_from_dict"><code class="docutils literal notranslate"><span class="pre">apply_properties_from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties"><code class="docutils literal notranslate"><span class="pre">Room2DProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties"><code class="docutils literal notranslate"><span class="pre">StoryProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.roof.html">dragonfly.roof module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification"><code class="docutils literal notranslate"><span class="pre">RoofSpecification</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.check_roof_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roof_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.find_gaps"><code class="docutils literal notranslate"><span class="pre">find_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.from_geometry_to_join"><code class="docutils literal notranslate"><span class="pre">from_geometry_to_join()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.join_geometries"><code class="docutils literal notranslate"><span class="pre">join_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.overlap_count"><code class="docutils literal notranslate"><span class="pre">overlap_count()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.pull_to_segments"><code class="docutils literal notranslate"><span class="pre">pull_to_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.remove_small_holes"><code class="docutils literal notranslate"><span class="pre">remove_small_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.resolved_geometry"><code class="docutils literal notranslate"><span class="pre">resolved_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_lines"><code class="docutils literal notranslate"><span class="pre">split_with_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_polygon"><code class="docutils literal notranslate"><span class="pre">split_with_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_thick_line"><code class="docutils literal notranslate"><span class="pre">split_with_thick_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_thick_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_thick_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.subtract_roofs"><code class="docutils literal notranslate"><span class="pre">subtract_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.union_coplanar"><code class="docutils literal notranslate"><span class="pre">union_coplanar()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.update_geometry_2d"><code class="docutils literal notranslate"><span class="pre">update_geometry_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.update_geometry_3d"><code class="docutils literal notranslate"><span class="pre">update_geometry_3d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.altitudes"><code class="docutils literal notranslate"><span class="pre">altitudes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.azimuths"><code class="docutils literal notranslate"><span class="pre">azimuths</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.boundary_geometry_2d"><code class="docutils literal notranslate"><span class="pre">boundary_geometry_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.center_heights"><code class="docutils literal notranslate"><span class="pre">center_heights</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.geometry"><code class="docutils literal notranslate"><span class="pre">geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.geometry_2d"><code class="docutils literal notranslate"><span class="pre">geometry_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.max_height"><code class="docutils literal notranslate"><span class="pre">max_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.min_height"><code class="docutils literal notranslate"><span class="pre">min_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.planes"><code class="docutils literal notranslate"><span class="pre">planes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.tilts"><code class="docutils literal notranslate"><span class="pre">tilts</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.room2d.html">dragonfly.room2d module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D"><code class="docutils literal notranslate"><span class="pre">Room2D</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.apply_vertex_map"><code class="docutils literal notranslate"><span class="pre">apply_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.assign_sub_faces"><code class="docutils literal notranslate"><span class="pre">assign_sub_faces()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.average_orientation"><code class="docutils literal notranslate"><span class="pre">average_orientation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_degenerate"><code class="docutils literal notranslate"><span class="pre">check_degenerate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_horizontal"><code class="docutils literal notranslate"><span class="pre">check_horizontal()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_plenum_depths"><code class="docutils literal notranslate"><span class="pre">check_plenum_depths()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_window_parameters_valid"><code class="docutils literal notranslate"><span class="pre">check_window_parameters_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.coordinate_room_2d_vertices"><code class="docutils literal notranslate"><span class="pre">coordinate_room_2d_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.coordinate_segment_vertices"><code class="docutils literal notranslate"><span class="pre">coordinate_segment_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency"><code class="docutils literal notranslate"><span class="pre">find_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency_by_guide_lines"><code class="docutils literal notranslate"><span class="pre">find_adjacency_by_guide_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency_gaps"><code class="docutils literal notranslate"><span class="pre">find_adjacency_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_segment_adjacency"><code class="docutils literal notranslate"><span class="pre">find_segment_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segment_by_index"><code class="docutils literal notranslate"><span class="pre">floor_segment_by_index()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_polygon"><code class="docutils literal notranslate"><span class="pre">from_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_vertices"><code class="docutils literal notranslate"><span class="pre">from_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.generate_alignment_axes"><code class="docutils literal notranslate"><span class="pre">generate_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.generate_grid"><code class="docutils literal notranslate"><span class="pre">generate_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_adjacency"><code class="docutils literal notranslate"><span class="pre">group_by_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_air_boundary_adjacency"><code class="docutils literal notranslate"><span class="pre">group_by_air_boundary_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_attribute"><code class="docutils literal notranslate"><span class="pre">group_by_attribute()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_floor_height"><code class="docutils literal notranslate"><span class="pre">group_by_floor_height()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_orientation"><code class="docutils literal notranslate"><span class="pre">group_by_orientation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.grouped_horizontal_boundary"><code class="docutils literal notranslate"><span class="pre">grouped_horizontal_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.intersect_adjacency"><code class="docutils literal notranslate"><span class="pre">intersect_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_by_boundary"><code class="docutils literal notranslate"><span class="pre">join_by_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_to_neighbor"><code class="docutils literal notranslate"><span class="pre">join_to_neighbor()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.label_point"><code class="docutils literal notranslate"><span class="pre">label_point()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.make_skylights_flush"><code class="docutils literal notranslate"><span class="pre">make_skylights_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.make_windows_flush"><code class="docutils literal notranslate"><span class="pre">make_windows_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_skylights"><code class="docutils literal notranslate"><span class="pre">offset_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_skylights_from_edges"><code class="docutils literal notranslate"><span class="pre">offset_skylights_from_edges()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_windows"><code class="docutils literal notranslate"><span class="pre">offset_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.overlap_area"><code class="docutils literal notranslate"><span class="pre">overlap_area()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.patch_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">patch_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_polygon"><code class="docutils literal notranslate"><span class="pre">pull_to_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_polyline"><code class="docutils literal notranslate"><span class="pre">pull_to_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_room_2d"><code class="docutils literal notranslate"><span class="pre">pull_to_room_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_segments"><code class="docutils literal notranslate"><span class="pre">pull_to_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.rectangularize_windows"><code class="docutils literal notranslate"><span class="pre">rectangularize_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.relevant_roof_geometry"><code class="docutils literal notranslate"><span class="pre">relevant_roof_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_colinear_vertices"><code class="docutils literal notranslate"><span class="pre">remove_colinear_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_degenerate_holes"><code class="docutils literal notranslate"><span class="pre">remove_degenerate_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_duplicate_vertices"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_short_segments"><code class="docutils literal notranslate"><span class="pre">remove_short_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_holes"><code class="docutils literal notranslate"><span class="pre">remove_small_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_skylights"><code class="docutils literal notranslate"><span class="pre">remove_small_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.replace_floor_geometry"><code class="docutils literal notranslate"><span class="pre">replace_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.reset_adjacency"><code class="docutils literal notranslate"><span class="pre">reset_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.room_orientation_plane"><code class="docutils literal notranslate"><span class="pre">room_orientation_plane()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_indices_by_guide_lines"><code class="docutils literal notranslate"><span class="pre">segment_indices_by_guide_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_orientations"><code class="docutils literal notranslate"><span class="pre">segment_orientations()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.separate_plenum"><code class="docutils literal notranslate"><span class="pre">separate_plenum()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_adjacency"><code class="docutils literal notranslate"><span class="pre">set_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_air_boundary"><code class="docutils literal notranslate"><span class="pre">set_air_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_boundary_condition"><code class="docutils literal notranslate"><span class="pre">set_boundary_condition()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_window_parameter"><code class="docutils literal notranslate"><span class="pre">set_window_parameter()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_line_end_points"><code class="docutils literal notranslate"><span class="pre">snap_to_line_end_points()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_points"><code class="docutils literal notranslate"><span class="pre">snap_to_points()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.solve_adjacency"><code class="docutils literal notranslate"><span class="pre">solve_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_through_self_intersection"><code class="docutils literal notranslate"><span class="pre">split_through_self_intersection()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_line"><code class="docutils literal notranslate"><span class="pre">split_with_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_lines"><code class="docutils literal notranslate"><span class="pre">split_with_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_polygon"><code class="docutils literal notranslate"><span class="pre">split_with_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_thick_line"><code class="docutils literal notranslate"><span class="pre">split_with_thick_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_thick_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_thick_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.subtract_room_2ds"><code class="docutils literal notranslate"><span class="pre">subtract_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_core_perimeter"><code class="docutils literal notranslate"><span class="pre">to_core_perimeter()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_detailed_windows"><code class="docutils literal notranslate"><span class="pre">to_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.unconforming_vertex_map"><code class="docutils literal notranslate"><span class="pre">unconforming_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.update_floor_geometry"><code class="docutils literal notranslate"><span class="pre">update_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.air_boundaries"><code class="docutils literal notranslate"><span class="pre">air_boundaries</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.boundary_conditions"><code class="docutils literal notranslate"><span class="pre">boundary_conditions</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_height"><code class="docutils literal notranslate"><span class="pre">ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_plenum_depth"><code class="docutils literal notranslate"><span class="pre">ceiling_plenum_depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.center"><code class="docutils literal notranslate"><span class="pre">center</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_window_area"><code class="docutils literal notranslate"><span class="pre">exterior_window_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_geometry"><code class="docutils literal notranslate"><span class="pre">floor_geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_height"><code class="docutils literal notranslate"><span class="pre">floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_plenum_depth"><code class="docutils literal notranslate"><span class="pre">floor_plenum_depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segments"><code class="docutils literal notranslate"><span class="pre">floor_segments</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segments_2d"><code class="docutils literal notranslate"><span class="pre">floor_segments_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_to_ceiling_height"><code class="docutils literal notranslate"><span class="pre">floor_to_ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_ceiling"><code class="docutils literal notranslate"><span class="pre">has_ceiling</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_floor"><code class="docutils literal notranslate"><span class="pre">has_floor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.highest_plenum_floor_height"><code class="docutils literal notranslate"><span class="pre">highest_plenum_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.interior_wall_area"><code class="docutils literal notranslate"><span class="pre">interior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_core"><code class="docutils literal notranslate"><span class="pre">is_core</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_ground_contact"><code class="docutils literal notranslate"><span class="pre">is_ground_contact</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_perimeter"><code class="docutils literal notranslate"><span class="pre">is_perimeter</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_top_exposed"><code class="docutils literal notranslate"><span class="pre">is_top_exposed</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.roof_sub_face_area"><code class="docutils literal notranslate"><span class="pre">roof_sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_count"><code class="docutils literal notranslate"><span class="pre">segment_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_normals"><code class="docutils literal notranslate"><span class="pre">segment_normals</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.shading_parameters"><code class="docutils literal notranslate"><span class="pre">shading_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.skylight_area"><code class="docutils literal notranslate"><span class="pre">skylight_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.skylight_parameters"><code class="docutils literal notranslate"><span class="pre">skylight_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.wall_sub_face_area"><code class="docutils literal notranslate"><span class="pre">wall_sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.window_parameters"><code class="docutils literal notranslate"><span class="pre">window_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.zone"><code class="docutils literal notranslate"><span class="pre">zone</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.shadingparameter.html">dragonfly.shadingparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder"><code class="docutils literal notranslate"><span class="pre">ExtrudedBorder</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount"><code class="docutils literal notranslate"><span class="pre">LouversByCount</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.contour_vector"><code class="docutils literal notranslate"><span class="pre">contour_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.flip_start_side"><code class="docutils literal notranslate"><span class="pre">flip_start_side</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.louver_count"><code class="docutils literal notranslate"><span class="pre">louver_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance"><code class="docutils literal notranslate"><span class="pre">LouversByDistance</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.contour_vector"><code class="docutils literal notranslate"><span class="pre">contour_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.distance"><code class="docutils literal notranslate"><span class="pre">distance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.flip_start_side"><code class="docutils literal notranslate"><span class="pre">flip_start_side</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang"><code class="docutils literal notranslate"><span class="pre">Overhang</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.skylightparameter.html">dragonfly.skylightparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights"><code class="docutils literal notranslate"><span class="pre">DetailedSkylights</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.aperture_area_from_face"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_overlaps"><code class="docutils literal notranslate"><span class="pre">check_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_valid_for_face"><code class="docutils literal notranslate"><span class="pre">check_valid_for_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.invalid_face_geometries"><code class="docutils literal notranslate"><span class="pre">invalid_face_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.make_flush"><code class="docutils literal notranslate"><span class="pre">make_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.merge_and_simplify"><code class="docutils literal notranslate"><span class="pre">merge_and_simplify()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.merge_to_bounding_rectangle"><code class="docutils literal notranslate"><span class="pre">merge_to_bounding_rectangle()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.offset_polygons_for_face"><code class="docutils literal notranslate"><span class="pre">offset_polygons_for_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.overlapping_geometries"><code class="docutils literal notranslate"><span class="pre">overlapping_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.rectangularize"><code class="docutils literal notranslate"><span class="pre">rectangularize()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_self_intersecting"><code class="docutils literal notranslate"><span class="pre">remove_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_small_skylights"><code class="docutils literal notranslate"><span class="pre">remove_small_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.rotate"><code class="docutils literal notranslate"><span class="pre">rotate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.self_intersecting_geometries"><code class="docutils literal notranslate"><span class="pre">self_intersecting_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.union_overlaps"><code class="docutils literal notranslate"><span class="pre">union_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.polygons"><code class="docutils literal notranslate"><span class="pre">polygons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea"><code class="docutils literal notranslate"><span class="pre">GriddedSkylightArea</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.skylight_area"><code class="docutils literal notranslate"><span class="pre">skylight_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.spacing"><code class="docutils literal notranslate"><span class="pre">spacing</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio"><code class="docutils literal notranslate"><span class="pre">GriddedSkylightRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.skylight_ratio"><code class="docutils literal notranslate"><span class="pre">skylight_ratio</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.spacing"><code class="docutils literal notranslate"><span class="pre">spacing</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.story.html">dragonfly.story module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story"><code class="docutils literal notranslate"><span class="pre">Story</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2d"><code class="docutils literal notranslate"><span class="pre">add_room_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2ds"><code class="docutils literal notranslate"><span class="pre">add_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.align_room_2ds"><code class="docutils literal notranslate"><span class="pre">align_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_collision_with_story"><code class="docutils literal notranslate"><span class="pre">check_collision_with_story()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">check_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_roof_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_roof_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_room2d_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_room2d_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_roofs_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roofs_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_room2d_floor_heights_valid"><code class="docutils literal notranslate"><span class="pre">check_room2d_floor_heights_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.delete_degenerate_room_2ds"><code class="docutils literal notranslate"><span class="pre">delete_degenerate_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.fill_holes"><code class="docutils literal notranslate"><span class="pre">fill_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_geometry"><code class="docutils literal notranslate"><span class="pre">floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.footprint"><code class="docutils literal notranslate"><span class="pre">footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.generate_grid"><code class="docutils literal notranslate"><span class="pre">generate_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.intersect_room_2d_adjacency"><code class="docutils literal notranslate"><span class="pre">intersect_room_2d_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.join_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.join_small_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_small_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.make_underground"><code class="docutils literal notranslate"><span class="pre">make_underground()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.outline_polylines"><code class="docutils literal notranslate"><span class="pre">outline_polylines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.outline_segments"><code class="docutils literal notranslate"><span class="pre">outline_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.patch_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">patch_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rebuild_detailed_windows"><code class="docutils literal notranslate"><span class="pre">rebuild_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_colinear_vertices"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_colinear_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_duplicate_vertices"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_duplicate_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_short_segments"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_short_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reset_adjacency"><code class="docutils literal notranslate"><span class="pre">reset_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reset_room_2d_boundaries"><code class="docutils literal notranslate"><span class="pre">reset_room_2d_boundaries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_2d_story_geometry_valid"><code class="docutils literal notranslate"><span class="pre">room_2d_story_geometry_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rooms_by_identifier"><code class="docutils literal notranslate"><span class="pre">rooms_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_adjacent_air_boundary"><code class="docutils literal notranslate"><span class="pre">set_adjacent_air_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact"><code class="docutils literal notranslate"><span class="pre">set_ground_contact()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact_by_story_below"><code class="docutils literal notranslate"><span class="pre">set_ground_contact_by_story_below()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed"><code class="docutils literal notranslate"><span class="pre">set_top_exposed()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed_by_story_above"><code class="docutils literal notranslate"><span class="pre">set_top_exposed_by_story_above()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation"><code class="docutils literal notranslate"><span class="pre">shade_representation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation_multiplier"><code class="docutils literal notranslate"><span class="pre">shade_representation_multiplier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.solve_room_2d_adjacency"><code class="docutils literal notranslate"><span class="pre">solve_room_2d_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.split_with_story_above"><code class="docutils literal notranslate"><span class="pre">split_with_story_above()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.suggested_alignment_axes"><code class="docutils literal notranslate"><span class="pre">suggested_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.STORY_TYPES"><code class="docutils literal notranslate"><span class="pre">STORY_TYPES</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_height"><code class="docutils literal notranslate"><span class="pre">floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_to_floor_height"><code class="docutils literal notranslate"><span class="pre">floor_to_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_plenums"><code class="docutils literal notranslate"><span class="pre">has_plenums</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_zones"><code class="docutils literal notranslate"><span class="pre">has_zones</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.highest_plenum_floor_height"><code class="docutils literal notranslate"><span class="pre">highest_plenum_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.is_above_ground"><code class="docutils literal notranslate"><span class="pre">is_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.is_plenum"><code class="docutils literal notranslate"><span class="pre">is_plenum</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.max_room_2d_ceiling_height"><code class="docutils literal notranslate"><span class="pre">max_room_2d_ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.median_room2d_floor_height"><code class="docutils literal notranslate"><span class="pre">median_room2d_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.min_room_2d_floor_height"><code class="docutils literal notranslate"><span class="pre">min_room_2d_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.multiplier"><code class="docutils literal notranslate"><span class="pre">multiplier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.roof"><code class="docutils literal notranslate"><span class="pre">roof</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.type"><code class="docutils literal notranslate"><span class="pre">type</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.zone_dict"><code class="docutils literal notranslate"><span class="pre">zone_dict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.subdivide.html">dragonfly.subdivide module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.subdivide.html#dragonfly.subdivide.interpret_core_perimeter_subdivide"><code class="docutils literal notranslate"><span class="pre">interpret_core_perimeter_subdivide()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.subdivide.html#dragonfly.subdivide.interpret_floor_height_subdivide"><code class="docutils literal notranslate"><span class="pre">interpret_floor_height_subdivide()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.windowparameter.html">dragonfly.windowparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows"><code class="docutils literal notranslate"><span class="pre">DetailedWindows</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.adjust_for_segment"><code class="docutils literal notranslate"><span class="pre">adjust_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.aperture_area_from_segment"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_valid_for_segment"><code class="docutils literal notranslate"><span class="pre">check_valid_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_window_overlaps"><code class="docutils literal notranslate"><span class="pre">check_window_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.flip"><code class="docutils literal notranslate"><span class="pre">flip()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_face3ds"><code class="docutils literal notranslate"><span class="pre">from_face3ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_face3d_in_segment_plane"><code class="docutils literal notranslate"><span class="pre">is_face3d_in_segment_plane()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_flipped_equivalent"><code class="docutils literal notranslate"><span class="pre">is_flipped_equivalent()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.make_flush"><code class="docutils literal notranslate"><span class="pre">make_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_and_simplify"><code class="docutils literal notranslate"><span class="pre">merge_and_simplify()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_bounding_rectangle"><code class="docutils literal notranslate"><span class="pre">merge_to_bounding_rectangle()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.overlapping_geometries"><code class="docutils literal notranslate"><span class="pre">overlapping_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.rectangularize"><code class="docutils literal notranslate"><span class="pre">rectangularize()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.self_intersecting_geometries"><code class="docutils literal notranslate"><span class="pre">self_intersecting_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_horizontally"><code class="docutils literal notranslate"><span class="pre">shift_horizontally()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_vertically"><code class="docutils literal notranslate"><span class="pre">shift_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.union_overlaps"><code class="docutils literal notranslate"><span class="pre">union_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.polygons"><code class="docutils literal notranslate"><span class="pre">polygons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows"><code class="docutils literal notranslate"><span class="pre">RectangularWindows</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.adjust_for_segment"><code class="docutils literal notranslate"><span class="pre">adjust_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.aperture_area_from_segment"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_valid_for_segment"><code class="docutils literal notranslate"><span class="pre">check_valid_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_window_overlaps"><code class="docutils literal notranslate"><span class="pre">check_window_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.flip"><code class="docutils literal notranslate"><span class="pre">flip()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_horizontally"><code class="docutils literal notranslate"><span class="pre">shift_horizontally()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_vertically"><code class="docutils literal notranslate"><span class="pre">shift_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_detailed_windows"><code class="docutils literal notranslate"><span class="pre">to_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.heights"><code class="docutils literal notranslate"><span class="pre">heights</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.origins"><code class="docutils literal notranslate"><span class="pre">origins</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.widths"><code class="docutils literal notranslate"><span class="pre">widths</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio"><code class="docutils literal notranslate"><span class="pre">RepeatingWindowRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.horizontal_separation"><code class="docutils literal notranslate"><span class="pre">horizontal_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.vertical_separation"><code class="docutils literal notranslate"><span class="pre">vertical_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.window_height"><code class="docutils literal notranslate"><span class="pre">window_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.window_ratio"><code class="docutils literal notranslate"><span class="pre">window_ratio</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight"><code class="docutils literal notranslate"><span class="pre">RepeatingWindowWidthHeight</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.horizontal_separation"><code class="docutils literal notranslate"><span class="pre">horizontal_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.window_height"><code class="docutils literal notranslate"><span class="pre">window_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.window_width"><code class="docutils literal notranslate"><span class="pre">window_width</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea"><code class="docutils literal notranslate"><span class="pre">SimpleWindowArea</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.window_area"><code class="docutils literal notranslate"><span class="pre">window_area</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio"><code class="docutils literal notranslate"><span class="pre">SimpleWindowRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.window_ratio"><code class="docutils literal notranslate"><span class="pre">window_ratio</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow"><code class="docutils literal notranslate"><span class="pre">SingleWindow</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.height"><code class="docutils literal notranslate"><span class="pre">height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.width"><code class="docutils literal notranslate"><span class="pre">width</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#module-dragonfly">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-4">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-8 content" role="main">
      
  <h1>Source code for dragonfly.windowparameter</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: utf-8</span>
<span class="sd">&quot;&quot;&quot;Window Parameters with instructions for generating windows.&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="k">if</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>  <span class="c1"># python 2</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">izip</span> <span class="k">as</span> <span class="nb">zip</span>  <span class="c1"># python 2</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry2d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point2D</span><span class="p">,</span> <span class="n">Vector2D</span><span class="p">,</span> <span class="n">Polygon2D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry3d.pointvector</span><span class="w"> </span><span class="kn">import</span> <span class="n">Vector3D</span><span class="p">,</span> <span class="n">Point3D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry3d</span><span class="w"> </span><span class="kn">import</span> <span class="n">LineSegment3D</span><span class="p">,</span> <span class="n">Plane</span><span class="p">,</span> <span class="n">Face3D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.intersection2d</span><span class="w"> </span><span class="kn">import</span> <span class="n">closest_point2d_on_line2d</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.bounding</span><span class="w"> </span><span class="kn">import</span> <span class="n">bounding_rectangle</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">float_in_range</span><span class="p">,</span> <span class="n">float_positive</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.boundarycondition</span><span class="w"> </span><span class="kn">import</span> <span class="n">Surface</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.aperture</span><span class="w"> </span><span class="kn">import</span> <span class="n">Aperture</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.door</span><span class="w"> </span><span class="kn">import</span> <span class="n">Door</span>


<span class="k">class</span><span class="w"> </span><span class="nc">_WindowParameterBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base object for all window parameters.</span>

<span class="sd">    This object records all of the methods that must be overwritten on a window</span>
<span class="sd">    parameter object for it to be successfully be applied in dragonfly workflows.</span>

<span class="sd">    Properties:</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_user_data&#39;</span><span class="p">,)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">user_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set an optional dictionary for additional meta data for this object.</span>

<span class="sd">        This will be None until it has been set. All keys and values of this</span>
<span class="sd">        dictionary should be of a standard Python type to ensure correct</span>
<span class="sd">        serialization of the object to/from JSON (eg. str, float, int, list dict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_data</span>

    <span class="nd">@user_data</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">user_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s1">&#39;Expected dictionary for window parameter &#39;</span> \
                <span class="s1">&#39;object user_data. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the window area generated by these parameters from a LineSegment3D.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_segment</span><span class="p">,</span> <span class="n">sub_segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trim window parameters for a sub segment given the original segment.</span>

<span class="sd">        Args:</span>
<span class="sd">            original_segment: The original LineSegment3D to which the window</span>
<span class="sd">                parameters are assigned.</span>
<span class="sd">            sub_segment: A LineSegment3D that is a sub-segment of the original_segment,</span>
<span class="sd">                which will be used to trim the window parameters to fit this segment.</span>
<span class="sd">                Note that this sub_segment should have the same orientation as</span>
<span class="sd">                the original segment.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>  <span class="c1"># windows are assumed to repeat</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge_to_rectangular</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge any window parameters together into rectangular windows.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="n">doors</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rwp</span> <span class="o">=</span> <span class="n">wp</span><span class="o">.</span><span class="n">to_rectangular_windows</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
                <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rwp</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="n">rwp</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="n">rwp</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="n">rwp</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">zip_obj</span><span class="p">:</span>
                    <span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">base_x</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                    <span class="n">widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
                    <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                    <span class="n">doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="n">base_x</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span>
        <span class="k">return</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="n">doors</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create WindowParameterBase from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;WindowParameterBase&quot;</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;WindowParameterBase&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected WindowParameterBase dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get WindowParameterBase as a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;WindowParameterBase&#39;</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">duplicate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a copy of this object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">ToString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_add_user_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_win_par</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add copies of this object&#39;s user_data to new WindowParameters.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">w_par</span> <span class="ow">in</span> <span class="n">new_win_par</span><span class="p">:</span>
                <span class="n">w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sub_faces</span><span class="p">,</span> <span class="n">clean_data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the WindowParameter user_data to generated honeybee objects.</span>

<span class="sd">        Args:</span>
<span class="sd">            sub_faces: An array of Honeybee Apertures or Doors to which user_data</span>
<span class="sd">                will be applied from this WindowParameter.</span>
<span class="sd">            clean_data: An optional dictionary of user_data to be used in place</span>
<span class="sd">                of the currently assigned user_data. This is useful when not all</span>
<span class="sd">                WindowParameters are able to be applied to the generated Honeybee</span>
<span class="sd">                objects. When None, the self.user_data will be used. (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">app_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="k">if</span> <span class="n">clean_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">clean_data</span>
        <span class="k">if</span> <span class="n">app_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sub_f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sub_faces</span><span class="p">):</span>
                <span class="n">u_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">app_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;__identifier__&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub_faces</span><span class="p">):</span>
                            <span class="n">sub_f</span><span class="o">.</span><span class="n">identifier</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">u_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># use longest list logic</span>
                            <span class="n">u_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">u_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
                <span class="n">sub_f</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">u_dict</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;WindowParameterBase&#39;</span>


<div class="viewcode-block" id="SingleWindow">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SingleWindow</span><span class="p">(</span><span class="n">_WindowParameterBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for a single window in the face center defined by a width x height.</span>

<span class="sd">    Note that, if these parameters are applied to a base face that is too short</span>
<span class="sd">    or too narrow for the input width and/or height, the generated window will</span>
<span class="sd">    automatically be shortened when it is applied to the face. In this way,</span>
<span class="sd">    setting the width to be `float(&#39;inf&#39;)` will create parameters that always</span>
<span class="sd">    generate a ribbon window of the input height.</span>

<span class="sd">    Args:</span>
<span class="sd">        width: A number for the window width.</span>
<span class="sd">        height: A number for the window height.</span>
<span class="sd">        sill_height: A number for the window sill height. Default: 1.</span>

<span class="sd">    Properties:</span>
<span class="sd">        * width</span>
<span class="sd">        * height</span>
<span class="sd">        * sill_height</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_width&#39;</span><span class="p">,</span> <span class="s1">&#39;_height&#39;</span><span class="p">,</span> <span class="s1">&#39;_sill_height&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">sill_height</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize SingleWindow.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_width</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="s1">&#39;window width&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="s1">&#39;window height&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">sill_height</span><span class="p">,</span> <span class="s1">&#39;window sill height&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the window width.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the window height.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sill_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the sill height.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span>

<div class="viewcode-block" id="SingleWindow.area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the window area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span>
        <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">if</span> <span class="n">final_height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">final_width</span> <span class="o">*</span> <span class="n">final_height</span></div>


<div class="viewcode-block" id="SingleWindow.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as RectangularWindows.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="p">(</span><span class="n">floor_to_ceiling_height</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span>
        <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">if</span> <span class="n">final_height</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">((</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">final_width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span>
            <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">([</span><span class="n">origin</span><span class="p">],</span> <span class="p">[</span><span class="n">final_width</span><span class="p">],</span> <span class="p">[</span><span class="n">final_height</span><span class="p">])</span>
            <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SingleWindow.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: Optional tolerance value. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">width_seg</span> <span class="o">=</span> <span class="n">LineSegment3D</span><span class="o">.</span><span class="n">from_end_points</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">height_seg</span> <span class="o">=</span> <span class="n">LineSegment3D</span><span class="o">.</span><span class="n">from_end_points</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">width_seg</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="p">(</span><span class="n">height_seg</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span>
        <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">if</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">face</span><span class="o">.</span><span class="n">aperture_by_width_height</span><span class="p">(</span><span class="n">final_width</span><span class="p">,</span> <span class="n">final_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span>
            <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                <span class="n">adj_ap_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz1&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_ap_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                <span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">)</span></div>


<div class="viewcode-block" id="SingleWindow.scale">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SingleWindow</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SingleWindow.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split SingleWindow parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">]</span>
        <span class="n">total_len</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="n">lengths</span><span class="p">:</span>
            <span class="n">new_w</span> <span class="o">=</span> <span class="p">(</span><span class="n">length</span> <span class="o">/</span> <span class="n">total_len</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SingleWindow</span><span class="p">(</span><span class="n">new_w</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_user_data</span><span class="p">(</span><span class="n">new_w_par</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="SingleWindow.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge SingleWindow parameters together using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">weights</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="n">sill_heights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">SingleWindow</span><span class="p">):</span>
                    <span class="n">weights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
                    <span class="n">width</span> <span class="o">+=</span> <span class="n">wp</span><span class="o">.</span><span class="n">width</span>
                    <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
                    <span class="n">sill_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># not all windows are of the same type; convert all to rectangular</span>
                    <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
                        <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="n">tw</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="o">/</span> <span class="n">tw</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weights</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">h</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">heights</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">sill_height</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">h</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sill_heights</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SingleWindow</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">sill_height</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SingleWindow.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create SingleWindow from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;SingleWindow&quot;,</span>
<span class="sd">            &quot;width&quot;: 100,</span>
<span class="sd">            &quot;height&quot;: 1.5,</span>
<span class="sd">            &quot;sill_height&quot;: 0.8</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SingleWindow&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected SingleWindow dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">sill</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sill_height&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;sill_height&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="mi">1</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">],</span> <span class="n">sill</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="SingleWindow.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get SingleWindow as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;SingleWindow&#39;</span><span class="p">,</span>
            <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
            <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
            <span class="s1">&#39;sill_height&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SingleWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SingleWindow</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;SingleWindow: [width: </span><span class="si">{}</span><span class="s1">] [height: </span><span class="si">{}</span><span class="s1">] [sill_height: </span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span></div>



<div class="viewcode-block" id="SimpleWindowArea">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleWindowArea</span><span class="p">(</span><span class="n">_WindowParameterBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for a single window defined by an absolute area.</span>

<span class="sd">    Properties:</span>
<span class="sd">        * window_area</span>
<span class="sd">        * rect_split</span>
<span class="sd">        * user_data</span>

<span class="sd">    Args:</span>
<span class="sd">        window_area: A number for the window area in current model units.</span>
<span class="sd">            If this area is larger than the area of the Wall that it is applied</span>
<span class="sd">            to, the window will fill the parent Wall at a 99% ratio.</span>
<span class="sd">        rect_split: Boolean to note whether rectangular portions of base Face</span>
<span class="sd">            should be extracted before scaling them to create apertures. For</span>
<span class="sd">            pentagonal gabled geometries, the resulting apertures will consist</span>
<span class="sd">            of one rectangle and one triangle, which can often look more realistic</span>
<span class="sd">            and is a better input for engines like EnergyPlus that cannot</span>
<span class="sd">            model windows with more than 4 vertices. However, if a single</span>
<span class="sd">            pentagonal window is desired for such a gabled shape, this input can</span>
<span class="sd">            be set to False to produce such a result.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_window_area&#39;</span><span class="p">,</span> <span class="s1">&#39;_rect_split&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_area</span><span class="p">,</span> <span class="n">rect_split</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize SimpleWindowArea.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_window_area</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">window_area</span><span class="p">,</span> <span class="s1">&#39;window area&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rect_split</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">rect_split</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">window_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the window area in current model units.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_area</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rect_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether rectangular portions are extracted.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_split</span>

<div class="viewcode-block" id="SimpleWindowArea.area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the window area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wall_area</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span> <span class="o">*</span> <span class="mf">0.99</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="o">&lt;</span> <span class="n">wall_area</span> <span class="k">else</span> <span class="n">wall_area</span></div>


<div class="viewcode-block" id="SimpleWindowArea.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as RectangularWindows.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_area</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">wall_area</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span> <span class="o">*</span> <span class="mf">0.99</span>
        <span class="n">window_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="o">/</span> <span class="n">wall_area</span>
        <span class="n">window_ratio</span> <span class="o">=</span> <span class="mf">0.99</span> <span class="k">if</span> <span class="n">window_ratio</span> <span class="o">&gt;</span> <span class="mf">0.99</span> <span class="k">else</span> <span class="n">window_ratio</span>
        <span class="n">scale_factor</span> <span class="o">=</span> <span class="n">window_ratio</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="n">final_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span> <span class="o">*</span> <span class="n">scale_factor</span>
        <span class="n">final_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">scale_factor</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">((</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">final_width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                         <span class="p">(</span><span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="n">final_height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">([</span><span class="n">origin</span><span class="p">],</span> <span class="p">[</span><span class="n">final_width</span><span class="p">],</span> <span class="p">[</span><span class="n">final_height</span><span class="p">])</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SimpleWindowArea.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: Optional tolerance value. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_area</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">window_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="o">/</span> <span class="n">face</span><span class="o">.</span><span class="n">area</span>
        <span class="n">window_ratio</span> <span class="o">=</span> <span class="mf">0.99</span> <span class="k">if</span> <span class="n">window_ratio</span> <span class="o">&gt;</span> <span class="mf">0.99</span> <span class="k">else</span> <span class="n">window_ratio</span>
        <span class="n">face</span><span class="o">.</span><span class="n">apertures_by_ratio</span><span class="p">(</span><span class="n">window_ratio</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
        <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
            <span class="n">num_aps</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">apertures</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ap</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">):</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                <span class="n">adj_ap_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">num_aps</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_ap_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                <span class="n">ap</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleWindowArea.scale">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SimpleWindowArea</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SimpleWindowArea.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split SimpleWindowArea parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if one of the segments is much larger than the others, add all windows to that</span>
        <span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">]</span>
        <span class="n">new_wps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_to_primary_segment</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_wps</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">new_wps</span>
        <span class="c1"># otherwise, just distribute the windows evenly</span>
        <span class="n">total_len</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
        <span class="n">n_par</span> <span class="o">=</span> <span class="p">[</span><span class="n">SimpleWindowArea</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="o">*</span> <span class="p">(</span><span class="n">sl</span> <span class="o">/</span> <span class="n">total_len</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
                 <span class="k">for</span> <span class="n">sl</span> <span class="ow">in</span> <span class="n">lengths</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_user_data</span><span class="p">(</span><span class="n">n_par</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n_par</span></div>


<div class="viewcode-block" id="SimpleWindowArea.trim">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.trim">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_segment</span><span class="p">,</span> <span class="n">sub_segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trim window parameters for a sub segment given the original segment.</span>

<span class="sd">        Args:</span>
<span class="sd">            original_segment: The original LineSegment3D to which the window</span>
<span class="sd">                parameters are assigned.</span>
<span class="sd">            sub_segment: A LineSegment3D that is a sub-segment of the original_segment,</span>
<span class="sd">                which will be used to trim the window parameters to fit this segment.</span>
<span class="sd">                Note that this sub_segment should have the same orientation as</span>
<span class="sd">                the original segment.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># evenly distribute the windows</span>
        <span class="n">len_ratio</span> <span class="o">=</span> <span class="n">sub_segment</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="n">original_segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">n_par</span> <span class="o">=</span> <span class="n">SimpleWindowArea</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_area</span> <span class="o">*</span> <span class="n">len_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
        <span class="n">n_par</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_data</span>
        <span class="k">return</span> <span class="n">n_par</span></div>


<div class="viewcode-block" id="SimpleWindowArea.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge SimpleWindowArea parameters together using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">win_area</span><span class="p">,</span> <span class="n">rect_split</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">wp</span> <span class="ow">in</span> <span class="n">window_parameters</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">SimpleWindowArea</span><span class="p">):</span>
                    <span class="n">win_area</span> <span class="o">+=</span> <span class="n">wp</span><span class="o">.</span><span class="n">window_area</span>
                    <span class="n">rect_split</span> <span class="o">=</span> <span class="n">wp</span><span class="o">.</span><span class="n">rect_split</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># not all windows are of the same type; convert all to rectangular</span>
                    <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
                        <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SimpleWindowArea</span><span class="p">(</span><span class="n">win_area</span><span class="p">,</span> <span class="n">rect_split</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SimpleWindowArea.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create SimpleWindowArea from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;SimpleWindowArea&quot;,</span>
<span class="sd">            &quot;window_area&quot;: 5.5,</span>
<span class="sd">            &quot;rect_split&quot;: False</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SimpleWindowArea&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected SimpleWindowArea dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">rect_split</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="s1">&#39;rect_split&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;rect_split&#39;</span><span class="p">]</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;window_area&#39;</span><span class="p">],</span> <span class="n">rect_split</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="SimpleWindowArea.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get SimpleWindowArea as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;SimpleWindowArea&#39;</span><span class="p">,</span>
            <span class="s1">&#39;window_area&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_area</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;rect_split&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_all_to_primary_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lengths</span><span class="p">,</span> <span class="n">prim_ratio</span><span class="o">=</span><span class="mf">0.95</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine if one segment is primary and should get all the windows.&quot;&quot;&quot;</span>
        <span class="n">total_len</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
        <span class="n">prim_len</span> <span class="o">=</span> <span class="n">prim_ratio</span> <span class="o">+</span> <span class="mf">0.01</span>
        <span class="n">all_to_one_i</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lengths</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sl</span> <span class="o">/</span> <span class="n">total_len</span> <span class="o">&gt;</span> <span class="n">prim_len</span><span class="p">:</span>
                <span class="n">all_to_one_i</span> <span class="o">=</span> <span class="n">i</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">all_to_one_i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_wps</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
            <span class="n">new_par</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
            <span class="n">new_wps</span><span class="p">[</span><span class="n">all_to_one_i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_par</span>
            <span class="k">return</span> <span class="n">new_wps</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SimpleWindowArea</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_window_area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_split</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SimpleWindowArea</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;SimpleWindowArea: [area: </span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_area</span><span class="p">)</span></div>



<div class="viewcode-block" id="SimpleWindowRatio">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleWindowRatio</span><span class="p">(</span><span class="n">_WindowParameterBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for a single window defined by an area ratio with the base wall.</span>

<span class="sd">    Properties:</span>
<span class="sd">        * window_ratio</span>
<span class="sd">        * rect_split</span>
<span class="sd">        * user_data</span>

<span class="sd">    Args:</span>
<span class="sd">        window_ratio: A number between 0 and 1 for the ratio between the window</span>
<span class="sd">            area and the parent wall surface area.</span>
<span class="sd">        rect_split: Boolean to note whether rectangular portions of base Face</span>
<span class="sd">            should be extracted before scaling them to create apertures. For</span>
<span class="sd">            pentagonal gabled geometries, the resulting apertures will consist</span>
<span class="sd">            of one rectangle and one triangle, which can often look more realistic</span>
<span class="sd">            and is a better input for engines like EnergyPlus that cannot</span>
<span class="sd">            model windows with more than 4 vertices. However, if a single</span>
<span class="sd">            pentagonal window is desired for such a gabled shape, this input can</span>
<span class="sd">            be set to False to produce such a result.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_window_ratio&#39;</span><span class="p">,</span> <span class="s1">&#39;_rect_split&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_ratio</span><span class="p">,</span> <span class="n">rect_split</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize SimpleWindowRatio.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">window_ratio</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;window ratio&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rect_split</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">rect_split</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">window_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number between 0 and 1 for the window ratio.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">rect_split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether rectangular portions are extracted.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rect_split</span>

<div class="viewcode-block" id="SimpleWindowRatio.area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the window area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span></div>


<div class="viewcode-block" id="SimpleWindowRatio.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as RectangularWindows.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">scale_factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="n">final_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span> <span class="o">*</span> <span class="n">scale_factor</span>
        <span class="n">final_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">scale_factor</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">((</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">final_width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                         <span class="p">(</span><span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="n">final_height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">([</span><span class="n">origin</span><span class="p">],</span> <span class="p">[</span><span class="n">final_width</span><span class="p">],</span> <span class="p">[</span><span class="n">final_height</span><span class="p">])</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SimpleWindowRatio.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: Optional tolerance value. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">face</span><span class="o">.</span><span class="n">apertures_by_ratio</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
        <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
            <span class="n">num_aps</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">apertures</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ap</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">):</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                <span class="n">adj_ap_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">num_aps</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_ap_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                <span class="n">ap</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleWindowRatio.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split SimpleWindowRatio parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if one of the segments is much larger than the others, add all windows to that</span>
        <span class="n">new_ratios</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_to_primary_segment</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_ratios</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">new_ratios</span>
        <span class="c1"># otherwise, just distribute the windows evenly</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_user_data</span><span class="p">(</span><span class="n">new_w_par</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="SimpleWindowRatio.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge SimpleWindowRatio parameters together using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">win_area</span><span class="p">,</span> <span class="n">wall_area</span><span class="p">,</span> <span class="n">rect_split</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">wall_a</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span>
                <span class="n">wall_area</span> <span class="o">+=</span> <span class="n">wall_a</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">SimpleWindowRatio</span><span class="p">):</span>
                    <span class="n">win_area</span> <span class="o">+=</span> <span class="p">(</span><span class="n">wall_area</span> <span class="o">*</span> <span class="n">wp</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">)</span>
                    <span class="n">rect_split</span> <span class="o">=</span> <span class="n">wp</span><span class="o">.</span><span class="n">rect_split</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># not all windows are of the same type; convert all to rectangular</span>
                    <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
                        <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SimpleWindowRatio</span><span class="p">(</span><span class="n">win_area</span> <span class="o">/</span> <span class="n">wall_area</span><span class="p">,</span> <span class="n">rect_split</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="SimpleWindowRatio.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create SimpleWindowRatio from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;SimpleWindowRatio&quot;,</span>
<span class="sd">            &quot;window_ratio&quot;: 0.4,</span>
<span class="sd">            &quot;rect_split&quot;: False</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;SimpleWindowRatio&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected SimpleWindowRatio dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">rect_split</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="s1">&#39;rect_split&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;rect_split&#39;</span><span class="p">]</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;window_ratio&#39;</span><span class="p">],</span> <span class="n">rect_split</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="SimpleWindowRatio.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get SimpleWindowRatio as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;SimpleWindowRatio&#39;</span><span class="p">,</span>
            <span class="s1">&#39;window_ratio&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;rect_split&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_all_to_primary_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">prim_ratio</span><span class="o">=</span><span class="mf">0.95</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine if one segment is primary and should get all the windows.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span> <span class="o">&lt;=</span> <span class="n">prim_ratio</span><span class="p">:</span>
            <span class="n">lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">]</span>
            <span class="n">total_len</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
            <span class="n">prim_len</span> <span class="o">=</span> <span class="n">prim_ratio</span> <span class="o">+</span> <span class="mf">0.01</span>
            <span class="n">all_to_one_i</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lengths</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">sl</span> <span class="o">/</span> <span class="n">total_len</span> <span class="o">&gt;</span> <span class="n">prim_len</span><span class="p">:</span>
                    <span class="n">all_to_one_i</span> <span class="o">=</span> <span class="n">i</span>
                    <span class="n">all_to_one_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span> <span class="o">*</span> <span class="p">(</span><span class="n">total_len</span> <span class="o">/</span> <span class="n">sl</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">all_to_one_i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">new_ratios</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
                <span class="n">new_par</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
                <span class="n">new_par</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">=</span> <span class="n">all_to_one_ratio</span>
                <span class="n">new_ratios</span><span class="p">[</span><span class="n">all_to_one_i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_par</span>
                <span class="k">return</span> <span class="n">new_ratios</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">SimpleWindowRatio</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rect_split</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SimpleWindowRatio</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;SimpleWindowRatio: [ratio: </span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">)</span></div>



<div class="viewcode-block" id="RepeatingWindowRatio">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RepeatingWindowRatio</span><span class="p">(</span><span class="n">SimpleWindowRatio</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for repeating windows derived from an area ratio with the base face.</span>

<span class="sd">    Args:</span>
<span class="sd">        window_ratio: A number between 0 and 0.95 for the ratio between the window</span>
<span class="sd">            area and the total facade area.</span>
<span class="sd">        window_height: A number for the target height of the windows.</span>
<span class="sd">            Note that, if the window ratio is too large for the height, the</span>
<span class="sd">            ratio will take precedence and the actual window_height will</span>
<span class="sd">            be larger than this value.</span>
<span class="sd">        sill_height: A number for the target height above the bottom edge of</span>
<span class="sd">            the rectangle to start the windows. Note that, if the</span>
<span class="sd">            ratio is too large for the height, the ratio will take precedence</span>
<span class="sd">            and the sill_height will be smaller than this value.</span>
<span class="sd">        horizontal_separation: A number for the target separation between</span>
<span class="sd">            individual window center lines.  If this number is larger than</span>
<span class="sd">            the parent rectangle base, only one window will be produced.</span>
<span class="sd">        vertical_separation: An optional number to create a single vertical</span>
<span class="sd">            separation between top and bottom windows. Default: 0.</span>

<span class="sd">    Properties:</span>
<span class="sd">        * window_ratio</span>
<span class="sd">        * window_height</span>
<span class="sd">        * sill_height</span>
<span class="sd">        * horizontal_separation</span>
<span class="sd">        * vertical_separation</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_window_height&#39;</span><span class="p">,</span> <span class="s1">&#39;_sill_height&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_horizontal_separation&#39;</span><span class="p">,</span> <span class="s1">&#39;_vertical_separation&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_ratio</span><span class="p">,</span> <span class="n">window_height</span><span class="p">,</span> <span class="n">sill_height</span><span class="p">,</span>
                 <span class="n">horizontal_separation</span><span class="p">,</span> <span class="n">vertical_separation</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize RepeatingWindowRatio.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">=</span> <span class="n">float_in_range</span><span class="p">(</span><span class="n">window_ratio</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="s1">&#39;window ratio&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">window_height</span><span class="p">,</span> <span class="s1">&#39;window height&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">sill_height</span><span class="p">,</span> <span class="s1">&#39;sill height&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span> <span class="o">=</span> \
            <span class="n">float_positive</span><span class="p">(</span><span class="n">horizontal_separation</span><span class="p">,</span> <span class="s1">&#39;window horizontal separation&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_separation</span> <span class="o">=</span> \
            <span class="n">float_positive</span><span class="p">(</span><span class="n">vertical_separation</span><span class="p">,</span> <span class="s1">&#39;window vertical separation&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">window_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number or the target height of the windows.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sill_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the height above the bottom edge of the floor.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">horizontal_separation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the separation between individual window center lines.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">vertical_separation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for a vertical separation between top/bottom windows.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_separation</span>

<div class="viewcode-block" id="RepeatingWindowRatio.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as RectangularWindows.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">base_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">segment</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">sub_rects</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">sub_rects_from_rect_ratio</span><span class="p">(</span>
            <span class="n">base_plane</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_separation</span>
        <span class="p">)</span>
        <span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">sub_rects</span><span class="p">:</span>
            <span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">base_plane</span><span class="o">.</span><span class="n">xyz_to_xy</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">rect</span><span class="p">))</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">max</span>
            <span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_pt</span><span class="p">)</span>
            <span class="n">widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RepeatingWindowRatio.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: The maximum difference between point values for them to be</span>
<span class="sd">                considered a part of a rectangle. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">face</span><span class="o">.</span><span class="n">apertures_by_ratio_rectangle</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_separation</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
            <span class="n">num_aps</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">apertures</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ap</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">):</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                <span class="n">adj_ap_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">num_aps</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_ap_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                <span class="n">ap</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">)</span></div>


<div class="viewcode-block" id="RepeatingWindowRatio.scale">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RepeatingWindowRatio</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_separation</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RepeatingWindowRatio.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split RepeatingWindowRatio parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if one of the segments is much larger than the others, add all windows to that</span>
        <span class="n">new_ratios</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_to_primary_segment</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_ratios</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">new_ratios</span>
        <span class="c1"># otherwise, just distribute the windows evenly</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_user_data</span><span class="p">(</span><span class="n">new_w_par</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RepeatingWindowRatio.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge RepeatingWindowRatio parameters together using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">weights</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="n">sill_heights</span><span class="p">,</span> <span class="n">h_seps</span><span class="p">,</span> <span class="n">v_seps</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">win_area</span><span class="p">,</span> <span class="n">wall_area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">wall_a</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span>
                <span class="n">wall_area</span> <span class="o">+=</span> <span class="n">wall_a</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">RepeatingWindowRatio</span><span class="p">):</span>
                    <span class="n">win_area</span> <span class="o">+=</span> <span class="p">(</span><span class="n">wall_area</span> <span class="o">*</span> <span class="n">wp</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">)</span>
                    <span class="n">weights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
                    <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">window_height</span><span class="p">)</span>
                    <span class="n">sill_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span>
                    <span class="n">h_seps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">)</span>
                    <span class="n">v_seps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">vertical_separation</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># not all windows are of the same type; convert all to rectangular</span>
                    <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
                        <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="n">window_ratio</span> <span class="o">=</span> <span class="n">win_area</span> <span class="o">/</span> <span class="n">wall_area</span>
        <span class="n">tw</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="o">/</span> <span class="n">tw</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weights</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">h</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">heights</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">sill_height</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">h</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sill_heights</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">h_sep</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">s</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">h_seps</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">v_sep</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">s</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">v_seps</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RepeatingWindowRatio</span><span class="p">(</span><span class="n">window_ratio</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">sill_height</span><span class="p">,</span> <span class="n">h_sep</span><span class="p">,</span> <span class="n">v_sep</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RepeatingWindowRatio.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create RepeatingWindowRatio from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;RepeatingWindowRatio&quot;,</span>
<span class="sd">            &quot;window_ratio&quot;: 0.4,</span>
<span class="sd">            &quot;window_height&quot;: 2,</span>
<span class="sd">            &quot;sill_height&quot;: 0.8,</span>
<span class="sd">            &quot;horizontal_separation&quot;: 4,</span>
<span class="sd">            &quot;vertical_separation&quot;: 0.5</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RepeatingWindowRatio&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected RepeatingWindowRatio dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">vert</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;vertical_separation&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;vertical_separation&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;window_ratio&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;window_height&#39;</span><span class="p">],</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sill_height&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;horizontal_separation&#39;</span><span class="p">],</span> <span class="n">vert</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RepeatingWindowRatio.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get RepeatingWindowRatio as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;RepeatingWindowRatio&#39;</span><span class="p">,</span>
            <span class="s1">&#39;window_ratio&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_ratio</span><span class="p">,</span>
            <span class="s1">&#39;window_height&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span>
            <span class="s1">&#39;sill_height&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
            <span class="s1">&#39;horizontal_separation&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_separation</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;vertical_separation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_separation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RepeatingWindowRatio</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_separation</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_separation</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">RepeatingWindowRatio</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;RepeatingWindowRatio: [ratio: </span><span class="si">{}</span><span class="s1">] [window_height: </span><span class="si">{}</span><span class="s1">] [sill_height:&#39;</span> \
            <span class="s1">&#39; </span><span class="si">{}</span><span class="s1">] [horizontal: </span><span class="si">{}</span><span class="s1">] [vertical: </span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_window_ratio</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vertical_separation</span><span class="p">)</span></div>



<div class="viewcode-block" id="RepeatingWindowWidthHeight">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RepeatingWindowWidthHeight</span><span class="p">(</span><span class="n">_WindowParameterBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for repeating rectangular windows of a fixed width and height.</span>

<span class="sd">    This class effectively fills a wall with windows at the specified width, height</span>
<span class="sd">    and separation.</span>

<span class="sd">    Args:</span>
<span class="sd">        window_height: A number for the target height of the windows.</span>
<span class="sd">            Note that, if the window_height is larger than the height of the wall,</span>
<span class="sd">            the generated windows will have a height equal to the wall height</span>
<span class="sd">            in order to avoid having windows extend outside the wall face.</span>
<span class="sd">        window_width: A number for the target width of the windows.</span>
<span class="sd">            Note that, if the window_width is larger than the width of the wall,</span>
<span class="sd">            the generated windows will have a width equal to the wall width</span>
<span class="sd">            in order to avoid having windows extend outside the wall face.</span>
<span class="sd">        sill_height: A number for the target height above the bottom edge of</span>
<span class="sd">            the wall to start the windows. If the window_height</span>
<span class="sd">            is too large for the sill_height to fit within the rectangle,</span>
<span class="sd">            the window_height will take precedence.</span>
<span class="sd">        horizontal_separation: A number for the target separation between</span>
<span class="sd">            individual window center lines.  If this number is larger than</span>
<span class="sd">            the parent rectangle base, only one window will be produced.</span>

<span class="sd">    Properties:</span>
<span class="sd">        * window_height</span>
<span class="sd">        * window_width</span>
<span class="sd">        * sill_height</span>
<span class="sd">        * horizontal_separation</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_window_height&#39;</span><span class="p">,</span> <span class="s1">&#39;_window_width&#39;</span><span class="p">,</span> <span class="s1">&#39;_sill_height&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_horizontal_separation&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_height</span><span class="p">,</span> <span class="n">window_width</span><span class="p">,</span> <span class="n">sill_height</span><span class="p">,</span> <span class="n">horizontal_separation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize RepeatingWindowWidthHeight.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">window_height</span><span class="p">,</span> <span class="s1">&#39;window height&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_window_width</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">window_width</span><span class="p">,</span> <span class="s1">&#39;window width&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">sill_height</span><span class="p">,</span> <span class="s1">&#39;sill height&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span> <span class="o">=</span> \
            <span class="n">float_positive</span><span class="p">(</span><span class="n">horizontal_separation</span><span class="p">,</span> <span class="s1">&#39;window horizontal separation&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">window_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number or the target height of the windows.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">window_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number or the target width of the windows.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_width</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sill_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the height above the bottom edge of the floor.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">horizontal_separation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the separation between individual window center lines.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span>

<div class="viewcode-block" id="RepeatingWindowWidthHeight.area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the window area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hgt</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="mf">0.02</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span> <span class="k">if</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span> <span class="o">&gt;=</span> <span class="n">floor_to_ceiling_height</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span>
        <span class="n">max_width_break_up</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span> <span class="o">&lt;</span> <span class="n">max_width_break_up</span><span class="p">:</span>  <span class="c1"># multiple windows</span>
            <span class="n">num_div</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">)</span> <span class="k">if</span> \
                <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">num_div</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span> <span class="o">+</span> <span class="p">(</span><span class="n">num_div</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> \
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
                <span class="n">num_div</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">num_div</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span> <span class="o">*</span> <span class="n">hgt</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># one single window</span>
            <span class="k">return</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="mf">0.98</span> <span class="o">*</span> <span class="n">hgt</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as RectangularWindows.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">segment</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">sub_rects</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">sub_rects_from_rect_dimensions</span><span class="p">(</span>
            <span class="n">base_plane</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span>
        <span class="p">)</span>
        <span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">sub_rects</span><span class="p">:</span>
            <span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">base_plane</span><span class="o">.</span><span class="n">xyz_to_xy</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">rect</span><span class="p">))</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">max</span>
            <span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_pt</span><span class="p">)</span>
            <span class="n">widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: The maximum difference between point values for them to be</span>
<span class="sd">                considered a part of a rectangle. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_width</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">face</span><span class="o">.</span><span class="n">apertures_by_width_height_rectangle</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
            <span class="n">num_aps</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">apertures</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ap</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">):</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                <span class="n">adj_ap_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">num_aps</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_ap_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                <span class="n">ap</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">)</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.scale">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RepeatingWindowWidthHeight</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split RepeatingWindowWidthHeight parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># just distribute the windows evenly</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_user_data</span><span class="p">(</span><span class="n">new_w_par</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge RepeatingWindowWidthHeight parameters using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">weights</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">sill_heights</span><span class="p">,</span> <span class="n">h_seps</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">RepeatingWindowWidthHeight</span><span class="p">):</span>
                    <span class="n">weights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
                    <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">window_height</span><span class="p">)</span>
                    <span class="n">widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">window_width</span><span class="p">)</span>
                    <span class="n">sill_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">sill_height</span><span class="p">)</span>
                    <span class="n">h_seps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># not all windows are of the same type; convert all to rectangular</span>
                    <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
                        <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="n">tw</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span> <span class="o">/</span> <span class="n">tw</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weights</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">h</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">heights</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">width</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">x</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">widths</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">sill_height</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">h</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sill_heights</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">h_sep</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">s</span> <span class="o">*</span> <span class="n">w</span> <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">h_seps</span><span class="p">,</span> <span class="n">weights</span><span class="p">)])</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RepeatingWindowWidthHeight</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">sill_height</span><span class="p">,</span> <span class="n">h_sep</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="n">window_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create RepeatingWindowWidthHeight from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;RepeatingWindowWidthHeight&quot;,</span>
<span class="sd">            &quot;window_height&quot;: 2,</span>
<span class="sd">            &quot;window_width&quot;: 1.5,</span>
<span class="sd">            &quot;sill_height&quot;: 0.8,</span>
<span class="sd">            &quot;horizontal_separation&quot;: 4</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RepeatingWindowWidthHeight&#39;</span><span class="p">,</span> <span class="s1">&#39;Expected &#39;</span> \
            <span class="s1">&#39;RepeatingWindowWidthHeight dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;window_height&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;window_width&#39;</span><span class="p">],</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;sill_height&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;horizontal_separation&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RepeatingWindowWidthHeight.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get RepeatingWindowWidthHeight as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;RepeatingWindowWidthHeight&#39;</span><span class="p">,</span>
            <span class="s1">&#39;window_height&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span>
            <span class="s1">&#39;window_width&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span><span class="p">,</span>
            <span class="s1">&#39;sill_height&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
            <span class="s1">&#39;horizontal_separation&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RepeatingWindowWidthHeight</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_window_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sill_height</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_separation</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">RepeatingWindowWidthHeight</span><span class="p">)</span> <span class="ow">and</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">__key</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;RepeatingWindowWidthHeight: [window_height: </span><span class="si">{}</span><span class="s1">] [window_width: &#39;</span> \
            <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">] [sill_height: </span><span class="si">{}</span><span class="s1">] [horizontal: </span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">window_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sill_height</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">horizontal_separation</span><span class="p">)</span></div>



<span class="k">class</span><span class="w"> </span><span class="nc">_AsymmetricBase</span><span class="p">(</span><span class="n">_WindowParameterBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for WindowParameters that can make asymmetric windows on a wall.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seg_length</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Flip the direction of the windows along a wall segment.</span>

<span class="sd">        This is needed since windows can exist asymmetrically across the wall</span>
<span class="sd">        segment and operations like reflecting the Room2D across a plane will</span>
<span class="sd">        require the window parameters to be flipped. Reversing the Room2D vertices</span>
<span class="sd">        also requires flipping.</span>

<span class="sd">        Args:</span>
<span class="sd">            seg_length: The length of the segment along which the parameters are</span>
<span class="sd">                being flipped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_merge_user_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_w_par</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build this object&#39;s user_data from those of merged window parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            original_w_par: An array of the original window parameters used to</span>
<span class="sd">                build this one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">((</span><span class="n">owp</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">owp</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">owp</span> <span class="ow">in</span> <span class="n">original_w_par</span><span class="p">):</span>
            <span class="n">new_u</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">ow_par</span> <span class="ow">in</span> <span class="n">original_w_par</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ow_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ow_par</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">ow_par</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">new_u</span><span class="p">:</span>
                            <span class="n">new_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">new_u</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> \
                                <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> \
                                <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ow_par</span><span class="p">):</span>
                            <span class="n">new_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="n">val</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">new_u</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_split_user_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">split_win_par</span><span class="p">,</span> <span class="n">win_par_indices</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Assign user_data to split WindowParameters with the help of split indices.</span>

<span class="sd">        Args:</span>
<span class="sd">            split_win_par: An array of WindowParameters that were derived by</span>
<span class="sd">                splitting this one.</span>
<span class="sd">            win_par_indices: A list of lists where each sub-list represents one of</span>
<span class="sd">                the WindowParameters in the split_win_par ean each item of each</span>
<span class="sd">                sub-list represents one of the rectangles or polygons in the</span>
<span class="sd">                window parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">win_par</span><span class="p">,</span> <span class="n">wp_i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">split_win_par</span><span class="p">,</span> <span class="n">win_par_indices</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">win_par</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">u_dict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                        <span class="n">u_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">wp_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">u_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
                <span class="n">win_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">u_dict</span>


<div class="viewcode-block" id="RectangularWindows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">RectangularWindows</span><span class="p">(</span><span class="n">_AsymmetricBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for several rectangular windows, defined by origin, width and height.</span>

<span class="sd">    Note that, if these parameters are applied to a base wall that is too short</span>
<span class="sd">    or too narrow such that the windows fall outside the boundary of the wall, the</span>
<span class="sd">    generated windows will automatically be shortened or excluded. This way, a</span>
<span class="sd">    certain pattern of repeating rectangular windows can be encoded in a single</span>
<span class="sd">    RectangularWindows instance and applied to multiple Room2D segments.</span>

<span class="sd">    Args:</span>
<span class="sd">        origins: An array of ladybug_geometry Point2D objects within the plane</span>
<span class="sd">            of the wall for the origin of each window. The wall plane is assumed</span>
<span class="sd">            to have an origin at the first point of the wall segment and an</span>
<span class="sd">            X-axis extending along the length of the segment. The wall plane&#39;s</span>
<span class="sd">            Y-axis always points upwards.  Therefore, both X and Y values of</span>
<span class="sd">            each origin point should be positive.</span>
<span class="sd">        widths: An array of positive numbers for the window widths. The length</span>
<span class="sd">            of this list must match the length of the origins.</span>
<span class="sd">        heights: An array of positive numbers for the window heights. The length</span>
<span class="sd">            of this list must match the length of the origins.</span>
<span class="sd">        are_doors: An array of booleans that align with the origins and note whether</span>
<span class="sd">            each of the geometries represents a door (True) or a window (False).</span>
<span class="sd">            If None, it will be assumed that all geometries represent windows and</span>
<span class="sd">            they will be translated to Apertures in any resulting Honeybee</span>
<span class="sd">            model. (Default: None).</span>

<span class="sd">    Properties:</span>
<span class="sd">        * origins</span>
<span class="sd">        * widths</span>
<span class="sd">        * heights</span>
<span class="sd">        * are_doors</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_origins&#39;</span><span class="p">,</span> <span class="s1">&#39;_widths&#39;</span><span class="p">,</span> <span class="s1">&#39;_heights&#39;</span><span class="p">,</span> <span class="s1">&#39;_are_doors&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="n">are_doors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize RectangularWindows.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">origins</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">origins</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">origins</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">origins</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">),</span> \
                <span class="s1">&#39;Expected Point2D for window origin. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">point</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_origins</span> <span class="o">=</span> <span class="n">origins</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_widths</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">float_positive</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="s1">&#39;window width&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">width</span> <span class="ow">in</span> <span class="n">widths</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_heights</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">float_positive</span><span class="p">(</span><span class="n">hgt</span><span class="p">,</span> <span class="s1">&#39;window height&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">hgt</span> <span class="ow">in</span> <span class="n">heights</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_origins</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widths</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_heights</span><span class="p">),</span> \
            <span class="s1">&#39;Number of window origins, widths, and heights must match.&#39;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> \
            <span class="s1">&#39;There must be at least one window to use RectangularWindows.&#39;</span>

        <span class="k">if</span> <span class="n">are_doors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">origins</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">are_doors</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">are_doors</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">are_doors</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">is_dr</span> <span class="ow">in</span> <span class="n">are_doors</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">is_dr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span> <span class="s1">&#39;Expected booleans for &#39;</span> \
                    <span class="s1">&#39;RectangularWindows.are_doors. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">is_dr</span><span class="p">))</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">are_doors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">origins</span><span class="p">),</span> \
                <span class="s1">&#39;Length of RectangularWindows.are_doors (</span><span class="si">{}</span><span class="s1">) does not match length &#39;</span> \
                <span class="s1">&#39;of RectangularWindows.origins (</span><span class="si">{}</span><span class="s1">).&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">are_doors</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">origins</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="n">are_doors</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">origins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an array of Point2Ds within the wall plane for the origin of each window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_origins</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">widths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an array of numbers for the window widths.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_widths</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">heights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an array of numbers for the window heights.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_heights</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">are_doors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an array of booleans that note whether each geometry is a door.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span>

<div class="viewcode-block" id="RectangularWindows.area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the sub-face area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Note that this includes both the areas of Apertures and Doors.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span>
        <span class="n">areas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">):</span>
            <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="k">if</span> <span class="n">width</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="n">width</span>
            <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="k">if</span> <span class="n">height</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="n">height</span>
            <span class="k">if</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># inside wall boundary</span>
                <span class="n">areas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">final_width</span> <span class="o">*</span> <span class="n">final_height</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">areas</span><span class="p">)</span></div>


<div class="viewcode-block" id="RectangularWindows.aperture_area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.aperture_area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">aperture_area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Aperture area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Note that this excludes the area of Doors.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span>
        <span class="n">areas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">isd</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isd</span><span class="p">:</span>
                <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="k">if</span> <span class="n">w</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="n">w</span>
                <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="k">if</span> <span class="n">h</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="n">h</span>
                <span class="k">if</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># inside wall boundary</span>
                    <span class="n">areas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">final_width</span> <span class="o">*</span> <span class="n">final_height</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">areas</span><span class="p">)</span></div>


<div class="viewcode-block" id="RectangularWindows.check_window_overlaps">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_window_overlaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_window_overlaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether any windows overlap with one another.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance that two windows must overlap in order</span>
<span class="sd">                for them to be considered overlapping and invalid. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message. Will be an empty string if valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># group the rectangular parameters to gether</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">)</span>
        <span class="n">rect_par</span> <span class="o">=</span> <span class="p">[(</span><span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">zip_obj</span><span class="p">]</span>
        <span class="c1"># loop through the polygons and check to see if it overlaps with the others</span>
        <span class="n">grouped_rects</span> <span class="o">=</span> <span class="p">[[</span><span class="n">rect_par</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]</span>
        <span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">rect_par</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">group_found</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">rect_group</span> <span class="ow">in</span> <span class="n">grouped_rects</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">oth_rect</span> <span class="ow">in</span> <span class="n">rect_group</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rectangles_overlap</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">oth_rect</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
                        <span class="n">rect_group</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
                        <span class="n">group_found</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">group_found</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">group_found</span><span class="p">:</span>  <span class="c1"># the polygon does not overlap with any of the others</span>
                <span class="n">grouped_rects</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">rect</span><span class="p">])</span>  <span class="c1"># make a new group for the polygon</span>
        <span class="c1"># report any polygons that overlap</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grouped_rects</span><span class="p">):</span>
            <span class="n">base_msg</span> <span class="o">=</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1"> windows overlap one another)&#39;</span>
            <span class="n">all_msg</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">r_group</span> <span class="ow">in</span> <span class="n">grouped_rects</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r_group</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">all_msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base_msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r_group</span><span class="p">)))</span>
            <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="RectangularWindows.check_valid_for_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_valid_for_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_valid_for_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that these window parameters are valid for a given LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message. Will be an empty string if valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">total_area</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span>
        <span class="n">win_area</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_from_segment</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">win_area</span> <span class="o">&gt;=</span> <span class="n">total_area</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Total area of windows [</span><span class="si">{}</span><span class="s1">] is greater than the area of the &#39;</span> \
                <span class="s1">&#39;parent wall [</span><span class="si">{}</span><span class="s1">].&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">win_area</span><span class="p">,</span> <span class="n">total_area</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="RectangularWindows.adjust_for_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.adjust_for_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_for_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get these parameters with geometry excluded beyond the domain of a given line.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new RectangularWindows object that fits entirely in the domain of the</span>
<span class="sd">            input line segment and floor_to_ceiling_height.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># compute the maximum width and height</span>
        <span class="n">seg_len</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">tol</span><span class="p">,</span> <span class="n">double_tol</span> <span class="o">=</span> <span class="n">tolerance</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tolerance</span>
        <span class="k">if</span> <span class="n">seg_len</span> <span class="o">-</span> <span class="n">double_tol</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="n">double_tol</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">seg_len</span> <span class="o">-</span> <span class="n">tol</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="n">tol</span>

        <span class="c1"># loop through the windows and adjust them</span>
        <span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">,</span> <span class="n">new_ad</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">wid</span><span class="p">,</span> <span class="n">hgt</span><span class="p">,</span> <span class="n">isd</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_obj</span><span class="p">):</span>
            <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="k">if</span> <span class="n">wid</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="n">wid</span>
            <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="k">if</span> <span class="n">hgt</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="n">hgt</span>
            <span class="k">if</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># inside upper wall boundary</span>
                <span class="k">if</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">final_width</span> <span class="o">&gt;</span> <span class="n">tol</span> <span class="ow">and</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="n">tol</span><span class="p">:</span>  <span class="c1"># lower bound</span>
                    <span class="n">ox</span><span class="p">,</span> <span class="n">oy</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span>
                    <span class="k">if</span> <span class="n">ox</span> <span class="o">&lt;</span> <span class="n">tol</span><span class="p">:</span>
                        <span class="n">final_width</span> <span class="o">=</span> <span class="n">final_width</span> <span class="o">+</span> <span class="n">ox</span> <span class="o">-</span> <span class="n">tol</span>
                        <span class="n">ox</span> <span class="o">=</span> <span class="n">tol</span>
                    <span class="k">if</span> <span class="n">oy</span> <span class="o">&lt;</span> <span class="n">tol</span><span class="p">:</span>
                        <span class="n">final_height</span> <span class="o">=</span> <span class="n">final_height</span> <span class="o">+</span> <span class="n">oy</span> <span class="o">-</span> <span class="n">tol</span>
                        <span class="n">oy</span> <span class="o">=</span> <span class="n">tol</span>
                    <span class="n">new_origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">))</span>
                    <span class="n">new_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">final_width</span><span class="p">)</span>
                    <span class="n">new_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">final_height</span><span class="p">)</span>
                    <span class="n">new_ad</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">isd</span><span class="p">)</span>
                    <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># return the final window parameters</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">,</span> <span class="n">new_ad</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="n">new_w_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RectangularWindows.remove_doors">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_doors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_doors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these window parameters with all doors removed.&quot;&quot;&quot;</span>
        <span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">isd</span> <span class="ow">in</span> <span class="n">zip_obj</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isd</span><span class="p">:</span>
                <span class="n">new_origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                <span class="n">new_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
                <span class="n">new_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="c1"># return the final window parameters</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="n">new_w_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RectangularWindows.shift_vertically">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_vertically">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shift_vertically</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shift_distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters shifted up or down in the wall plane.</span>

<span class="sd">        This is useful when the windows are assigned to a Room2D that is</span>
<span class="sd">        vertically split and new windows need to be assigned to new Room2Ds.</span>

<span class="sd">        Args:</span>
<span class="sd">            shift_distance: A number for the distance that the window parameters</span>
<span class="sd">                will be shifted. Positive values will shift the windows upwards</span>
<span class="sd">                in the wall plane and negative values will shift the windows downwards.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the new window origins</span>
        <span class="n">new_origins</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">shift_distance</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span>
            <span class="n">new_origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RectangularWindows.shift_horizontally">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_horizontally">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shift_horizontally</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shift_distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters shifted left or right in the wall plane.</span>

<span class="sd">        This is useful when the length of the segment that the windows are assigned</span>
<span class="sd">        to has changed a lot from the original value such that the windows should</span>
<span class="sd">        be re-centered.</span>

<span class="sd">        Args:</span>
<span class="sd">            shift_distance: A number for the distance that the window parameters</span>
<span class="sd">                will be shifted. Positive values will shift the windows to the</span>
<span class="sd">                right in the wall plane and negative values will shift the windows</span>
<span class="sd">                to the left.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the new window origins</span>
        <span class="n">new_origins</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">shift_distance</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span>
            <span class="n">new_origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RectangularWindows.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the object instance. Provided here for consistency with other classes.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="RectangularWindows.to_detailed_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_detailed_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_detailed_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as DetailedWindows.&quot;&quot;&quot;</span>
        <span class="n">polygons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">):</span>
            <span class="n">poly_pts</span> <span class="o">=</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span><span class="p">),</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">),</span>
                        <span class="n">Point2D</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">h</span><span class="p">))</span>
            <span class="n">polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="n">poly_pts</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span></div>


<div class="viewcode-block" id="RectangularWindows.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: Optional tolerance value. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the plane of the parent wall</span>
        <span class="n">fg</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span>
        <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="n">lower_left_corner</span><span class="p">,</span> <span class="n">fg</span><span class="o">.</span><span class="n">upper_right_corner</span>
        <span class="n">width_seg</span> <span class="o">=</span> <span class="n">LineSegment3D</span><span class="o">.</span><span class="n">from_end_points</span><span class="p">(</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">Point3D</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>
        <span class="n">wall_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">plane</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="n">min_pt</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">width_seg</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">width_seg</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">tolerance</span>

        <span class="c1"># loop through each window and create its geometry</span>
        <span class="n">sub_faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">wid</span><span class="p">,</span> <span class="n">hgt</span><span class="p">,</span> <span class="n">isd</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_obj</span><span class="p">):</span>
            <span class="n">final_width</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="k">if</span> <span class="n">wid</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="k">else</span> <span class="n">wid</span>
            <span class="n">final_height</span> <span class="o">=</span> <span class="n">max_height</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="k">if</span> <span class="n">hgt</span> <span class="o">+</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="n">hgt</span>
            <span class="k">if</span> <span class="n">final_height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">final_width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># inside wall boundary</span>
                <span class="n">ox</span><span class="p">,</span> <span class="n">oy</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span>
                <span class="k">if</span> <span class="n">ox</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">final_width</span> <span class="o">=</span> <span class="n">final_width</span> <span class="o">+</span> <span class="n">ox</span> <span class="o">-</span> <span class="n">tolerance</span>
                    <span class="n">ox</span> <span class="o">=</span> <span class="n">tolerance</span>
                <span class="k">if</span> <span class="n">oy</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">final_height</span> <span class="o">=</span> <span class="n">final_height</span> <span class="o">+</span> <span class="n">oy</span> <span class="o">-</span> <span class="n">tolerance</span>
                    <span class="n">oy</span> <span class="o">=</span> <span class="n">tolerance</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">)</span>
                <span class="n">base_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">wall_plane</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">wall_plane</span><span class="o">.</span><span class="n">xy_to_xyz</span><span class="p">(</span><span class="n">o</span><span class="p">),</span> <span class="n">wall_plane</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                <span class="n">s_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">from_rectangle</span><span class="p">(</span><span class="n">final_width</span><span class="p">,</span> <span class="n">final_height</span><span class="p">,</span> <span class="n">base_plane</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">isd</span><span class="p">:</span>
                    <span class="n">sub_f</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Door</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">s_geo</span><span class="p">)</span>
                    <span class="n">face</span><span class="o">.</span><span class="n">add_door</span><span class="p">(</span><span class="n">sub_f</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sub_f</span> <span class="o">=</span> <span class="n">Aperture</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">s_geo</span><span class="p">)</span>
                    <span class="n">face</span><span class="o">.</span><span class="n">add_aperture</span><span class="p">(</span><span class="n">sub_f</span><span class="p">)</span>
                <span class="n">sub_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_f</span><span class="p">)</span>
                <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                    <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                    <span class="n">sf_type</span> <span class="o">=</span> <span class="s1">&#39;Door&#39;</span> <span class="k">if</span> <span class="n">isd</span> <span class="k">else</span> <span class="s1">&#39;Glz&#39;</span>
                    <span class="n">adj_sf_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sf_type</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_sf_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                    <span class="n">sub_f</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">sub_faces</span><span class="p">)</span></div>


<div class="viewcode-block" id="RectangularWindows.scale">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">factor</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">factor</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">factor</span> <span class="k">for</span> <span class="n">width</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="n">factor</span> <span class="k">for</span> <span class="n">height</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RectangularWindows.remove_small_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_small_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_small_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area_threshold</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these window parameters with small geometries removed.</span>

<span class="sd">        Args:</span>
<span class="sd">            area_threshold: A number for the area below which a window will be removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">,</span> <span class="n">new_ad</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">isd</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_obj</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">w</span> <span class="o">*</span> <span class="n">h</span> <span class="o">&gt;</span> <span class="n">area_threshold</span><span class="p">:</span>
                <span class="n">new_origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                <span class="n">new_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
                <span class="n">new_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                <span class="n">new_ad</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">isd</span><span class="p">)</span>
                <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># return the final window parameters</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">,</span> <span class="n">new_ad</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="n">new_w_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RectangularWindows.flip">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.flip">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seg_length</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Flip the direction of the windows along a segment.</span>

<span class="sd">        This is needed since windows can exist asymmetrically across the wall</span>
<span class="sd">        segment and operations like reflecting the Room2D across a plane will</span>
<span class="sd">        require the window parameters to be flipped to remain in the same place.</span>

<span class="sd">        Args:</span>
<span class="sd">            seg_length: The length of the segment along which the parameters are</span>
<span class="sd">                being flipped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_origins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_widths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_heights</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_are_doors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">is_dr</span> <span class="ow">in</span> <span class="n">zip_obj</span><span class="p">:</span>
            <span class="n">new_x</span> <span class="o">=</span> <span class="n">seg_length</span> <span class="o">-</span> <span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span>
            <span class="k">if</span> <span class="n">new_x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># fully within the wall boundary</span>
                <span class="n">new_origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">new_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">width</span><span class="p">)</span>
                <span class="n">new_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
                <span class="n">new_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">new_x</span> <span class="o">+</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="n">seg_length</span> <span class="o">*</span> <span class="mf">0.001</span><span class="p">:</span>  <span class="c1"># partially within the boundary</span>
                <span class="n">new_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">width</span> <span class="o">+</span> <span class="n">new_x</span> <span class="o">-</span> <span class="p">(</span><span class="n">seg_length</span> <span class="o">*</span> <span class="mf">0.001</span><span class="p">))</span>
                <span class="n">new_x</span> <span class="o">=</span> <span class="n">seg_length</span> <span class="o">*</span> <span class="mf">0.001</span>
                <span class="n">new_origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">new_x</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">new_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">height</span><span class="p">)</span>
                <span class="n">new_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">new_origins</span><span class="p">,</span> <span class="n">new_widths</span><span class="p">,</span> <span class="n">new_heights</span><span class="p">,</span> <span class="n">new_are_doors</span><span class="p">)</span>
            <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="RectangularWindows.offset">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.offset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Offset the edges of all windows by a certain distance.</span>

<span class="sd">        This is useful for translating between interfaces that expect the window</span>
<span class="sd">        frame to be included within or excluded from the geometry.</span>

<span class="sd">        Note that this operation can often create windows that collide with</span>
<span class="sd">        one another or extend past the parent Face. So it may be desirable</span>
<span class="sd">        to convert these parameters to_detailed_windows and run the union_overlaps</span>
<span class="sd">        method after using this one.</span>

<span class="sd">        Args:</span>
<span class="sd">            offset_distance: Distance with which the edges of each window will</span>
<span class="sd">                be offset from the original geometry. Positive values will</span>
<span class="sd">                offset the geometry outwards and negative values will offset the</span>
<span class="sd">                geometries inwards.</span>
<span class="sd">            tolerance: The minimum difference between point values for them to be</span>
<span class="sd">                considered the distinct. (Default: 0.01, suitable for objects</span>
<span class="sd">                in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_origins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_widths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">new_heights</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="ow">in</span> <span class="n">zip_obj</span><span class="p">:</span>
            <span class="n">new_origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">offset_distance</span><span class="p">,</span> <span class="n">o</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">offset_distance</span><span class="p">))</span>
            <span class="n">new_widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">width</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">offset_distance</span><span class="p">))</span>
            <span class="n">new_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">height</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">offset_distance</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_origins</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_origins</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widths</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_widths</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_heights</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_heights</span><span class="p">)</span></div>


<div class="viewcode-block" id="RectangularWindows.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split RectangularWindows parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_win_pars</span><span class="p">,</span> <span class="n">win_par_is</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">rel_pt</span><span class="p">,</span> <span class="n">rel_w</span><span class="p">,</span> <span class="n">rel_h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span>
        <span class="n">rel_d</span><span class="p">,</span> <span class="n">rel_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
            <span class="c1"># loop through the vertices and adjust them to the max width</span>
            <span class="n">win_par_i</span><span class="p">,</span> <span class="n">out_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="n">seg_len</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="n">seg_len</span> <span class="o">-</span> <span class="n">tolerance</span>
            <span class="n">new_pts</span><span class="p">,</span> <span class="n">new_w</span><span class="p">,</span> <span class="n">new_h</span><span class="p">,</span> <span class="n">new_d</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="n">out_pts</span><span class="p">,</span> <span class="n">out_w</span><span class="p">,</span> <span class="n">out_h</span><span class="p">,</span> <span class="n">out_d</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">pt</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rel_pt</span><span class="p">,</span> <span class="n">rel_w</span><span class="p">,</span> <span class="n">rel_h</span><span class="p">,</span> <span class="n">rel_d</span><span class="p">,</span> <span class="n">rel_i</span><span class="p">):</span>
                <span class="n">x_val</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">x</span>
                <span class="k">if</span> <span class="n">w</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>  <span class="c1"># completely outside of the segment</span>
                    <span class="n">out_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span> <span class="o">-</span> <span class="n">seg_len</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                    <span class="n">out_w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
                    <span class="n">out_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                    <span class="n">out_d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                    <span class="n">out_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">x_val</span> <span class="o">+</span> <span class="n">w</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>  <span class="c1"># split by segment</span>
                    <span class="n">split_dist</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">-</span> <span class="n">x_val</span>
                    <span class="n">new_width</span> <span class="o">=</span> <span class="n">split_dist</span> <span class="o">-</span> <span class="n">tolerance</span>
                    <span class="k">if</span> <span class="n">new_width</span> <span class="o">&gt;</span> <span class="n">tolerance</span><span class="p">:</span>
                        <span class="n">new_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                        <span class="n">new_w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_width</span><span class="p">)</span>
                        <span class="n">new_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                        <span class="n">new_d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                        <span class="n">win_par_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                        <span class="n">out_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                        <span class="n">out_w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="n">split_dist</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">tolerance</span><span class="p">))</span>
                        <span class="n">out_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                        <span class="n">out_d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                        <span class="n">out_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># completely inside segment</span>
                    <span class="n">new_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
                    <span class="n">new_w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
                    <span class="n">new_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                    <span class="n">new_d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                    <span class="n">win_par_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

            <span class="c1"># build the final window parameters from the adjusted windows</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_pts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">new_win_pars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RectangularWindows</span><span class="p">(</span><span class="n">new_pts</span><span class="p">,</span> <span class="n">new_w</span><span class="p">,</span> <span class="n">new_h</span><span class="p">,</span> <span class="n">new_d</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_win_pars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">win_par_is</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">win_par_i</span><span class="p">)</span>
            <span class="c1"># shift all windows to be relevant for the next segment</span>
            <span class="n">rel_pt</span><span class="p">,</span> <span class="n">rel_w</span><span class="p">,</span> <span class="n">rel_h</span><span class="p">,</span> <span class="n">rel_d</span><span class="p">,</span> <span class="n">rel_i</span> <span class="o">=</span> <span class="n">out_pts</span><span class="p">,</span> <span class="n">out_w</span><span class="p">,</span> <span class="n">out_h</span><span class="p">,</span> <span class="n">out_d</span><span class="p">,</span> <span class="n">out_i</span>

        <span class="c1"># apply the user_data to the split window parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_split_user_data</span><span class="p">(</span><span class="n">new_win_pars</span><span class="p">,</span> <span class="n">win_par_is</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_win_pars</span></div>


<div class="viewcode-block" id="RectangularWindows.trim">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.trim">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_segment</span><span class="p">,</span> <span class="n">sub_segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trim RectangularWindows for a sub segment given the original segment.</span>

<span class="sd">        Args:</span>
<span class="sd">            original_segment: The original LineSegment3D to which the window</span>
<span class="sd">                parameters are assigned.</span>
<span class="sd">            sub_segment: A LineSegment3D that is a sub-segment of the original_segment,</span>
<span class="sd">                which will be used to trim the window parameters to fit this segment.</span>
<span class="sd">                Note that this sub_segment should have the same orientation as</span>
<span class="sd">                the original segment.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># shift all origins to be relevant for the sub segment</span>
        <span class="n">rel_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span>
        <span class="n">shift_dist</span> <span class="o">=</span> <span class="n">original_segment</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">sub_segment</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">shift_dist</span> <span class="o">&gt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">rel_pt</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">:</span>
                <span class="n">rel_pt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">shift_dist</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="c1"># loop through the rectangles and trim them for the segment</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">sub_segment</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span>
        <span class="n">new_pts</span><span class="p">,</span> <span class="n">new_w</span><span class="p">,</span> <span class="n">new_h</span><span class="p">,</span> <span class="n">new_d</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pt</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rel_pt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">):</span>
            <span class="n">x_val</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">x</span>
            <span class="k">if</span> <span class="n">x_val</span> <span class="o">&gt;=</span> <span class="n">max_width</span> <span class="ow">or</span> <span class="n">x_val</span> <span class="o">+</span> <span class="n">w</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># completely outside of the segment</span>
            <span class="k">if</span> <span class="n">x_val</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>  <span class="c1"># split by segment on left</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">tolerance</span> <span class="o">-</span> <span class="n">x_val</span>
                <span class="n">x_val</span> <span class="o">=</span> <span class="n">tolerance</span>
            <span class="k">if</span> <span class="n">x_val</span> <span class="o">+</span> <span class="n">w</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>  <span class="c1"># split by segment on right</span>
                <span class="n">split_dist</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">-</span> <span class="n">x_val</span>
                <span class="n">new_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">new_w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_dist</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">new_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                <span class="n">new_d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># completely inside segment</span>
                <span class="n">new_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
                <span class="n">new_w</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
                <span class="n">new_h</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
                <span class="n">new_d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="c1"># build the final window parameters from the adjusted windows</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_pts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">new_pts</span><span class="p">,</span> <span class="n">new_w</span><span class="p">,</span> <span class="n">new_h</span><span class="p">,</span> <span class="n">new_d</span><span class="p">)</span></div>


<div class="viewcode-block" id="RectangularWindows.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge RectangularWindows parameters together using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segments belong.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
            <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="n">new_w_par</span><span class="o">.</span><span class="n">_merge_user_data</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RectangularWindows.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create RectangularWindows from a dictionary.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;RectangularWindows&quot;,</span>
<span class="sd">            &quot;origins&quot;: [(1, 1), (3, 0.5)],  # array of (x, y) floats in wall plane</span>
<span class="sd">            &quot;widths&quot;: [1, 3],  # array of floats for window widths</span>
<span class="sd">            &quot;heights&quot;: [1, 2.5],  # array of floats for window heights</span>
<span class="sd">            &quot;are_doors&quot;: [False, True]  # array of booleans for whether it&#39;s a door</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;RectangularWindows&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected RectangularWindows. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="n">are_doors</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;are_doors&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;are_doors&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">Point2D</span><span class="o">.</span><span class="n">from_array</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;origins&#39;</span><span class="p">]),</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;widths&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;heights&#39;</span><span class="p">],</span> <span class="n">are_doors</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="RectangularWindows.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get RectangularWindows as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;RectangularWindows&#39;</span><span class="p">,</span>
            <span class="s1">&#39;origins&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">pt</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">],</span>
            <span class="s1">&#39;widths&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span>
            <span class="s1">&#39;heights&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span>
            <span class="s2">&quot;are_doors&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_rectangles_overlap</span><span class="p">(</span><span class="n">rect_par_1</span><span class="p">,</span> <span class="n">rect_par_2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test if two rectangles overlap within a tolerance.&quot;&quot;&quot;</span>
        <span class="n">min_pt1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">h1</span> <span class="o">=</span> <span class="n">rect_par_1</span>
        <span class="n">max_pt1</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">min_pt1</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">w1</span><span class="p">,</span> <span class="n">min_pt1</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">h1</span><span class="p">)</span>
        <span class="n">min_pt2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">h2</span> <span class="o">=</span> <span class="n">rect_par_2</span>
        <span class="n">max_pt2</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">min_pt2</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">w2</span><span class="p">,</span> <span class="n">min_pt2</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">h2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_pt2</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_pt1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="ow">or</span> <span class="n">min_pt1</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_pt2</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">min_pt2</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_pt1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="ow">or</span> <span class="n">min_pt1</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_pt2</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">widths</span><span class="p">),</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heights</span><span class="p">),</span>
                <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">RectangularWindows</span><span class="p">)</span> <span class="ow">and</span> \
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_origins</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_origins</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;RectangularWindows: [</span><span class="si">{}</span><span class="s1"> windows]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">))</span></div>



<div class="viewcode-block" id="DetailedWindows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DetailedWindows</span><span class="p">(</span><span class="n">_AsymmetricBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instructions for detailed windows, defined by 2D Polygons (lists of 2D vertices).</span>

<span class="sd">    Note that these parameters are intended to represent windows that are specific</span>
<span class="sd">    to a particular segment and, unlike the other WindowParameters, this class</span>
<span class="sd">    performs no automatic checks to ensure that the windows lie within the</span>
<span class="sd">    boundary of the wall they have been assigned to.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygons: An array of ladybug_geometry Polygon2D objects within the plane</span>
<span class="sd">            of the wall with one polygon for each window. The wall plane is</span>
<span class="sd">            assumed to have an origin at the first point of the wall segment</span>
<span class="sd">            and an X-axis extending along the length of the segment. The wall</span>
<span class="sd">            plane&#39;s Y-axis always points upwards.  Therefore, both X and Y</span>
<span class="sd">            values of each point in the polygon should always be positive.</span>
<span class="sd">        are_doors: An array of booleans that align with the polygons and note</span>
<span class="sd">            whether each of the polygons represents a door (True) or a window (False).</span>
<span class="sd">            If None, it will be assumed that all polygons represent windows and</span>
<span class="sd">            they will be translated to Apertures in any resulting Honeybee</span>
<span class="sd">            model. (Default: None).</span>

<span class="sd">    Properties:</span>
<span class="sd">        * polygons</span>
<span class="sd">        * are_doors</span>
<span class="sd">        * user_data</span>

<span class="sd">    Usage:</span>
<span class="sd">        Note that, if you are starting from 3D vertices of windows, you can</span>
<span class="sd">        use this class to represent them. The DetailedWindows.from_face3ds is the</span>
<span class="sd">        simplest way to do this. Otherwise, below is some sample code to convert</span>
<span class="sd">        from vertices in the same 3D space as a vertical wall to vertices in the 2D</span>
<span class="sd">        plane of the wall (as this class interprets it).</span>

<span class="sd">        In the code, &#39;seg_p1&#39; is the first point of a given wall segment and</span>
<span class="sd">        is assumed to be the origin of the wall plane. &#39;seg_p2&#39; is the second</span>
<span class="sd">        point of the wall segment, and &#39;vertex&#39; is a given vertex of the</span>
<span class="sd">        window that you want to translate from 3D coordinates into 2D. All</span>
<span class="sd">        input points are presented as arrays of 3 floats and the output is</span>
<span class="sd">        an array of 2 (x, y) coordinates.</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        def dot_product(v1, v2):</span>
<span class="sd">            return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[3]</span>

<span class="sd">        def normalize(v):</span>
<span class="sd">            d = (v[0] ** 2 + v[1] ** 2 + v[2] ** 2) ** 0.5</span>
<span class="sd">            return (v[0] / d, v[1] / d, v[2] / d)</span>

<span class="sd">        def xyz_to_xy(seg_p1, seg_p2, vertex):</span>
<span class="sd">            diff = (vertex[0] - seg_p1[0], vertex[1] - seg_p1[1], vertex[2] - seg_p1[2])</span>
<span class="sd">            axis = (seg_p2[0] - seg_p1[0], seg_p2[1] - seg_p1[1], seg_p2[2] - seg_p1[2])</span>
<span class="sd">            plane_x = normalize(axis)</span>
<span class="sd">            plane_y = (0, 0, 1)</span>
<span class="sd">            return (dot_product(plane_x , diff), dot_product(plane_y, diff))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_polygons&#39;</span><span class="p">,</span> <span class="s1">&#39;_are_doors&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">polygons</span><span class="p">,</span> <span class="n">are_doors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize DetailedWindows.&quot;&quot;&quot;</span>
        <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add the user_data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">polygons</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">Polygon2D</span><span class="p">),</span> \
                <span class="s1">&#39;Expected Polygon2D for window polygon. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">polygon</span><span class="p">))</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> \
            <span class="s1">&#39;There must be at least one polygon to use DetailedWindows.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="n">polygons</span>
        <span class="k">if</span> <span class="n">are_doors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">are_doors</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">are_doors</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">are_doors</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">is_dr</span> <span class="ow">in</span> <span class="n">are_doors</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">is_dr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">),</span> <span class="s1">&#39;Expected booleans for &#39;</span> \
                    <span class="s1">&#39;DetailedWindow.are_doors. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">is_dr</span><span class="p">))</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">are_doors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">),</span> \
                <span class="s1">&#39;Length of DetailedWindow.are_doors (</span><span class="si">{}</span><span class="s1">) does not match the length &#39;</span> \
                <span class="s1">&#39;of DetailedWindow.polygons (</span><span class="si">{}</span><span class="s1">).&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">are_doors</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="n">are_doors</span>

<div class="viewcode-block" id="DetailedWindows.from_face3ds">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_face3ds">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_face3ds</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">face3ds</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">are_doors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create DetailedWindows from Face3Ds and a segment they are assigned to.</span>

<span class="sd">        Args:</span>
<span class="sd">            face3ds: A list of Face3D objects for the detailed windows.</span>
<span class="sd">            segment: A LineSegment3D that sets the plane in which 3D vertices</span>
<span class="sd">                are located.</span>
<span class="sd">            are_doors: An array of booleans that align with the face3ds and note whether</span>
<span class="sd">                each of the polygons represents a door (True) or a window (False).</span>
<span class="sd">                If None, it will be assumed that all polygons represent windows and</span>
<span class="sd">                they will be translated to Apertures in any resulting Honeybee</span>
<span class="sd">                model. (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">segment</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">pt3d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pt</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">face</span><span class="o">.</span><span class="n">vertices</span><span class="p">)</span> <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">face3ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">plane</span><span class="o">.</span><span class="n">xyz_to_xy</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">))</span>
                  <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">pt3d</span><span class="p">),</span>
            <span class="n">are_doors</span>
        <span class="p">)</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">polygons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an array of Polygon2Ds with one polygon for each window.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">are_doors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an array of booleans that note whether each polygon is a door.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span>

<div class="viewcode-block" id="DetailedWindows.is_flipped_equivalent">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_flipped_equivalent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_flipped_equivalent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if this WindowParameter is equal to another when flipped.</span>

<span class="sd">        This is useful to know if the window parameters will be valid when translated</span>
<span class="sd">        to Honeybee when they are adjacent to the other.</span>

<span class="sd">        Args:</span>
<span class="sd">            other: Another WindowParameter object for which flipped equivalency</span>
<span class="sd">                will be tested.</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># first check some fundamental things</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DetailedWindows</span><span class="p">)</span> <span class="ow">or</span> \
                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_polygons</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># then, check that the polygons actually match</span>
        <span class="n">other_flip</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
        <span class="n">found_adjacencies</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">poly_1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">poly_2</span> <span class="ow">in</span> <span class="n">other_flip</span><span class="o">.</span><span class="n">_polygons</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">poly_1</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">poly_2</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">found_adjacencies</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span> <span class="o">==</span> <span class="n">found_adjacencies</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="DetailedWindows.area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the sub-face area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        This includes both Apertures and Doors.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">area</span> <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.aperture_area_from_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.aperture_area_from_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">aperture_area_from_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Aperture area generated by these parameters from a LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">area</span> <span class="k">for</span> <span class="n">poly</span><span class="p">,</span> <span class="n">isd</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
                   <span class="k">if</span> <span class="ow">not</span> <span class="n">isd</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.overlapping_geometries">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.overlapping_geometries">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">overlapping_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Face3D representing window/door geometries that are overlapping.</span>

<span class="sd">        This is used to create helper_geometry for the case of invalid</span>
<span class="sd">        window parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            tolerance: The minimum distance that two polygons must overlap in order</span>
<span class="sd">                for them to be considered overlapping and invalid. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Face3D representing overlapping window/door geometries. This</span>
<span class="sd">            list will be empty if none of the geometries overlap.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># group the polygons according to their overlaps</span>
        <span class="n">grouped_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">group_by_overlap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># build Face3D any polygons that overlap</span>
        <span class="n">up_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">wall_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">up_vec</span><span class="p">),</span> <span class="n">o</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">overlap_geos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poly_group</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly_group</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">poly_group</span><span class="p">:</span>
                    <span class="n">pt3d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">wall_plane</span><span class="o">.</span><span class="n">xy_to_xyz</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">)</span>
                    <span class="n">overlap_geos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Face3D</span><span class="p">(</span><span class="n">pt3d</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">overlap_geos</span></div>


<div class="viewcode-block" id="DetailedWindows.self_intersecting_geometries">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.self_intersecting_geometries">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">self_intersecting_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Face3D representing window/door geometries that are self-intersecting.</span>

<span class="sd">        This is used to create helper_geometry for the case of invalid</span>
<span class="sd">        window parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            tolerance: The minimum distance between a vertex coordinates where</span>
<span class="sd">                they are considered equivalent. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Face3D representing self-intersecting window/door geometries.</span>
<span class="sd">            This list will be empty if none of the geometries overlap.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># build Face3D any polygons that self-intersect</span>
        <span class="n">up_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">wall_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">up_vec</span><span class="p">),</span> <span class="n">o</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">int_geos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                <span class="n">new_geo</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">new_geo</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                    <span class="n">pt3d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">wall_plane</span><span class="o">.</span><span class="n">xy_to_xyz</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">)</span>
                    <span class="n">int_geos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Face3D</span><span class="p">(</span><span class="n">pt3d</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">int_geos</span></div>


<div class="viewcode-block" id="DetailedWindows.check_window_overlaps">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_window_overlaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_window_overlaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether any polygons overlap with one another.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance that two polygons must overlap in order</span>
<span class="sd">                for them to be considered overlapping and invalid. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message. Will be an empty string if valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># group the polygons according to their overlaps</span>
        <span class="n">grouped_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">group_by_overlap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># report any polygons that overlap</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">):</span>
            <span class="n">base_msg</span> <span class="o">=</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1"> windows overlap one another)&#39;</span>
            <span class="n">all_msg</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p_group</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_group</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">all_msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base_msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_group</span><span class="p">)))</span>
            <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="DetailedWindows.check_self_intersecting">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_self_intersecting">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_self_intersecting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether any polygons in these window parameters are self intersecting.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between a vertex coordinates where</span>
<span class="sd">                they are considered equivalent. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message. Will be an empty string if valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_int_i</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">polygon</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                <span class="n">new_geo</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">new_geo</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                    <span class="n">self_int_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">self_int_i</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Window polygons with the following indices are &#39;</span> \
                <span class="s1">&#39;self-intersecting: (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">self_int_i</span><span class="p">))</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="DetailedWindows.check_valid_for_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_valid_for_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_valid_for_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that these window parameters are valid for a given LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message. Will be an empty string if valid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># first check that the total window area isn&#39;t larger than the wall</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">total_area</span> <span class="o">=</span> <span class="n">max_width</span> <span class="o">*</span> <span class="n">floor_to_ceiling_height</span>
        <span class="n">win_area</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_from_segment</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">win_area</span> <span class="o">&gt;=</span> <span class="n">total_area</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;Total area of windows [</span><span class="si">{}</span><span class="s1">] is greater than the area of the &#39;</span> \
                <span class="s1">&#39;parent wall [</span><span class="si">{}</span><span class="s1">].&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">win_area</span><span class="p">,</span> <span class="n">total_area</span><span class="p">)</span>
        <span class="c1"># next, check to be sure that no window is out of the wall boundary</span>
        <span class="n">msg_template</span> <span class="o">=</span> <span class="s1">&#39;Vertex 2D </span><span class="si">{}</span><span class="s1"> coordinate [</span><span class="si">{}</span><span class="s1">] is outside the range allowed &#39;</span> \
            <span class="s1">&#39;by the parent wall segment.&#39;</span>
        <span class="k">for</span> <span class="n">p_gon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">p_gon</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">p_gon</span><span class="o">.</span><span class="n">max</span>
            <span class="k">if</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">floor_to_ceiling_height</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">msg_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="DetailedWindows.adjust_for_segment">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.adjust_for_segment">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_for_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                           <span class="n">sliver_tolerance</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get these parameters with vertices excluded beyond the domain of a given line.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">            sliver_tolerance: A number to be used for the tolerance at which sliver</span>
<span class="sd">                polygons should be removed if they are created during the adjustment</span>
<span class="sd">                process. If None, the tolerance will be used. (Default: None).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new DetailedWindows object that fits entirely in the domain of the</span>
<span class="sd">            input line segment and floor_to_ceiling_height.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># compute the maximum width and height</span>
        <span class="n">seg_len</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
        <span class="n">double_tol</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tolerance</span>
        <span class="k">if</span> <span class="n">seg_len</span> <span class="o">-</span> <span class="n">double_tol</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="n">double_tol</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">seg_len</span> <span class="o">-</span> <span class="n">tolerance</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">floor_to_ceiling_height</span> <span class="o">-</span> <span class="n">tolerance</span>

        <span class="c1"># loop through the vertices and adjust them</span>
        <span class="n">sliver_tol</span> <span class="o">=</span> <span class="n">sliver_tolerance</span> <span class="k">if</span> <span class="n">sliver_tolerance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">tolerance</span>
        <span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_are_doors</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">p_gon</span><span class="p">,</span> <span class="n">is_dr</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)):</span>
            <span class="n">new_verts</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">vert</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="p">:</span>
                <span class="n">x_val</span><span class="p">,</span> <span class="n">y_val</span> <span class="o">=</span> <span class="n">vert</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">vert</span><span class="o">.</span><span class="n">y</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">x_val</span> <span class="o">=</span> <span class="n">tolerance</span>
                <span class="k">if</span> <span class="n">y_val</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">y_val</span> <span class="o">=</span> <span class="n">tolerance</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>
                    <span class="n">x_val</span> <span class="o">=</span> <span class="n">max_width</span>
                <span class="k">if</span> <span class="n">y_val</span> <span class="o">&gt;=</span> <span class="n">max_height</span><span class="p">:</span>
                    <span class="n">y_val</span> <span class="o">=</span> <span class="n">max_height</span>
                <span class="n">new_verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span><span class="p">,</span> <span class="n">y_val</span><span class="p">))</span>
            <span class="n">new_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_verts</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">new_poly</span><span class="o">.</span><span class="n">area</span> <span class="o">&gt;</span> <span class="n">sliver_tol</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_poly</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">))</span>
                    <span class="n">new_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                    <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># evaluated to an invalid geometry</span>
                    <span class="k">continue</span>

        <span class="c1"># return the final window parameters</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_are_doors</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="n">new_w_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="DetailedWindows.remove_doors">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_doors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_doors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these window parameters with all doors removed.&quot;&quot;&quot;</span>
        <span class="n">new_polygons</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">is_dr</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">is_dr</span><span class="p">:</span>
                <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
                <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># return the final window parameters</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="n">new_w_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="DetailedWindows.shift_vertically">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_vertically">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shift_vertically</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shift_distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shift these WindowParameters up or down in the wall plane.</span>

<span class="sd">        This is useful when the windows are assigned to a Room2D that is</span>
<span class="sd">        vertically split and new windows need to be assigned to new Room2Ds.</span>

<span class="sd">        Args:</span>
<span class="sd">            shift_distance: A number for the distance that the window parameters</span>
<span class="sd">                will be shifted. Positive values will shift the windows upwards</span>
<span class="sd">                in the wall plane and negative values will shift the windows downwards.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the new window polygons</span>
        <span class="n">new_polygons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">new_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">shift_distance</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">)</span>
            <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_poly</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="DetailedWindows.shift_horizontally">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_horizontally">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shift_horizontally</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shift_distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shift these WindowParameters left or right in the wall plane.</span>

<span class="sd">        This is useful when the length of the segment that the windows are assigned</span>
<span class="sd">        to has changed a lot from the original value such that the windows should</span>
<span class="sd">        be re-centered.</span>

<span class="sd">        Args:</span>
<span class="sd">            shift_distance: A number for the distance that the window parameters</span>
<span class="sd">                will be shifted. Positive values will shift the windows to the</span>
<span class="sd">                right in the wall plane and negative values will shift the windows</span>
<span class="sd">                to the left.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the new window polygons</span>
        <span class="n">new_polygons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">new_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">shift_distance</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">)</span>
            <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_poly</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="DetailedWindows.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these WindowParameters as RectangularWindows.</span>

<span class="sd">        This will simply translate each window polygon to its own rectangular</span>
<span class="sd">        window. For merging windows that touch or overlap one another into</span>
<span class="sd">        rectangles, the merge_to_bounding_rectangle method should be used</span>
<span class="sd">        before using this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            segment: A LineSegment3D to which these parameters are applied.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">max</span>
            <span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">min_pt</span><span class="p">)</span>
            <span class="n">widths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="n">heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">RectangularWindows</span><span class="p">(</span><span class="n">origins</span><span class="p">,</span> <span class="n">widths</span><span class="p">,</span> <span class="n">heights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="DetailedWindows.add_window_to_face">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.add_window_to_face">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_window_to_face</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add Apertures to a Honeybee Face using these Window Parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            face: A honeybee-core Face object.</span>
<span class="sd">            tolerance: Optional tolerance value. Default: 0.01, suitable for</span>
<span class="sd">                objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the plane of the parent wall</span>
        <span class="n">fg</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span>
        <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">fg</span><span class="o">.</span><span class="n">lower_left_corner</span><span class="p">,</span> <span class="n">fg</span><span class="o">.</span><span class="n">upper_right_corner</span>
        <span class="n">width_seg</span> <span class="o">=</span> <span class="n">LineSegment3D</span><span class="o">.</span><span class="n">from_end_points</span><span class="p">(</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">Point3D</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>
        <span class="n">wall_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">plane</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">o</span><span class="o">=</span><span class="n">min_pt</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">width_seg</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">width_seg</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">tolerance</span>

        <span class="c1"># automatically clip any geometries outside of the face so they are bounded by it</span>
        <span class="n">clean_polygons</span><span class="p">,</span> <span class="n">clean_are_doors</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">p_gon</span><span class="p">,</span> <span class="n">is_dr</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)):</span>
            <span class="n">new_verts</span><span class="p">,</span> <span class="n">verts_moved</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">vert</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="p">:</span>
                <span class="n">x_val</span><span class="p">,</span> <span class="n">y_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">vert</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">vert</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">tolerance</span><span class="p">,</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">y_val</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">y_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">tolerance</span><span class="p">,</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>
                    <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">max_width</span><span class="p">,</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">y_val</span> <span class="o">&gt;=</span> <span class="n">max_height</span><span class="p">:</span>
                    <span class="n">y_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">max_height</span><span class="p">,</span> <span class="kc">True</span>
                <span class="n">new_verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span><span class="p">,</span> <span class="n">y_val</span><span class="p">))</span>
                <span class="n">verts_moved</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v_moved</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">verts_moved</span><span class="p">):</span>  <span class="c1"># original polygon was definitely in the face</span>
                <span class="n">clean_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_verts</span><span class="p">)</span>
                <span class="n">clean_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># check that the polygon wasn&#39;t 100% glazing</span>
                <span class="n">tol2</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tolerance</span>
                <span class="k">if</span> <span class="n">max_height</span> <span class="o">&gt;</span> <span class="n">tol2</span> <span class="ow">and</span> <span class="n">max_width</span> <span class="o">&gt;</span> <span class="n">tol2</span><span class="p">:</span>
                    <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">p_gon</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">p_gon</span><span class="o">.</span><span class="n">max</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">tolerance</span> <span class="ow">or</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">tolerance</span> <span class="ow">or</span>
                            <span class="n">min_pt</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">max_width</span> <span class="ow">or</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">max_height</span><span class="p">):</span>
                        <span class="n">clean_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_verts</span><span class="p">)</span>
                        <span class="n">clean_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                        <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">clean_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>

        <span class="c1"># loop through each window and create its geometry</span>
        <span class="n">sub_faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">isd</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">clean_polygons</span><span class="p">,</span> <span class="n">clean_are_doors</span><span class="p">)):</span>
            <span class="n">pt3d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">wall_plane</span><span class="o">.</span><span class="n">xy_to_xyz</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">)</span>
            <span class="n">s_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="p">(</span><span class="n">pt3d</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">isd</span><span class="p">:</span>
                <span class="n">sub_f</span> <span class="o">=</span> <span class="n">Door</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Door</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">s_geo</span><span class="p">)</span>
                <span class="n">face</span><span class="o">.</span><span class="n">add_door</span><span class="p">(</span><span class="n">sub_f</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sub_f</span> <span class="o">=</span> <span class="n">Aperture</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Glz</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">s_geo</span><span class="p">)</span>
                <span class="n">face</span><span class="o">.</span><span class="n">add_aperture</span><span class="p">(</span><span class="n">sub_f</span><span class="p">)</span>
            <span class="n">sub_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_f</span><span class="p">)</span>
            <span class="c1"># if the Aperture is interior, set adjacent boundary condition</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">_boundary_condition</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                <span class="n">sf_type</span> <span class="o">=</span> <span class="s1">&#39;Door&#39;</span> <span class="k">if</span> <span class="n">isd</span> <span class="k">else</span> <span class="s1">&#39;Glz&#39;</span>
                <span class="n">adj_sf_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sf_type</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">final_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">adj_sf_id</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ids</span>
                <span class="n">sub_f</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span><span class="n">final_ids</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_apply_user_data_to_honeybee</span><span class="p">(</span><span class="n">sub_faces</span><span class="p">,</span> <span class="n">clean_u</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.scale">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a scaled version of these WindowParameters.</span>

<span class="sd">        This method is called within the scale methods of the Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="n">polygon</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">)</span> <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="DetailedWindows.flip">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.flip">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">flip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seg_length</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Flip the direction of the windows along a segment.</span>

<span class="sd">        This is needed since windows can exist asymmetrically across the wall</span>
<span class="sd">        segment and operations like reflecting the Room2D across a plane will</span>
<span class="sd">        require the window parameters to be flipped to remain in the same place.</span>

<span class="sd">        Args:</span>
<span class="sd">            seg_length: The length of the segment along which the parameters are</span>
<span class="sd">                being flipped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set values derived from the property of the segment</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">Vector2D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">seg_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># loop through the polygons and reflect them across the mid plane of the wall</span>
        <span class="n">new_polygons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">new_verts</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">vertices</span><span class="p">)</span>
            <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">new_verts</span><span class="p">))))</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span></div>


<div class="viewcode-block" id="DetailedWindows.rectangularize">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.rectangularize">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rectangularize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percent_area_change_threshold</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert window polygons to rectangles.</span>

<span class="sd">        Note that rectangular conversion is done simply by taking the bounding</span>
<span class="sd">        rectangle around each polygon. If this bounding rectangle representation</span>
<span class="sd">        changes the area by more than the percent_area_change_threshold, it will</span>
<span class="sd">        not be converted to a rectangle.</span>

<span class="sd">        Args:</span>
<span class="sd">            percent_area_change_threshold: A positive number for the maximum permitted</span>
<span class="sd">                change in area that is allowed by the operation. For example, setting</span>
<span class="sd">                it to 100 will allow windows to double in size by this operation.</span>
<span class="sd">                Set to None to have all windows rectangularized no matter the</span>
<span class="sd">                change in area that this causes. (Default: None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fract_change</span> <span class="o">=</span> <span class="n">percent_area_change_threshold</span> <span class="o">/</span> <span class="mi">100</span> \
            <span class="k">if</span> <span class="n">percent_area_change_threshold</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">new_polygons</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
            <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">poly</span><span class="o">.</span><span class="n">max</span>
            <span class="n">pts</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_pt</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                   <span class="n">max_pt</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
            <span class="n">new_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">fract_change</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> \
                    <span class="n">new_poly</span><span class="o">.</span><span class="n">area</span> <span class="o">-</span> <span class="n">poly</span><span class="o">.</span><span class="n">area</span> <span class="o">&lt;=</span> <span class="n">poly</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="n">fract_change</span><span class="p">:</span>
                <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_poly</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.offset">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.offset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Offset the edges of all polygons by a certain distance.</span>

<span class="sd">        This is useful for translating between interfaces that expect the window</span>
<span class="sd">        frame to be included within or excluded from the geometry.</span>

<span class="sd">        Note that this operation can often create polygons that collide with</span>
<span class="sd">        one another or extend past the parent Face. So it may be desirable</span>
<span class="sd">        to run the union_overlaps method after using this one.</span>

<span class="sd">        Args:</span>
<span class="sd">            offset_distance: Distance with which the edges of each polygon will</span>
<span class="sd">                be offset from the original geometry. Positive values will</span>
<span class="sd">                offset the geometry outwards and negative values will offset the</span>
<span class="sd">                geometries inwards.</span>
<span class="sd">            tolerance: The minimum difference between point values for them to be</span>
<span class="sd">                considered the distinct. (Default: 0.01, suitable for objects</span>
<span class="sd">                in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">offset_polys</span><span class="p">,</span> <span class="n">offset_are_doors</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">polygon</span><span class="p">,</span> <span class="n">isd</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">poly</span> <span class="o">=</span> <span class="n">polygon</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">off_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="o">-</span><span class="n">offset_distance</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">off_poly</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                    <span class="n">offset_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">off_poly</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># polygon became self-intersecting after offset</span>
                    <span class="n">offset_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
                <span class="n">offset_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">isd</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># degenerate window to ignore</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">offset_polys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">offset_are_doors</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.make_flush">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.make_flush">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_flush</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_distance</span><span class="p">,</span> <span class="n">offset_boundary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make the edges of window geometry flush if they lie within the frame_distance.</span>

<span class="sd">        This is useful for translating between interfaces that expect the window</span>
<span class="sd">        frame to be included within from the geometry.</span>

<span class="sd">        Args:</span>
<span class="sd">            frame_distance: Distance with which the edges of each window will</span>
<span class="sd">                be moved in order to make them flush with neighboring windows.</span>
<span class="sd">            offset_boundary: Boolean to note whether the outer boundary of window</span>
<span class="sd">                groups that have been made flush with one another should be offset</span>
<span class="sd">                after all windows within the group have been made flush (True)</span>
<span class="sd">                or the boundary around the group should be left unchanged (False).</span>
<span class="sd">                Set to True when the intended result is more like an offset of</span>
<span class="sd">                window geometries to account for the frame rather than just making</span>
<span class="sd">                the windows flush. (Default: True).</span>
<span class="sd">            tolerance: The minimum difference between point values for them to be</span>
<span class="sd">                considered the distinct. (Default: 0.01, suitable for objects</span>
<span class="sd">                in meters).</span>
<span class="sd">            angle_tolerance: The max angle difference in degrees that a window</span>
<span class="sd">                segment direction can differ from the X or Y axis before it is</span>
<span class="sd">                excluded from being made flush. (Default: 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># process the inputs used throughout the calculation</span>
        <span class="n">touch_dist</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">frame_distance</span>
        <span class="n">min_distance</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">frame_distance</span>
        <span class="n">merge_distance</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">frame_distance</span>
        <span class="n">a_tol</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle_tolerance</span><span class="p">)</span>
        <span class="n">x_axis</span><span class="p">,</span> <span class="n">y_axis</span> <span class="o">=</span> <span class="n">Vector2D</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Vector2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># first group the windows together if they lie within 2 times frame_distance</span>
        <span class="n">grouped_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">group_by_touching</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="n">touch_dist</span><span class="p">)</span>
        <span class="n">grouped_are_doors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pg_grp</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">p_gon1</span> <span class="ow">in</span> <span class="n">pg_grp</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">p_gon2</span><span class="p">,</span> <span class="n">isd</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">p_gon1</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">is_equivalent</span><span class="p">(</span><span class="n">p_gon2</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
                        <span class="n">grouped_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">isd</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">grouped_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># for each window group, generate axes for aligning them flush</span>
        <span class="n">flush_polys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ply_grp</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">:</span>
            <span class="c1"># if the group has only one window, use the fast method</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">offset_boundary</span><span class="p">:</span>
                    <span class="n">ply_grp</span> <span class="o">=</span> <span class="p">[</span><span class="n">ply_grp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="o">-</span><span class="n">frame_distance</span><span class="p">)]</span>
                <span class="n">flush_polys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># get the common X and Y axes</span>
            <span class="n">y_axes</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">common_axes</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">,</span> <span class="n">y_axis</span><span class="p">,</span> <span class="n">min_distance</span><span class="p">,</span>
                                              <span class="n">merge_distance</span><span class="p">,</span> <span class="n">a_tol</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">x_axes</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">common_axes</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">,</span> <span class="n">x_axis</span><span class="p">,</span> <span class="n">min_distance</span><span class="p">,</span>
                                              <span class="n">merge_distance</span><span class="p">,</span> <span class="n">a_tol</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="c1"># pull the window polygons to the X and Y axes</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">poly</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">):</span>
                <span class="n">ply_grp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pull_to_segments</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">y_axes</span><span class="p">,</span> <span class="n">touch_dist</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">poly</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">):</span>
                <span class="n">ply_grp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pull_to_segments</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">x_axes</span><span class="p">,</span> <span class="n">touch_dist</span><span class="p">)</span>

            <span class="c1"># offset the outer boundary of the group if requested</span>
            <span class="k">if</span> <span class="n">offset_boundary</span><span class="p">:</span>
                <span class="c1"># set up variables to be used to group segments</span>
                <span class="n">n_vec</span> <span class="o">=</span> <span class="n">Vector2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">a_tol</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># tolerance for evaluating parallel lines</span>
                <span class="c1"># get the boundary around the group and offset it</span>
                <span class="n">grp_bounds</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">joined_intersected_boundary</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">pull_segs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">bnd</span> <span class="ow">in</span> <span class="n">grp_bounds</span><span class="p">:</span>
                    <span class="n">bnd</span> <span class="o">=</span> <span class="n">bnd</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">bnd</span> <span class="o">=</span> <span class="n">bnd</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="o">-</span><span class="n">frame_distance</span><span class="p">)</span>
                    <span class="n">pull_segs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">bnd</span><span class="o">.</span><span class="n">segments</span><span class="p">)</span>
                <span class="c1"># group the lines base on whether they are parallel to one another</span>
                <span class="n">grouped_lines</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">lin</span> <span class="ow">in</span> <span class="n">pull_segs</span><span class="p">:</span>
                    <span class="n">azimuth</span> <span class="o">=</span> <span class="n">n_vec</span><span class="o">.</span><span class="n">angle_clockwise</span><span class="p">(</span><span class="n">lin</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">azimuth</span> <span class="o">&gt;=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">a_tol</span><span class="p">:</span>
                        <span class="n">azimuth</span> <span class="o">=</span> <span class="n">azimuth</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">grouped_lines</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="o">-</span> <span class="n">a_tol</span> <span class="o">&lt;</span> <span class="n">azimuth</span> <span class="o">&lt;</span> <span class="n">key</span> <span class="o">+</span> <span class="n">a_tol</span><span class="p">:</span>
                            <span class="n">grouped_lines</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lin</span><span class="p">)</span>
                            <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">grouped_lines</span><span class="p">[</span><span class="n">azimuth</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">lin</span><span class="p">]</span>
                <span class="n">pull_segs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">grouped_lines</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="c1"># pull the window polygons to the X and Y axes</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">)):</span>
                    <span class="k">for</span> <span class="n">seg_grp</span> <span class="ow">in</span> <span class="n">pull_segs</span><span class="p">:</span>
                        <span class="n">ply_grp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pull_to_segments</span><span class="p">(</span>
                            <span class="n">ply_grp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">seg_grp</span><span class="p">,</span> <span class="n">touch_dist</span><span class="p">)</span>
            <span class="c1"># add the group to all of the flush polygons</span>
            <span class="n">flush_polys</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ply_grp</span><span class="p">)</span>

        <span class="c1"># remove any degenerate polygons created in the process</span>
        <span class="n">i_to_remove</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">poly</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">flush_polys</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">poly</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">AssertionError</span><span class="p">):</span>
                <span class="n">i_to_remove</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">i_to_remove</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">flush_polys</span><span class="p">))</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">i_to_remove</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                    <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="n">clean_u</span>

        <span class="c1"># set the attributes of the object to the new cleaned polygons</span>
        <span class="k">for</span> <span class="n">del_i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">i_to_remove</span><span class="p">):</span>
            <span class="n">flush_polys</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">del_i</span><span class="p">)</span>
            <span class="n">grouped_are_doors</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">del_i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">flush_polys</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">grouped_are_doors</span><span class="p">)</span></div>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_pull_to_segments</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">line_segments</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Pull a Polygon2D to a list of LineSegment2Ds.&quot;&quot;&quot;</span>
        <span class="n">new_vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span>
            <span class="n">dists</span><span class="p">,</span> <span class="n">c_pts</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">line_segments</span><span class="p">:</span>
                <span class="n">close_pt</span> <span class="o">=</span> <span class="n">closest_point2d_on_line2d</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="n">c_pts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">close_pt</span><span class="p">)</span>
                <span class="n">dists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">close_pt</span><span class="p">))</span>
            <span class="n">sort_pt</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="n">c_pts</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">sort_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">distance</span><span class="p">:</span>
                <span class="n">new_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sort_pt</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_vertices</span><span class="p">)</span>

<div class="viewcode-block" id="DetailedWindows.union_overlaps">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.union_overlaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">union_overlaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Union any window polygons that overlap with one another.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance that two polygons must overlap in order</span>
<span class="sd">                for them to be considered overlapping. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># group the polygons by their overlap</span>
        <span class="n">grouped_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">group_by_overlap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># union any of the polygons that overlap</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">):</span>
            <span class="n">new_polys</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p_group</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_group</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">new_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_group</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">union_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">boolean_union_all</span><span class="p">(</span><span class="n">p_group</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">new_poly</span> <span class="ow">in</span> <span class="n">union_poly</span><span class="p">:</span>
                        <span class="n">new_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_poly</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reassign_are_doors</span><span class="p">(</span><span class="n">new_polys</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_polys</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.merge_and_simplify">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_and_simplify">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge_and_simplify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_separation</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge window polygons that are close to one another into a single polygon.</span>

<span class="sd">        This can be used to create a simpler set of windows that is easier to</span>
<span class="sd">        edit and is in the same location as the original windows.</span>

<span class="sd">        Args:</span>
<span class="sd">            max_separation: A number for the maximum distance between window polygons</span>
<span class="sd">                at which point they will be merged into a single geometry. Typically,</span>
<span class="sd">                this max_separation should be set to a value that is slightly larger</span>
<span class="sd">                than the window frame. Setting this equal to the tolerance will</span>
<span class="sd">                simply join neighboring windows together.</span>
<span class="sd">            tolerance: The maximum difference between point values for them to be</span>
<span class="sd">                considered distinct. (Default: 0.01, suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># gather a clean version of the polygons with colinear vertices removed</span>
        <span class="n">clean_polys</span><span class="p">,</span> <span class="n">door_polys</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poly</span><span class="p">,</span> <span class="n">is_dr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">c_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">is_dr</span><span class="p">:</span>
                    <span class="n">door_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_poly</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">clean_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_poly</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># degenerate geometry to ignore</span>
                <span class="k">pass</span>

        <span class="c1"># join the polygons together</span>
        <span class="k">if</span> <span class="n">max_separation</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">new_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">joined_intersected_boundary</span><span class="p">(</span><span class="n">clean_polys</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">gap_crossing_boundary</span><span class="p">(</span>
                <span class="n">clean_polys</span><span class="p">,</span> <span class="n">max_separation</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="n">is_self_intersect</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">new_polys</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                    <span class="n">is_self_intersect</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">is_self_intersect</span><span class="p">:</span>  <span class="c1"># we hit the frame distance exactly in float tolerance</span>
                <span class="n">max_separation</span> <span class="o">=</span> <span class="n">max_separation</span> <span class="o">-</span> <span class="n">tolerance</span>
                <span class="k">if</span> <span class="n">max_separation</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">new_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">joined_intersected_boundary</span><span class="p">(</span>
                        <span class="n">clean_polys</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">gap_crossing_boundary</span><span class="p">(</span>
                        <span class="n">clean_polys</span><span class="p">,</span> <span class="n">max_separation</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">is_self_intersect</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">new_polys</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">is_self_intersecting</span><span class="p">:</span>
                        <span class="n">is_self_intersect</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">is_self_intersect</span><span class="p">:</span>
                    <span class="n">new_polys</span> <span class="o">=</span> <span class="n">clean_polys</span>

        <span class="c1"># bring everything together and reassign the door property</span>
        <span class="n">new_polys</span> <span class="o">=</span> <span class="n">new_polys</span> <span class="o">+</span> <span class="n">door_polys</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reassign_are_doors</span><span class="p">(</span><span class="n">new_polys</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_polys</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.merge_to_bounding_rectangle">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_bounding_rectangle">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge_to_bounding_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge window polygons that touch or overlap with one another to a rectangle.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance from the edge of a neighboring polygon</span>
<span class="sd">                at which a point is considered to touch that polygon. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># group the polygons by their overlap</span>
        <span class="n">grouped_polys</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">group_by_touching</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># union any of the polygons that overlap</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">):</span>
            <span class="n">new_polys</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p_group</span> <span class="ow">in</span> <span class="n">grouped_polys</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_group</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">new_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_group</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">min_pt</span><span class="p">,</span> <span class="n">max_pt</span> <span class="o">=</span> <span class="n">bounding_rectangle</span><span class="p">(</span><span class="n">p_group</span><span class="p">)</span>
                    <span class="n">rect_verts</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">min_pt</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                        <span class="n">max_pt</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                    <span class="n">rect_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="n">rect_verts</span><span class="p">)</span>
                    <span class="n">new_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rect_poly</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_reassign_are_doors</span><span class="p">(</span><span class="n">new_polys</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_polys</span><span class="p">)</span></div>


<div class="viewcode-block" id="DetailedWindows.remove_small_windows">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_small_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_small_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area_threshold</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a version of these window parameters with small geometries removed.</span>

<span class="sd">        Args:</span>
<span class="sd">            area_threshold: A number for the area below which a window polygon</span>
<span class="sd">                will be removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># evaluate the area of each polygon</span>
        <span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_are_doors</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">is_dr</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">area</span> <span class="o">&gt;</span> <span class="n">area_threshold</span><span class="p">:</span>
                <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
                <span class="n">new_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="c1"># return the final window parameters</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_are_doors</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="n">new_w_par</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="DetailedWindows.split">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.split">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split DetailedWindows parameters across a list of ordered segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            segments: The segments to which the window parameters are being</span>
<span class="sd">                split across. These should be in order as they appear on the</span>
<span class="sd">                parent Room2D.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_win_pars</span><span class="p">,</span> <span class="n">win_par_is</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">rel_polygons</span><span class="p">,</span> <span class="n">rel_dr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span>
        <span class="n">rel_i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
            <span class="c1"># loop through the vertices and adjust them to the max width</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span>
            <span class="n">win_par_i</span><span class="p">,</span> <span class="n">out_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_dr</span><span class="p">,</span> <span class="n">out_polygons</span><span class="p">,</span> <span class="n">out_dr</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p_gon</span><span class="p">,</span> <span class="n">is_dr</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rel_polygons</span><span class="p">,</span> <span class="n">rel_dr</span><span class="p">,</span> <span class="n">rel_i</span><span class="p">):</span>
                <span class="n">new_verts</span><span class="p">,</span> <span class="n">verts_moved</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">vert</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="p">:</span>
                    <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">vert</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">x_val</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                        <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">tolerance</span><span class="p">,</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">x_val</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>
                        <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">max_width</span><span class="p">,</span> <span class="kc">True</span>
                    <span class="n">new_verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span><span class="p">,</span> <span class="n">vert</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                    <span class="n">verts_moved</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v_moved</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">verts_moved</span><span class="p">):</span>
                    <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_verts</span><span class="p">))</span>
                    <span class="n">win_par_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="n">new_dr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                    <span class="k">if</span> <span class="kc">True</span> <span class="ow">in</span> <span class="n">verts_moved</span><span class="p">:</span>  <span class="c1"># outside of the segment</span>
                        <span class="n">out_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_gon</span><span class="p">)</span>
                        <span class="n">out_dr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                        <span class="n">out_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">out_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_gon</span><span class="p">)</span>
                    <span class="n">out_dr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                    <span class="n">out_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="c1"># build the final window parameters from the adjusted polygons</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">new_win_pars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_dr</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_win_pars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">win_par_is</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">win_par_i</span><span class="p">)</span>
            <span class="c1"># shift all polygons to be relevant for the next segment</span>
            <span class="n">shift_dist</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">length</span>
            <span class="n">rel_polygons</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p_gon</span> <span class="ow">in</span> <span class="n">out_polygons</span><span class="p">:</span>
                <span class="n">new_v</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point2D</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">shift_dist</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="p">]</span>
                <span class="n">rel_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_v</span><span class="p">))</span>
            <span class="n">rel_dr</span> <span class="o">=</span> <span class="n">out_dr</span>
            <span class="n">rel_i</span> <span class="o">=</span> <span class="n">out_i</span>

        <span class="c1"># apply the user_data to the split window parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_split_user_data</span><span class="p">(</span><span class="n">new_win_pars</span><span class="p">,</span> <span class="n">win_par_is</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_win_pars</span></div>


<div class="viewcode-block" id="DetailedWindows.trim">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.trim">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_segment</span><span class="p">,</span> <span class="n">sub_segment</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trim DetailedWindows for a sub segment given the original segment.</span>

<span class="sd">        Args:</span>
<span class="sd">            original_segment: The original LineSegment3D to which the window</span>
<span class="sd">                parameters are assigned.</span>
<span class="sd">            sub_segment: A LineSegment3D that is a sub-segment of the original_segment,</span>
<span class="sd">                which will be used to trim the window parameters to fit this segment.</span>
<span class="sd">                Note that this sub_segment should have the same orientation as</span>
<span class="sd">                the original segment.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># shift all polygons to be relevant for the sub segment</span>
        <span class="n">rel_polygons</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span>
        <span class="n">shift_dist</span> <span class="o">=</span> <span class="n">original_segment</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">sub_segment</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">shift_dist</span> <span class="o">&gt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="n">rel_polygons</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">p_gon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">:</span>
                <span class="n">new_v</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point2D</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">shift_dist</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="p">]</span>
                <span class="n">rel_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_v</span><span class="p">))</span>
        <span class="c1"># loop through the polygon vertices and trim them for the segment</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="n">sub_segment</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">tolerance</span>
        <span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_dr</span><span class="p">,</span> <span class="n">out_polygons</span><span class="p">,</span> <span class="n">out_dr</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">p_gon</span><span class="p">,</span> <span class="n">is_dr</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">rel_polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)):</span>
            <span class="n">new_verts</span><span class="p">,</span> <span class="n">verts_moved</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">vert</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="p">:</span>
                <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">vert</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">tolerance</span><span class="p">,</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">x_val</span> <span class="o">&gt;=</span> <span class="n">max_width</span><span class="p">:</span>
                    <span class="n">x_val</span><span class="p">,</span> <span class="n">v_moved</span> <span class="o">=</span> <span class="n">max_width</span><span class="p">,</span> <span class="kc">True</span>
                <span class="n">new_verts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">x_val</span><span class="p">,</span> <span class="n">vert</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                <span class="n">verts_moved</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v_moved</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">verts_moved</span><span class="p">):</span>
                <span class="n">new_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_verts</span><span class="p">))</span>
                <span class="n">new_dr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="kc">True</span> <span class="ow">in</span> <span class="n">verts_moved</span><span class="p">:</span>  <span class="c1"># outside of the segment</span>
                    <span class="n">out_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_gon</span><span class="p">)</span>
                    <span class="n">out_dr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_gon</span><span class="p">)</span>
                <span class="n">out_dr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
        <span class="c1"># build the final window parameters from the adjusted polygons</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">,</span> <span class="n">new_dr</span><span class="p">)</span>

        <span class="c1"># update user_data lists if some windows were not added</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">clean_u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polygons</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="DetailedWindows.merge">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge DetailedWindows parameters together using their assigned segments.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameters: A list of WindowParameters to be merged.</span>
<span class="sd">            segments: The segments to which the window parameters are assigned.</span>
<span class="sd">                These should be in order as they appear on the parent Room2D.</span>
<span class="sd">            floor_to_ceiling_height: The floor-to-ceiling height of the Room2D</span>
<span class="sd">                to which the segment belongs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">polygons</span><span class="p">,</span> <span class="n">are_doors</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">DetailedWindows</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">p_gon</span><span class="p">,</span> <span class="n">is_dr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="n">wp</span><span class="o">.</span><span class="n">are_doors</span><span class="p">):</span>
                        <span class="n">new_pts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point2D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">base_x</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">p_gon</span><span class="o">.</span><span class="n">vertices</span><span class="p">]</span>
                        <span class="n">polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="n">new_pts</span><span class="p">))</span>
                        <span class="n">are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_dr</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># not all windows are of the same type; convert all to rectangular</span>
                    <span class="k">return</span> <span class="n">_WindowParameterBase</span><span class="o">.</span><span class="n">merge_to_rectangular</span><span class="p">(</span>
                        <span class="n">window_parameters</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">floor_to_ceiling_height</span><span class="p">)</span>
            <span class="n">base_x</span> <span class="o">+=</span> <span class="n">s</span><span class="o">.</span><span class="n">length</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># all of the input window parameters were None</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="n">polygons</span><span class="p">,</span> <span class="n">are_doors</span><span class="p">)</span>
        <span class="n">new_w_par</span><span class="o">.</span><span class="n">_merge_user_data</span><span class="p">(</span><span class="n">window_parameters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="DetailedWindows.from_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create DetailedWindows from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A dictionary in the format below. The vertices of the &quot;polygons&quot;</span>
<span class="sd">                can either contain 2 values (indicating they are vertices within</span>
<span class="sd">                the plane of a parent wall segment) or they can contain 3 values</span>
<span class="sd">                (indicating they are 3D world coordinates). If 3 values are used,</span>
<span class="sd">                a segment must be specified below to convert them to the 2D format.</span>
<span class="sd">            segment: A LineSegment3D that sets the plane in which 3D vertices</span>
<span class="sd">                are located.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            {</span>
<span class="sd">            &quot;type&quot;: &quot;DetailedWindows&quot;,</span>
<span class="sd">            &quot;polygons&quot;: [((0.5, 0.5), (2, 0.5), (2, 2), (0.5, 2)),</span>
<span class="sd">                         ((3, 1), (4, 1), (4, 2))],</span>
<span class="sd">            &quot;are_doors&quot;: [False]</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;DetailedWindows&#39;</span><span class="p">,</span> \
            <span class="s1">&#39;Expected DetailedWindows dictionary. Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;polygons&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># empty object; just treat it as no windows</span>
        <span class="n">are_doors</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;are_doors&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;are_doors&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;polygons&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">Point2D</span><span class="o">.</span><span class="n">from_array</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">))</span>
                      <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;polygons&#39;</span><span class="p">]),</span>
                <span class="n">are_doors</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">segment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Segment must be specified when using 3D &#39;</span> \
                <span class="s1">&#39;vertices for DetailedWindows.&#39;</span>
            <span class="n">plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">segment</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
            <span class="n">pt3d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">Point3D</span><span class="o">.</span><span class="n">from_array</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;polygons&#39;</span><span class="p">])</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">plane</span><span class="o">.</span><span class="n">xyz_to_xy</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">))</span>
                      <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">pt3d</span><span class="p">),</span>
                <span class="n">are_doors</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_w_par</span></div>


<div class="viewcode-block" id="DetailedWindows.to_dict">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get DetailedWindows as a dictionary.&quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;DetailedWindows&#39;</span><span class="p">,</span>
            <span class="s1">&#39;polygons&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="n">pt</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">poly</span><span class="p">]</span> <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">],</span>
            <span class="s1">&#39;are_doors&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">return</span> <span class="n">base</span></div>


<div class="viewcode-block" id="DetailedWindows.is_face3d_in_segment_plane">
<a class="viewcode-back" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_face3d_in_segment_plane">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_face3d_in_segment_plane</span><span class="p">(</span>
            <span class="n">face3d</span><span class="p">,</span> <span class="n">segment</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if a given Face3D is in the plane and range of a LineSegment3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            face3d: A list of Face3D objects for the detailed windows.</span>
<span class="sd">            segment: A LineSegment3D that sets the plane in which 3D vertices</span>
<span class="sd">                are located.</span>
<span class="sd">            height: A number for the height of the wall formed by extruding the segment.</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values of two</span>
<span class="sd">                vertices at which they can be considered equivalent. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">            angle_tolerance: The max angle in degrees that the plane normals can</span>
<span class="sd">                differ from one another in order for them to be considered coplanar.</span>
<span class="sd">                Default: 1 degree.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the face3d is in the plane and range of the segment. False</span>
<span class="sd">            if it is not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">segment</span><span class="o">.</span><span class="n">p</span><span class="p">,</span> <span class="n">segment</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
        <span class="c1"># test whether the face3d is coplanar</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">plane</span><span class="o">.</span><span class="n">is_coplanar_tolerance</span><span class="p">(</span><span class="n">face3d</span><span class="o">.</span><span class="n">plane</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">seg_face</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">from_rectangle</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">plane</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">seg_face</span><span class="o">.</span><span class="n">is_sub_face</span><span class="p">(</span><span class="n">face3d</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">)</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_reassign_are_doors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_polys</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the are_doors property using a set of new polygons.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_polys</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
            <span class="c1"># match the new polygons to the existing ones</span>
            <span class="n">new_are_doors</span><span class="p">,</span> <span class="n">kept_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">n_poly</span> <span class="ow">in</span> <span class="n">new_polys</span><span class="p">:</span>
                <span class="n">np_center</span> <span class="o">=</span> <span class="n">n_poly</span><span class="o">.</span><span class="n">center</span> <span class="k">if</span> <span class="n">n_poly</span><span class="o">.</span><span class="n">is_convex</span> <span class="k">else</span> \
                    <span class="n">n_poly</span><span class="o">.</span><span class="n">pole_of_inaccessibility</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">o_poly</span><span class="p">,</span> <span class="n">is_door</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">o_poly</span><span class="o">.</span><span class="n">is_point_inside_bound_rect</span><span class="p">(</span><span class="n">np_center</span><span class="p">):</span>
                        <span class="n">new_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_door</span><span class="p">)</span>
                        <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_are_doors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                    <span class="n">kept_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_are_doors</span><span class="p">)</span>
            <span class="c1"># update user_data lists if some windows were not added</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">clean_u</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polygons</span><span class="p">):</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">kept_i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_u</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">clean_u</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_w</span> <span class="o">=</span> <span class="n">DetailedWindows</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_are_doors</span><span class="p">)</span>
        <span class="n">new_w</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_w</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A tuple based on the object properties, useful for hashing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">hash</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span> <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">are_doors</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__key</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">DetailedWindows</span><span class="p">)</span> <span class="ow">and</span> \
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_polygons</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;DetailedWindows: [</span><span class="si">{}</span><span class="s1"> windows]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polygons</span><span class="p">))</span></div>

</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2025, Ladybug Tools.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>