<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dragonfly.building &#8212; dragonfly-core  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0b9525ea" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/x-icon" href="https://github.com/ladybug-tools/artwork/raw/refs/heads/master/icons_bugs/ico/dragonfly.ico">
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          dragonfly-core</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#commands">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cli/translate.html">translate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate">dragonfly translate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-merge-models-to-honeybee">merge-models-to-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-model-to-honeybee">model-to-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-model-to-honeybee-file">model-to-honeybee-file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/validate.html">validate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate">dragonfly validate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate-model">model</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate-room-collisions">room-collisions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/create.html">create</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/create.html#dragonfly-create">dragonfly create</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-from-geojson">from-geojson</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-from-honeybee">from-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-merge-models">merge-models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/edit.html">edit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit">dragonfly edit</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-align">align</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-convert-units">convert-units</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-remove-short-segments">remove-short-segments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-reset-room-boundaries">reset-room-boundaries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-solve-adjacency">solve-adjacency</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-windows-by-ratio">windows-by-ratio</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dragonfly.html">dragonfly package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.cli.html">dragonfly.cli package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.cli.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.create.html">dragonfly.cli.create module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.from_geojson"><code class="docutils literal notranslate"><span class="pre">from_geojson()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.merge_models"><code class="docutils literal notranslate"><span class="pre">merge_models()</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.edit.html">dragonfly.cli.edit module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.translate.html">dragonfly.cli.translate module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.merge_models_to_honeybee"><code class="docutils literal notranslate"><span class="pre">merge_models_to_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.model_to_honeybee"><code class="docutils literal notranslate"><span class="pre">model_to_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.model_to_honeybee_file"><code class="docutils literal notranslate"><span class="pre">model_to_honeybee_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.validate.html">dragonfly.cli.validate module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.validate.html#dragonfly.cli.validate.validate_model"><code class="docutils literal notranslate"><span class="pre">validate_model()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.validate.html#dragonfly.cli.validate.validate_room_collisions"><code class="docutils literal notranslate"><span class="pre">validate_room_collisions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.cli.html#module-dragonfly.cli">Module contents</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.writer.html">dragonfly.writer package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.writer.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.building.html">dragonfly.writer.building module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.context.html">dragonfly.writer.context module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.model.html">dragonfly.writer.model module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.room2d.html">dragonfly.writer.room2d module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.story.html">dragonfly.writer.story module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.writer.html#module-dragonfly.writer">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.building.html">dragonfly.building module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building"><code class="docutils literal notranslate"><span class="pre">Building</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_roof_geometry"><code class="docutils literal notranslate"><span class="pre">add_roof_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_room_3ds"><code class="docutils literal notranslate"><span class="pre">add_room_3ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_stories"><code class="docutils literal notranslate"><span class="pre">add_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.all_room_2ds"><code class="docutils literal notranslate"><span class="pre">all_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.all_stories"><code class="docutils literal notranslate"><span class="pre">all_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.buildings_to_honeybee"><code class="docutils literal notranslate"><span class="pre">buildings_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.check_collisions_between_stories"><code class="docutils literal notranslate"><span class="pre">check_collisions_between_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_all_room_3ds_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_all_room_3ds_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_multipliers_to_stories"><code class="docutils literal notranslate"><span class="pre">convert_multipliers_to_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_plenum_depths_to_room_2ds"><code class="docutils literal notranslate"><span class="pre">convert_plenum_depths_to_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3d_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_room_3d_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3ds_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_room_3ds_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.district_to_honeybee"><code class="docutils literal notranslate"><span class="pre">district_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.find_adjacency_gaps"><code class="docutils literal notranslate"><span class="pre">find_adjacency_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.footprint"><code class="docutils literal notranslate"><span class="pre">footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_all_story_geometry"><code class="docutils literal notranslate"><span class="pre">from_all_story_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_footprint"><code class="docutils literal notranslate"><span class="pre">from_footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_floors_ceilings"><code class="docutils literal notranslate"><span class="pre">has_floors_ceilings()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.make_basement_stories"><code class="docutils literal notranslate"><span class="pre">make_basement_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.match_and_replace_room_2d_floor_geometry"><code class="docutils literal notranslate"><span class="pre">match_and_replace_room_2d_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.process_alleys"><code class="docutils literal notranslate"><span class="pre">process_alleys()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.remove_duplicate_roofs"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.remove_stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">remove_stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_2ds_by_display_name"><code class="docutils literal notranslate"><span class="pre">room_2ds_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_display_name"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_story"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_story()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_mid_floors"><code class="docutils literal notranslate"><span class="pre">separate_mid_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_room_2d_plenums"><code class="docutils literal notranslate"><span class="pre">separate_room_2d_plenums()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_top_bottom_floors"><code class="docutils literal notranslate"><span class="pre">separate_top_bottom_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.shade_representation"><code class="docutils literal notranslate"><span class="pre">shade_representation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.sort_stories"><code class="docutils literal notranslate"><span class="pre">sort_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.split_room_2d_vertically"><code class="docutils literal notranslate"><span class="pre">split_room_2d_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_display_name"><code class="docutils literal notranslate"><span class="pre">stories_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_to_honeybee"><code class="docutils literal notranslate"><span class="pre">stories_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.suggested_alignment_axes"><code class="docutils literal notranslate"><span class="pre">suggested_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.footprint_area"><code class="docutils literal notranslate"><span class="pre">footprint_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_2d_plenums"><code class="docutils literal notranslate"><span class="pre">has_room_2d_plenums</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_2ds"><code class="docutils literal notranslate"><span class="pre">has_room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_3ds"><code class="docutils literal notranslate"><span class="pre">has_room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_zones"><code class="docutils literal notranslate"><span class="pre">has_zones</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height"><code class="docutils literal notranslate"><span class="pre">height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height_above_ground"><code class="docutils literal notranslate"><span class="pre">height_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height_from_first_floor"><code class="docutils literal notranslate"><span class="pre">height_from_first_floor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_2d_story_names"><code class="docutils literal notranslate"><span class="pre">room_2d_story_names</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_apertures"><code class="docutils literal notranslate"><span class="pre">room_3d_apertures</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_doors"><code class="docutils literal notranslate"><span class="pre">room_3d_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_faces"><code class="docutils literal notranslate"><span class="pre">room_3d_faces</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_shades"><code class="docutils literal notranslate"><span class="pre">room_3d_shades</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_story_names"><code class="docutils literal notranslate"><span class="pre">room_3d_story_names</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds"><code class="docutils literal notranslate"><span class="pre">room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.story_count"><code class="docutils literal notranslate"><span class="pre">story_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.story_count_above_ground"><code class="docutils literal notranslate"><span class="pre">story_count_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_room_2ds"><code class="docutils literal notranslate"><span class="pre">unique_room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_stories"><code class="docutils literal notranslate"><span class="pre">unique_stories</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_stories_above_ground"><code class="docutils literal notranslate"><span class="pre">unique_stories_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.zone_dict"><code class="docutils literal notranslate"><span class="pre">zone_dict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.colorobj.html">dragonfly.colorobj module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D"><code class="docutils literal notranslate"><span class="pre">ColorRoom2D</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attr_name"><code class="docutils literal notranslate"><span class="pre">attr_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attr_name_end"><code class="docutils literal notranslate"><span class="pre">attr_name_end</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes"><code class="docutils literal notranslate"><span class="pre">attributes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes_original"><code class="docutils literal notranslate"><span class="pre">attributes_original</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes_unique"><code class="docutils literal notranslate"><span class="pre">attributes_unique</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.floor_faces"><code class="docutils literal notranslate"><span class="pre">floor_faces</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.graphic_container"><code class="docutils literal notranslate"><span class="pre">graphic_container</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.legend_parameters"><code class="docutils literal notranslate"><span class="pre">legend_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.max_point"><code class="docutils literal notranslate"><span class="pre">max_point</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.min_point"><code class="docutils literal notranslate"><span class="pre">min_point</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.config.html">dragonfly.config module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders"><code class="docutils literal notranslate"><span class="pre">Folders</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_core_version"><code class="docutils literal notranslate"><span class="pre">dragonfly_core_version</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_core_version_str"><code class="docutils literal notranslate"><span class="pre">dragonfly_core_version_str</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_schema_version"><code class="docutils literal notranslate"><span class="pre">dragonfly_schema_version</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_schema_version_str"><code class="docutils literal notranslate"><span class="pre">dragonfly_schema_version_str</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.python_package_path"><code class="docutils literal notranslate"><span class="pre">python_package_path</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.context.html">dragonfly.context module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade"><code class="docutils literal notranslate"><span class="pre">ContextShade</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.apply_vertex_map"><code class="docutils literal notranslate"><span class="pre">apply_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.is_conforming"><code class="docutils literal notranslate"><span class="pre">is_conforming()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.unconforming_vertex_map"><code class="docutils literal notranslate"><span class="pre">unconforming_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.area"><code class="docutils literal notranslate"><span class="pre">area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.geometry"><code class="docutils literal notranslate"><span class="pre">geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.is_detached"><code class="docutils literal notranslate"><span class="pre">is_detached</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.dictutil.html">dragonfly.dictutil module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.dictutil.html#dragonfly.dictutil.dict_to_object"><code class="docutils literal notranslate"><span class="pre">dict_to_object()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.extensionutil.html">dragonfly.extensionutil module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.building_extension_dicts"><code class="docutils literal notranslate"><span class="pre">building_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.context_shade_extension_dicts"><code class="docutils literal notranslate"><span class="pre">context_shade_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.model_extension_dicts"><code class="docutils literal notranslate"><span class="pre">model_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.room2d_extension_dicts"><code class="docutils literal notranslate"><span class="pre">room2d_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.story_extension_dicts"><code class="docutils literal notranslate"><span class="pre">story_extension_dicts()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.model.html">dragonfly.model module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_building"><code class="docutils literal notranslate"><span class="pre">add_building()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_context_shade"><code class="docutils literal notranslate"><span class="pre">add_context_shade()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_model"><code class="docutils literal notranslate"><span class="pre">add_model()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.buildings_by_identifier"><code class="docutils literal notranslate"><span class="pre">buildings_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all"><code class="docutils literal notranslate"><span class="pre">check_all()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_duplicate_identifiers"><code class="docutils literal notranslate"><span class="pre">check_all_duplicate_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_room3d"><code class="docutils literal notranslate"><span class="pre">check_all_room3d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_room_collisions"><code class="docutils literal notranslate"><span class="pre">check_all_room_collisions()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_collisions_between_stories"><code class="docutils literal notranslate"><span class="pre">check_collisions_between_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_degenerate_room_2ds"><code class="docutils literal notranslate"><span class="pre">check_degenerate_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_building_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_building_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_context_shade_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_context_shade_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_room_2d_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_room_2d_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_story_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_story_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_for_error"><code class="docutils literal notranslate"><span class="pre">check_for_error()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_for_extension"><code class="docutils literal notranslate"><span class="pre">check_for_extension()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">check_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_no_roof_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_roof_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_no_room2d_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_room2d_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_plenum_depths"><code class="docutils literal notranslate"><span class="pre">check_plenum_depths()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_roofs_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roofs_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_room2d_floor_heights_valid"><code class="docutils literal notranslate"><span class="pre">check_room2d_floor_heights_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_self_intersecting_room_2ds"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_window_parameters_valid"><code class="docutils literal notranslate"><span class="pre">check_window_parameters_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.clean_irrational_geometry"><code class="docutils literal notranslate"><span class="pre">clean_irrational_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.context_shade_by_identifier"><code class="docutils literal notranslate"><span class="pre">context_shade_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.convert_to_units"><code class="docutils literal notranslate"><span class="pre">convert_to_units()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dfjson"><code class="docutils literal notranslate"><span class="pre">from_dfjson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dfpkl"><code class="docutils literal notranslate"><span class="pre">from_dfpkl()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_file"><code class="docutils literal notranslate"><span class="pre">from_file()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_geojson"><code class="docutils literal notranslate"><span class="pre">from_geojson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_pomf"><code class="docutils literal notranslate"><span class="pre">from_pomf()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.lines_from_pomf"><code class="docutils literal notranslate"><span class="pre">lines_from_pomf()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.model_dict_room_2d_subset"><code class="docutils literal notranslate"><span class="pre">model_dict_room_2d_subset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.model_dict_subset"><code class="docutils literal notranslate"><span class="pre">model_dict_subset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.remove_duplicate_roofs"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reset_coordinate_system"><code class="docutils literal notranslate"><span class="pre">reset_coordinate_system()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reset_ids"><code class="docutils literal notranslate"><span class="pre">reset_ids()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.resolve_id_collisions"><code class="docutils literal notranslate"><span class="pre">resolve_id_collisions()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_2ds_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_2ds_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_3ds_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.separate_top_bottom_floors"><code class="docutils literal notranslate"><span class="pre">separate_top_bottom_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dfjson"><code class="docutils literal notranslate"><span class="pre">to_dfjson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dfpkl"><code class="docutils literal notranslate"><span class="pre">to_dfpkl()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_geojson"><code class="docutils literal notranslate"><span class="pre">to_geojson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_geojson_dict"><code class="docutils literal notranslate"><span class="pre">to_geojson_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.validate"><code class="docutils literal notranslate"><span class="pre">validate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.ERROR_MAP"><code class="docutils literal notranslate"><span class="pre">ERROR_MAP</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.angle_tolerance"><code class="docutils literal notranslate"><span class="pre">angle_tolerance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_height"><code class="docutils literal notranslate"><span class="pre">average_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_height_above_ground"><code class="docutils literal notranslate"><span class="pre">average_height_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_story_count"><code class="docutils literal notranslate"><span class="pre">average_story_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_story_count_above_ground"><code class="docutils literal notranslate"><span class="pre">average_story_count_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.buildings"><code class="docutils literal notranslate"><span class="pre">buildings</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.context_shades"><code class="docutils literal notranslate"><span class="pre">context_shades</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.footprint_area"><code class="docutils literal notranslate"><span class="pre">footprint_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reference_vector"><code class="docutils literal notranslate"><span class="pre">reference_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_3ds"><code class="docutils literal notranslate"><span class="pre">room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.stories"><code class="docutils literal notranslate"><span class="pre">stories</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.tolerance"><code class="docutils literal notranslate"><span class="pre">tolerance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.units"><code class="docutils literal notranslate"><span class="pre">units</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.projection.html">dragonfly.projection module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.lon_lat_to_polygon"><code class="docutils literal notranslate"><span class="pre">lon_lat_to_polygon()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.meters_to_long_lat_factors"><code class="docutils literal notranslate"><span class="pre">meters_to_long_lat_factors()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.origin_long_lat_from_location"><code class="docutils literal notranslate"><span class="pre">origin_long_lat_from_location()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.polygon_to_lon_lat"><code class="docutils literal notranslate"><span class="pre">polygon_to_lon_lat()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.properties.html">dragonfly.properties module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties"><code class="docutils literal notranslate"><span class="pre">BuildingProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_ceiling_plenum_face_properties"><code class="docutils literal notranslate"><span class="pre">apply_ceiling_plenum_face_properties()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_floor_plenum_face_properties"><code class="docutils literal notranslate"><span class="pre">apply_floor_plenum_face_properties()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_properties_from_geojson_dict"><code class="docutils literal notranslate"><span class="pre">apply_properties_from_geojson_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.make_plenums"><code class="docutils literal notranslate"><span class="pre">make_plenums()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties"><code class="docutils literal notranslate"><span class="pre">ContextShadeProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties"><code class="docutils literal notranslate"><span class="pre">ModelProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.apply_properties_from_dict"><code class="docutils literal notranslate"><span class="pre">apply_properties_from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties"><code class="docutils literal notranslate"><span class="pre">Room2DProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties"><code class="docutils literal notranslate"><span class="pre">StoryProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.roof.html">dragonfly.roof module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification"><code class="docutils literal notranslate"><span class="pre">RoofSpecification</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.check_roof_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roof_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.find_gaps"><code class="docutils literal notranslate"><span class="pre">find_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.from_geometry_to_join"><code class="docutils literal notranslate"><span class="pre">from_geometry_to_join()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.join_geometries"><code class="docutils literal notranslate"><span class="pre">join_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.overlap_count"><code class="docutils literal notranslate"><span class="pre">overlap_count()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.pull_to_segments"><code class="docutils literal notranslate"><span class="pre">pull_to_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.remove_small_holes"><code class="docutils literal notranslate"><span class="pre">remove_small_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.resolved_geometry"><code class="docutils literal notranslate"><span class="pre">resolved_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_lines"><code class="docutils literal notranslate"><span class="pre">split_with_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_polygon"><code class="docutils literal notranslate"><span class="pre">split_with_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_thick_line"><code class="docutils literal notranslate"><span class="pre">split_with_thick_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_thick_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_thick_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.subtract_roofs"><code class="docutils literal notranslate"><span class="pre">subtract_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.union_coplanar"><code class="docutils literal notranslate"><span class="pre">union_coplanar()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.update_geometry_2d"><code class="docutils literal notranslate"><span class="pre">update_geometry_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.update_geometry_3d"><code class="docutils literal notranslate"><span class="pre">update_geometry_3d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.altitudes"><code class="docutils literal notranslate"><span class="pre">altitudes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.azimuths"><code class="docutils literal notranslate"><span class="pre">azimuths</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.boundary_geometry_2d"><code class="docutils literal notranslate"><span class="pre">boundary_geometry_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.center_heights"><code class="docutils literal notranslate"><span class="pre">center_heights</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.geometry"><code class="docutils literal notranslate"><span class="pre">geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.geometry_2d"><code class="docutils literal notranslate"><span class="pre">geometry_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.max_height"><code class="docutils literal notranslate"><span class="pre">max_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.min_height"><code class="docutils literal notranslate"><span class="pre">min_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.planes"><code class="docutils literal notranslate"><span class="pre">planes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.tilts"><code class="docutils literal notranslate"><span class="pre">tilts</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.room2d.html">dragonfly.room2d module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D"><code class="docutils literal notranslate"><span class="pre">Room2D</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.apply_vertex_map"><code class="docutils literal notranslate"><span class="pre">apply_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.assign_sub_faces"><code class="docutils literal notranslate"><span class="pre">assign_sub_faces()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.average_orientation"><code class="docutils literal notranslate"><span class="pre">average_orientation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_degenerate"><code class="docutils literal notranslate"><span class="pre">check_degenerate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_horizontal"><code class="docutils literal notranslate"><span class="pre">check_horizontal()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_plenum_depths"><code class="docutils literal notranslate"><span class="pre">check_plenum_depths()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_window_parameters_valid"><code class="docutils literal notranslate"><span class="pre">check_window_parameters_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.coordinate_room_2d_vertices"><code class="docutils literal notranslate"><span class="pre">coordinate_room_2d_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.coordinate_segment_vertices"><code class="docutils literal notranslate"><span class="pre">coordinate_segment_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency"><code class="docutils literal notranslate"><span class="pre">find_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency_by_guide_lines"><code class="docutils literal notranslate"><span class="pre">find_adjacency_by_guide_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency_gaps"><code class="docutils literal notranslate"><span class="pre">find_adjacency_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_segment_adjacency"><code class="docutils literal notranslate"><span class="pre">find_segment_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segment_by_index"><code class="docutils literal notranslate"><span class="pre">floor_segment_by_index()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_polygon"><code class="docutils literal notranslate"><span class="pre">from_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_vertices"><code class="docutils literal notranslate"><span class="pre">from_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.generate_alignment_axes"><code class="docutils literal notranslate"><span class="pre">generate_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.generate_grid"><code class="docutils literal notranslate"><span class="pre">generate_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_adjacency"><code class="docutils literal notranslate"><span class="pre">group_by_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_air_boundary_adjacency"><code class="docutils literal notranslate"><span class="pre">group_by_air_boundary_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_attribute"><code class="docutils literal notranslate"><span class="pre">group_by_attribute()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_floor_height"><code class="docutils literal notranslate"><span class="pre">group_by_floor_height()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_orientation"><code class="docutils literal notranslate"><span class="pre">group_by_orientation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.grouped_horizontal_boundary"><code class="docutils literal notranslate"><span class="pre">grouped_horizontal_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.intersect_adjacency"><code class="docutils literal notranslate"><span class="pre">intersect_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_by_boundary"><code class="docutils literal notranslate"><span class="pre">join_by_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_to_neighbor"><code class="docutils literal notranslate"><span class="pre">join_to_neighbor()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.label_point"><code class="docutils literal notranslate"><span class="pre">label_point()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.make_skylights_flush"><code class="docutils literal notranslate"><span class="pre">make_skylights_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.make_windows_flush"><code class="docutils literal notranslate"><span class="pre">make_windows_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_skylights"><code class="docutils literal notranslate"><span class="pre">offset_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_skylights_from_edges"><code class="docutils literal notranslate"><span class="pre">offset_skylights_from_edges()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_windows"><code class="docutils literal notranslate"><span class="pre">offset_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.overlap_area"><code class="docutils literal notranslate"><span class="pre">overlap_area()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.patch_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">patch_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_polygon"><code class="docutils literal notranslate"><span class="pre">pull_to_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_polyline"><code class="docutils literal notranslate"><span class="pre">pull_to_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_room_2d"><code class="docutils literal notranslate"><span class="pre">pull_to_room_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_segments"><code class="docutils literal notranslate"><span class="pre">pull_to_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.rectangularize_windows"><code class="docutils literal notranslate"><span class="pre">rectangularize_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.relevant_roof_geometry"><code class="docutils literal notranslate"><span class="pre">relevant_roof_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_colinear_vertices"><code class="docutils literal notranslate"><span class="pre">remove_colinear_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_degenerate_holes"><code class="docutils literal notranslate"><span class="pre">remove_degenerate_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_duplicate_vertices"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_short_segments"><code class="docutils literal notranslate"><span class="pre">remove_short_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_holes"><code class="docutils literal notranslate"><span class="pre">remove_small_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_skylights"><code class="docutils literal notranslate"><span class="pre">remove_small_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.replace_floor_geometry"><code class="docutils literal notranslate"><span class="pre">replace_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.reset_adjacency"><code class="docutils literal notranslate"><span class="pre">reset_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.room_orientation_plane"><code class="docutils literal notranslate"><span class="pre">room_orientation_plane()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_indices_by_guide_lines"><code class="docutils literal notranslate"><span class="pre">segment_indices_by_guide_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_orientations"><code class="docutils literal notranslate"><span class="pre">segment_orientations()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.separate_plenum"><code class="docutils literal notranslate"><span class="pre">separate_plenum()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_adjacency"><code class="docutils literal notranslate"><span class="pre">set_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_air_boundary"><code class="docutils literal notranslate"><span class="pre">set_air_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_boundary_condition"><code class="docutils literal notranslate"><span class="pre">set_boundary_condition()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_window_parameter"><code class="docutils literal notranslate"><span class="pre">set_window_parameter()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_line_end_points"><code class="docutils literal notranslate"><span class="pre">snap_to_line_end_points()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_points"><code class="docutils literal notranslate"><span class="pre">snap_to_points()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.solve_adjacency"><code class="docutils literal notranslate"><span class="pre">solve_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_through_self_intersection"><code class="docutils literal notranslate"><span class="pre">split_through_self_intersection()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_line"><code class="docutils literal notranslate"><span class="pre">split_with_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_lines"><code class="docutils literal notranslate"><span class="pre">split_with_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_polygon"><code class="docutils literal notranslate"><span class="pre">split_with_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_thick_line"><code class="docutils literal notranslate"><span class="pre">split_with_thick_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_thick_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_thick_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.subtract_room_2ds"><code class="docutils literal notranslate"><span class="pre">subtract_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_core_perimeter"><code class="docutils literal notranslate"><span class="pre">to_core_perimeter()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_detailed_windows"><code class="docutils literal notranslate"><span class="pre">to_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.unconforming_vertex_map"><code class="docutils literal notranslate"><span class="pre">unconforming_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.update_floor_geometry"><code class="docutils literal notranslate"><span class="pre">update_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.air_boundaries"><code class="docutils literal notranslate"><span class="pre">air_boundaries</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.boundary_conditions"><code class="docutils literal notranslate"><span class="pre">boundary_conditions</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_elevation"><code class="docutils literal notranslate"><span class="pre">ceiling_elevation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_height"><code class="docutils literal notranslate"><span class="pre">ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_plenum_depth"><code class="docutils literal notranslate"><span class="pre">ceiling_plenum_depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.center"><code class="docutils literal notranslate"><span class="pre">center</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_window_area"><code class="docutils literal notranslate"><span class="pre">exterior_window_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_elevation"><code class="docutils literal notranslate"><span class="pre">floor_elevation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_geometry"><code class="docutils literal notranslate"><span class="pre">floor_geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_height"><code class="docutils literal notranslate"><span class="pre">floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_plenum_depth"><code class="docutils literal notranslate"><span class="pre">floor_plenum_depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segments"><code class="docutils literal notranslate"><span class="pre">floor_segments</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segments_2d"><code class="docutils literal notranslate"><span class="pre">floor_segments_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_to_ceiling_height"><code class="docutils literal notranslate"><span class="pre">floor_to_ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_ceiling"><code class="docutils literal notranslate"><span class="pre">has_ceiling</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_floor"><code class="docutils literal notranslate"><span class="pre">has_floor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.highest_plenum_floor_height"><code class="docutils literal notranslate"><span class="pre">highest_plenum_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.interior_wall_area"><code class="docutils literal notranslate"><span class="pre">interior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_core"><code class="docutils literal notranslate"><span class="pre">is_core</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_ground_contact"><code class="docutils literal notranslate"><span class="pre">is_ground_contact</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_perimeter"><code class="docutils literal notranslate"><span class="pre">is_perimeter</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_top_exposed"><code class="docutils literal notranslate"><span class="pre">is_top_exposed</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.roof_sub_face_area"><code class="docutils literal notranslate"><span class="pre">roof_sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_count"><code class="docutils literal notranslate"><span class="pre">segment_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_normals"><code class="docutils literal notranslate"><span class="pre">segment_normals</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.shading_parameters"><code class="docutils literal notranslate"><span class="pre">shading_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.skylight_area"><code class="docutils literal notranslate"><span class="pre">skylight_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.skylight_parameters"><code class="docutils literal notranslate"><span class="pre">skylight_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.wall_sub_face_area"><code class="docutils literal notranslate"><span class="pre">wall_sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.window_parameters"><code class="docutils literal notranslate"><span class="pre">window_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.zone"><code class="docutils literal notranslate"><span class="pre">zone</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.shadingparameter.html">dragonfly.shadingparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder"><code class="docutils literal notranslate"><span class="pre">ExtrudedBorder</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount"><code class="docutils literal notranslate"><span class="pre">LouversByCount</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.contour_vector"><code class="docutils literal notranslate"><span class="pre">contour_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.flip_start_side"><code class="docutils literal notranslate"><span class="pre">flip_start_side</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.louver_count"><code class="docutils literal notranslate"><span class="pre">louver_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance"><code class="docutils literal notranslate"><span class="pre">LouversByDistance</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.contour_vector"><code class="docutils literal notranslate"><span class="pre">contour_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.distance"><code class="docutils literal notranslate"><span class="pre">distance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.flip_start_side"><code class="docutils literal notranslate"><span class="pre">flip_start_side</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang"><code class="docutils literal notranslate"><span class="pre">Overhang</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.skylightparameter.html">dragonfly.skylightparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights"><code class="docutils literal notranslate"><span class="pre">DetailedSkylights</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.aperture_area_from_face"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_overlaps"><code class="docutils literal notranslate"><span class="pre">check_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_valid_for_face"><code class="docutils literal notranslate"><span class="pre">check_valid_for_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.invalid_face_geometries"><code class="docutils literal notranslate"><span class="pre">invalid_face_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.make_flush"><code class="docutils literal notranslate"><span class="pre">make_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.merge_and_simplify"><code class="docutils literal notranslate"><span class="pre">merge_and_simplify()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.merge_to_bounding_rectangle"><code class="docutils literal notranslate"><span class="pre">merge_to_bounding_rectangle()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.offset_polygons_for_face"><code class="docutils literal notranslate"><span class="pre">offset_polygons_for_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.overlapping_geometries"><code class="docutils literal notranslate"><span class="pre">overlapping_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.rectangularize"><code class="docutils literal notranslate"><span class="pre">rectangularize()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_duplicate_skylights"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_self_intersecting"><code class="docutils literal notranslate"><span class="pre">remove_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_small_skylights"><code class="docutils literal notranslate"><span class="pre">remove_small_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_windows"><code class="docutils literal notranslate"><span class="pre">remove_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.rotate"><code class="docutils literal notranslate"><span class="pre">rotate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.self_intersecting_geometries"><code class="docutils literal notranslate"><span class="pre">self_intersecting_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.union_overlaps"><code class="docutils literal notranslate"><span class="pre">union_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.polygons"><code class="docutils literal notranslate"><span class="pre">polygons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea"><code class="docutils literal notranslate"><span class="pre">GriddedSkylightArea</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.skylight_area"><code class="docutils literal notranslate"><span class="pre">skylight_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.spacing"><code class="docutils literal notranslate"><span class="pre">spacing</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio"><code class="docutils literal notranslate"><span class="pre">GriddedSkylightRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.skylight_ratio"><code class="docutils literal notranslate"><span class="pre">skylight_ratio</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.spacing"><code class="docutils literal notranslate"><span class="pre">spacing</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.story.html">dragonfly.story module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story"><code class="docutils literal notranslate"><span class="pre">Story</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2d"><code class="docutils literal notranslate"><span class="pre">add_room_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2ds"><code class="docutils literal notranslate"><span class="pre">add_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.align_room_2ds"><code class="docutils literal notranslate"><span class="pre">align_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_collision_with_story"><code class="docutils literal notranslate"><span class="pre">check_collision_with_story()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">check_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_roof_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_roof_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_room2d_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_room2d_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_roofs_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roofs_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_room2d_floor_heights_valid"><code class="docutils literal notranslate"><span class="pre">check_room2d_floor_heights_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.delete_degenerate_room_2ds"><code class="docutils literal notranslate"><span class="pre">delete_degenerate_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.fill_holes"><code class="docutils literal notranslate"><span class="pre">fill_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_geometry"><code class="docutils literal notranslate"><span class="pre">floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.footprint"><code class="docutils literal notranslate"><span class="pre">footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.generate_grid"><code class="docutils literal notranslate"><span class="pre">generate_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.intersect_room_2d_adjacency"><code class="docutils literal notranslate"><span class="pre">intersect_room_2d_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.join_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.join_small_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_small_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.make_aboveground"><code class="docutils literal notranslate"><span class="pre">make_aboveground()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.make_underground"><code class="docutils literal notranslate"><span class="pre">make_underground()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.outline_polylines"><code class="docutils literal notranslate"><span class="pre">outline_polylines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.outline_segments"><code class="docutils literal notranslate"><span class="pre">outline_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.patch_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">patch_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rebuild_detailed_windows"><code class="docutils literal notranslate"><span class="pre">rebuild_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_colinear_vertices"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_colinear_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_duplicate_vertices"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_duplicate_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_short_segments"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_short_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reset_adjacency"><code class="docutils literal notranslate"><span class="pre">reset_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reset_room_2d_boundaries"><code class="docutils literal notranslate"><span class="pre">reset_room_2d_boundaries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_2d_story_geometry_valid"><code class="docutils literal notranslate"><span class="pre">room_2d_story_geometry_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rooms_by_identifier"><code class="docutils literal notranslate"><span class="pre">rooms_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_adjacent_air_boundary"><code class="docutils literal notranslate"><span class="pre">set_adjacent_air_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact"><code class="docutils literal notranslate"><span class="pre">set_ground_contact()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact_by_story_below"><code class="docutils literal notranslate"><span class="pre">set_ground_contact_by_story_below()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed"><code class="docutils literal notranslate"><span class="pre">set_top_exposed()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed_by_story_above"><code class="docutils literal notranslate"><span class="pre">set_top_exposed_by_story_above()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation"><code class="docutils literal notranslate"><span class="pre">shade_representation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation_multiplier"><code class="docutils literal notranslate"><span class="pre">shade_representation_multiplier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.solve_room_2d_adjacency"><code class="docutils literal notranslate"><span class="pre">solve_room_2d_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.split_with_story_above"><code class="docutils literal notranslate"><span class="pre">split_with_story_above()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.suggested_alignment_axes"><code class="docutils literal notranslate"><span class="pre">suggested_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.STORY_TYPES"><code class="docutils literal notranslate"><span class="pre">STORY_TYPES</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_height"><code class="docutils literal notranslate"><span class="pre">floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_to_floor_height"><code class="docutils literal notranslate"><span class="pre">floor_to_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_plenums"><code class="docutils literal notranslate"><span class="pre">has_plenums</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_zones"><code class="docutils literal notranslate"><span class="pre">has_zones</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.highest_plenum_floor_height"><code class="docutils literal notranslate"><span class="pre">highest_plenum_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.is_above_ground"><code class="docutils literal notranslate"><span class="pre">is_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.is_plenum"><code class="docutils literal notranslate"><span class="pre">is_plenum</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.max_room_2d_ceiling_height"><code class="docutils literal notranslate"><span class="pre">max_room_2d_ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.median_room2d_floor_height"><code class="docutils literal notranslate"><span class="pre">median_room2d_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.min_room_2d_floor_height"><code class="docutils literal notranslate"><span class="pre">min_room_2d_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.multiplier"><code class="docutils literal notranslate"><span class="pre">multiplier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.roof"><code class="docutils literal notranslate"><span class="pre">roof</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.type"><code class="docutils literal notranslate"><span class="pre">type</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.zone_dict"><code class="docutils literal notranslate"><span class="pre">zone_dict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.subdivide.html">dragonfly.subdivide module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.subdivide.html#dragonfly.subdivide.interpret_core_perimeter_subdivide"><code class="docutils literal notranslate"><span class="pre">interpret_core_perimeter_subdivide()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.subdivide.html#dragonfly.subdivide.interpret_floor_height_subdivide"><code class="docutils literal notranslate"><span class="pre">interpret_floor_height_subdivide()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.windowparameter.html">dragonfly.windowparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows"><code class="docutils literal notranslate"><span class="pre">DetailedWindows</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.adjust_for_segment"><code class="docutils literal notranslate"><span class="pre">adjust_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.aperture_area_from_segment"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_valid_for_segment"><code class="docutils literal notranslate"><span class="pre">check_valid_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_window_overlaps"><code class="docutils literal notranslate"><span class="pre">check_window_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.flip"><code class="docutils literal notranslate"><span class="pre">flip()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_face3ds"><code class="docutils literal notranslate"><span class="pre">from_face3ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_face3d_in_segment_plane"><code class="docutils literal notranslate"><span class="pre">is_face3d_in_segment_plane()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_flipped_equivalent"><code class="docutils literal notranslate"><span class="pre">is_flipped_equivalent()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.make_flush"><code class="docutils literal notranslate"><span class="pre">make_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_and_simplify"><code class="docutils literal notranslate"><span class="pre">merge_and_simplify()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_bounding_rectangle"><code class="docutils literal notranslate"><span class="pre">merge_to_bounding_rectangle()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.overlapping_geometries"><code class="docutils literal notranslate"><span class="pre">overlapping_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.rectangularize"><code class="docutils literal notranslate"><span class="pre">rectangularize()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_duplicate_windows"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_windows"><code class="docutils literal notranslate"><span class="pre">remove_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.self_intersecting_geometries"><code class="docutils literal notranslate"><span class="pre">self_intersecting_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_horizontally"><code class="docutils literal notranslate"><span class="pre">shift_horizontally()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_vertically"><code class="docutils literal notranslate"><span class="pre">shift_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.union_overlaps"><code class="docutils literal notranslate"><span class="pre">union_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.polygons"><code class="docutils literal notranslate"><span class="pre">polygons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows"><code class="docutils literal notranslate"><span class="pre">RectangularWindows</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.adjust_for_segment"><code class="docutils literal notranslate"><span class="pre">adjust_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.aperture_area_from_segment"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_valid_for_segment"><code class="docutils literal notranslate"><span class="pre">check_valid_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_window_overlaps"><code class="docutils literal notranslate"><span class="pre">check_window_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.flip"><code class="docutils literal notranslate"><span class="pre">flip()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_duplicate_windows"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_windows"><code class="docutils literal notranslate"><span class="pre">remove_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_horizontally"><code class="docutils literal notranslate"><span class="pre">shift_horizontally()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_vertically"><code class="docutils literal notranslate"><span class="pre">shift_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_detailed_windows"><code class="docutils literal notranslate"><span class="pre">to_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.heights"><code class="docutils literal notranslate"><span class="pre">heights</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.origins"><code class="docutils literal notranslate"><span class="pre">origins</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.widths"><code class="docutils literal notranslate"><span class="pre">widths</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio"><code class="docutils literal notranslate"><span class="pre">RepeatingWindowRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.horizontal_separation"><code class="docutils literal notranslate"><span class="pre">horizontal_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.vertical_separation"><code class="docutils literal notranslate"><span class="pre">vertical_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.window_height"><code class="docutils literal notranslate"><span class="pre">window_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.window_ratio"><code class="docutils literal notranslate"><span class="pre">window_ratio</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight"><code class="docutils literal notranslate"><span class="pre">RepeatingWindowWidthHeight</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.horizontal_separation"><code class="docutils literal notranslate"><span class="pre">horizontal_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.window_height"><code class="docutils literal notranslate"><span class="pre">window_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.window_width"><code class="docutils literal notranslate"><span class="pre">window_width</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea"><code class="docutils literal notranslate"><span class="pre">SimpleWindowArea</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.window_area"><code class="docutils literal notranslate"><span class="pre">window_area</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio"><code class="docutils literal notranslate"><span class="pre">SimpleWindowRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.window_ratio"><code class="docutils literal notranslate"><span class="pre">window_ratio</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow"><code class="docutils literal notranslate"><span class="pre">SingleWindow</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.height"><code class="docutils literal notranslate"><span class="pre">height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.width"><code class="docutils literal notranslate"><span class="pre">width</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#module-dragonfly">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-4">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-8 content" role="main">
      
  <h1>Source code for dragonfly.building</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: utf-8</span>
<span class="sd">&quot;&quot;&quot;Dragonfly Building.&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">itertools</span><span class="w"> </span><span class="kn">import</span> <span class="n">izip</span> <span class="k">as</span> <span class="nb">zip</span>  <span class="c1"># python 2</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">xrange</span> <span class="o">=</span> <span class="nb">range</span>  <span class="c1"># python 3</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry2d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Vector2D</span><span class="p">,</span> <span class="n">Point2D</span><span class="p">,</span> <span class="n">LineSegment2D</span><span class="p">,</span> <span class="n">Polygon2D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry3d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Vector3D</span><span class="p">,</span> <span class="n">Point3D</span><span class="p">,</span> <span class="n">Ray3D</span><span class="p">,</span> <span class="n">Face3D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry_polyskel.polysplit</span><span class="w"> </span><span class="kn">import</span> <span class="n">perimeter_core_subfaces</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.model</span><span class="w"> </span><span class="kn">import</span> <span class="n">Model</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.room</span><span class="w"> </span><span class="kn">import</span> <span class="n">Room</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.shade</span><span class="w"> </span><span class="kn">import</span> <span class="n">Shade</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.facetype</span><span class="w"> </span><span class="kn">import</span> <span class="n">Wall</span><span class="p">,</span> <span class="n">Floor</span><span class="p">,</span> <span class="n">RoofCeiling</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.boundarycondition</span><span class="w"> </span><span class="kn">import</span> <span class="n">Outdoors</span><span class="p">,</span> <span class="n">Surface</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.boundarycondition</span><span class="w"> </span><span class="kn">import</span> <span class="n">boundary_conditions</span> <span class="k">as</span> <span class="n">bcs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">clean_string</span><span class="p">,</span> <span class="n">invalid_dict_error</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.units</span><span class="w"> </span><span class="kn">import</span> <span class="n">parse_distance_string</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">._base</span><span class="w"> </span><span class="kn">import</span> <span class="n">_BaseGeometry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.properties</span><span class="w"> </span><span class="kn">import</span> <span class="n">BuildingProperties</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.story</span><span class="w"> </span><span class="kn">import</span> <span class="n">Story</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.roof</span><span class="w"> </span><span class="kn">import</span> <span class="n">RoofSpecification</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.room2d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Room2D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.windowparameter</span><span class="w"> </span><span class="kn">import</span> <span class="n">_AsymmetricBase</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.skylightparameter</span><span class="w"> </span><span class="kn">import</span> <span class="n">DetailedSkylights</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">dragonfly.writer.building</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">writer</span>


<div class="viewcode-block" id="Building">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Building</span><span class="p">(</span><span class="n">_BaseGeometry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A complete Building defined by Stories (and optional extra 3D rooms).</span>

<span class="sd">    Buildings must have at least one dragonfly Story or one Honeybee Room under</span>
<span class="sd">    the room_3ds property.</span>

<span class="sd">    Args:</span>
<span class="sd">        identifier: Text string for a unique Building ID. Must be &lt; 100 characters</span>
<span class="sd">            and not contain any spaces or special characters.</span>
<span class="sd">        unique_stories: An array of unique Dragonfly Story objects that</span>
<span class="sd">            together form the entire building. Stories input here can be in any</span>
<span class="sd">            order but they will be automatically sorted from lowest floor to</span>
<span class="sd">            highest floor when they are assigned to the Building. Note that,</span>
<span class="sd">            if a given Story is repeated several times over the height of the</span>
<span class="sd">            Building, the unique Story included in this list should be the</span>
<span class="sd">            first (lowest) Story of the repeated floors. (Default: None).</span>
<span class="sd">        room_3ds: An optional array of 3D Honeybee Room objects for additional</span>
<span class="sd">            Rooms that are a part of the Building but are not represented within</span>
<span class="sd">            the unique_stories. This is useful when there are parts of the Building</span>
<span class="sd">            geometry that cannot easily be represented with the extruded floor</span>
<span class="sd">            plate and sloped roof assumptions that underlie Dragonfly Room2Ds</span>
<span class="sd">            and RoofSpecification. Cases where this input is most useful include</span>
<span class="sd">            sloped walls and certain types of domed roofs that become tedious to</span>
<span class="sd">            implement with RoofSpecification. Matching the Honeybee Room.story</span>
<span class="sd">            property to the Dragonfly Story.display_name of an object within the</span>
<span class="sd">            unique_stories will effectively place the Honeybee Room on that Story</span>
<span class="sd">            for the purposes of floor_area, exterior_wall_area, etc. However, note</span>
<span class="sd">            that the Honeybee Room.multiplier property takes precedence over</span>
<span class="sd">            whatever multiplier is assigned to the Dragonfly Story that the</span>
<span class="sd">            Room.story may reference. (Default: None).</span>
<span class="sd">        sort_stories: A boolean to note whether the unique_stories should be sorted</span>
<span class="sd">            from lowest to highest story upon initialization (True) or whether</span>
<span class="sd">            the input order of unique_stories should be left as-is. (Default: True).</span>

<span class="sd">    Properties:</span>
<span class="sd">        * identifier</span>
<span class="sd">        * display_name</span>
<span class="sd">        * full_id</span>
<span class="sd">        * unique_stories</span>
<span class="sd">        * unique_room_2ds</span>
<span class="sd">        * room_3ds</span>
<span class="sd">        * room_3d_faces</span>
<span class="sd">        * room_3d_apertures</span>
<span class="sd">        * room_3d_doors</span>
<span class="sd">        * room_3d_shades</span>
<span class="sd">        * has_room_2ds</span>
<span class="sd">        * has_room_3ds</span>
<span class="sd">        * has_room_2d_plenums</span>
<span class="sd">        * room_2d_story_names</span>
<span class="sd">        * room_3d_story_names</span>
<span class="sd">        * has_zones</span>
<span class="sd">        * zone_dict</span>
<span class="sd">        * story_count</span>
<span class="sd">        * story_count_above_ground</span>
<span class="sd">        * unique_stories_above_ground</span>
<span class="sd">        * height</span>
<span class="sd">        * height_above_ground</span>
<span class="sd">        * height_from_first_floor</span>
<span class="sd">        * footprint_area</span>
<span class="sd">        * floor_area</span>
<span class="sd">        * exterior_wall_area</span>
<span class="sd">        * exterior_aperture_area</span>
<span class="sd">        * sub_face_area</span>
<span class="sd">        * volume</span>
<span class="sd">        * min</span>
<span class="sd">        * max</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_unique_stories&#39;</span><span class="p">,</span> <span class="s1">&#39;_room_3ds&#39;</span><span class="p">,</span> <span class="s1">&#39;_roofs&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">unique_stories</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">room_3ds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">sort_stories</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A complete Building defined by Stories.&quot;&quot;&quot;</span>
        <span class="c1"># initialize and perform a basic check that there&#39;s some geometry</span>
        <span class="n">_BaseGeometry</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>  <span class="c1"># process the identifier</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">unique_stories</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_stories</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="p">(</span><span class="n">room_3ds</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_3ds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Building must have some geometry - at least one Story &#39;</span>
                             <span class="s1">&#39;or one Room under room_3ds.&#39;</span><span class="p">)</span>

        <span class="c1"># process the story geometry</span>
        <span class="k">if</span> <span class="n">unique_stories</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">unique_stories</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">story</span><span class="p">,</span> <span class="n">Story</span><span class="p">),</span> \
                    <span class="s1">&#39;Expected dragonfly Story. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">story</span><span class="p">))</span>
                <span class="n">story</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="k">if</span> <span class="n">sort_stories</span><span class="p">:</span>
                <span class="n">unique_stories</span> <span class="o">=</span> \
                    <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">unique_stories</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">floor_height</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">unique_stories</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">unique_stories</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="n">unique_stories</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="p">()</span>

        <span class="c1"># process the room_3d geometry</span>
        <span class="k">if</span> <span class="n">room_3ds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">room_3ds</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">Room</span><span class="p">),</span> \
                    <span class="s1">&#39;Expected honeybee Room. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">room</span><span class="p">))</span>
                <span class="n">room</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="c1"># assign stories to any Rooms that lack them</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">story</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">room_3ds</span><span class="p">]):</span>
                <span class="n">Room</span><span class="o">.</span><span class="n">stories_by_floor_height</span><span class="p">(</span><span class="n">room_3ds</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">room_3ds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="p">()</span>

        <span class="c1"># initialize properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># used under the hood to correctly assign roofs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="n">BuildingProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># properties for extensions</span>

<div class="viewcode-block" id="Building.from_footprint">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.from_footprint">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_footprint</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">footprint</span><span class="p">,</span> <span class="n">floor_to_floor_heights</span><span class="p">,</span>
                       <span class="n">perimeter_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a Building from an array of Face3Ds representing a footprint.</span>

<span class="sd">        All of the resulting Room2Ds will have a floor-to-ceiling height equal to the</span>
<span class="sd">        Story floor-to-floor height. Also, none of the Room2Ds will have contact</span>
<span class="sd">        with the ground or top exposure but the separate_top_bottom_floors method</span>
<span class="sd">        can be used to automatically break these floors out from the multiplier</span>
<span class="sd">        representation and assign these properties.</span>

<span class="sd">        Args:</span>
<span class="sd">            identifier: Text string for a unique Building ID. Must be &lt; 100 characters</span>
<span class="sd">                and not contain any spaces or special characters.</span>
<span class="sd">            footprint: An array of horizontal ladybug-geometry Face3Ds that together</span>
<span class="sd">                represent the the footprint of the Building.</span>
<span class="sd">            floor_to_floor_heights: An array of float values with a length equal</span>
<span class="sd">                to the number of stories in the Building. Each value in the list</span>
<span class="sd">                represents the floor_to_floor height of the Story starting from</span>
<span class="sd">                the first floor and then moving to the top floor. Note that numbers</span>
<span class="sd">                should be in the units system of the footprint geometry.</span>
<span class="sd">            perimeter_offset: An optional positive number that will be used to</span>
<span class="sd">                offset the perimeter of the footprint to create core/perimeter</span>
<span class="sd">                zones. If this value is 0, no offset will occur and each story</span>
<span class="sd">                will be represented with a single Room2D per polygon (Default: 0).</span>
<span class="sd">            tolerance: The maximum difference between z values at which point vertices</span>
<span class="sd">                are considered to be in the same horizontal plane. This is used to check</span>
<span class="sd">                that all vertices of the input floor_geometry lie in the same horizontal</span>
<span class="sd">                floor plane. Default is 0, which will not perform any check.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># generate the unique Room2Ds from the footprint</span>
        <span class="n">room_2ds</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_room_2ds</span><span class="p">(</span>
            <span class="n">footprint</span><span class="p">,</span> <span class="n">floor_to_floor_heights</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">perimeter_offset</span><span class="p">,</span>
            <span class="n">identifier</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># generate the unique stories from the floor_to_floor_heights</span>
        <span class="n">stories</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">total_height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">prev_flr_to_flr</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">flr_hgt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">floor_to_floor_heights</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">flr_hgt</span> <span class="o">!=</span> <span class="n">prev_flr_to_flr</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">rooms</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">room_2ds</span><span class="p">]</span>
                    <span class="n">move_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">total_height</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">room</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rooms</span><span class="p">):</span>
                        <span class="n">room</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">move_vec</span><span class="p">)</span>
                        <span class="n">room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span> <span class="o">=</span> <span class="n">flr_hgt</span>
                        <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">=</span> \
                            <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Floor</span><span class="si">{}</span><span class="s1">_Room</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">perimeter_offset</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># reset all boundary conditions</span>
                        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">:</span>
                            <span class="n">room</span><span class="o">.</span><span class="n">boundary_conditions</span> <span class="o">=</span> <span class="p">[</span><span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
                        <span class="n">Room2D</span><span class="o">.</span><span class="n">solve_adjacency</span><span class="p">(</span><span class="n">rooms</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">rooms</span> <span class="o">=</span> <span class="n">room_2ds</span>
                <span class="n">stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Story</span><span class="p">(</span>
                    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Floor</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">rooms</span><span class="p">,</span> <span class="n">flr_hgt</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stories</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">total_height</span> <span class="o">+=</span> <span class="n">flr_hgt</span>
            <span class="n">prev_flr_to_flr</span> <span class="o">=</span> <span class="n">flr_hgt</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">stories</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.from_all_story_geometry">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.from_all_story_geometry">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_all_story_geometry</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">all_story_geometry</span><span class="p">,</span>
                                <span class="n">floor_to_floor_heights</span><span class="p">,</span> <span class="n">perimeter_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a Building from an array of Face3Ds arrays representing all floors.</span>

<span class="sd">        This method will test to see which of the stories are geometrically unique</span>
<span class="sd">        (accoutring for both the floor plate geometry and the floor_to_floor_heights).</span>
<span class="sd">        It will only include the unique floor geometries in the resulting Building.</span>

<span class="sd">        All of the resulting Room2Ds will have a floor-to-ceiling height equal to the</span>
<span class="sd">        Story floor-to-floor height.</span>

<span class="sd">        Args:</span>
<span class="sd">            identifier: Text string for a unique Building ID. Must be &lt; 100 characters</span>
<span class="sd">                and not contain any spaces or special characters.</span>
<span class="sd">            all_story_geometry: An array of arrays with each sub-array possessing</span>
<span class="sd">                horizontal ladybug-geometry Face3Ds that representing the floor</span>
<span class="sd">                plates of the building. Together, these Face3Ds should represent</span>
<span class="sd">                all Stories of a building and each array of Face3Ds should together</span>
<span class="sd">                represent one Story.</span>
<span class="sd">            floor_to_floor_heights: An array of float values with a length equal</span>
<span class="sd">                to the number of stories in the Building. Each value in the list</span>
<span class="sd">                represents the floor_to_floor height of the Story starting from</span>
<span class="sd">                the first floor and then moving to the top floor. Note that numbers</span>
<span class="sd">                should be in the units system of the footprint geometry.</span>
<span class="sd">            perimeter_offset: An optional positive number that will be used to offset</span>
<span class="sd">                the perimeter of the all_story_geometry to create core/perimeter</span>
<span class="sd">                zones. If this value is 0, no offset will occur and each story</span>
<span class="sd">                will be represented with a single Room2D per polygon (Default: 0).</span>
<span class="sd">            tolerance: The maximum difference between x, y, and z values at which</span>
<span class="sd">                point vertices are considered to be the same. This is also needed as</span>
<span class="sd">                a means to determine which floor geometries are equivalent to one</span>
<span class="sd">                another and should be a part the same Story. Default: 0.01, suitable</span>
<span class="sd">                for objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># generate the first story of the building</span>
        <span class="n">room_2ds</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_room_2ds</span><span class="p">(</span>
            <span class="n">all_story_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">floor_to_floor_heights</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">perimeter_offset</span><span class="p">,</span>
            <span class="n">identifier</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="n">stories</span> <span class="o">=</span> <span class="p">[</span><span class="n">Story</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Floor1&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">),</span> <span class="n">room_2ds</span><span class="p">,</span>
                         <span class="n">floor_to_floor_heights</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>

        <span class="c1"># generate the remaining unique stories from the floor_to_floor_heights</span>
        <span class="n">remaining_geo</span> <span class="o">=</span> <span class="n">all_story_geometry</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">remaining_flr_hgts</span> <span class="o">=</span> <span class="n">floor_to_floor_heights</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">prev_geo</span> <span class="o">=</span> <span class="n">all_story_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">prev_flr_to_flr</span> <span class="o">=</span> <span class="n">floor_to_floor_heights</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">room_geo</span><span class="p">,</span> <span class="n">flr_hgt</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">remaining_geo</span><span class="p">,</span> <span class="n">remaining_flr_hgts</span><span class="p">)):</span>
            <span class="c1"># test is anything is geometrically different</span>
            <span class="k">if</span> <span class="n">flr_hgt</span> <span class="o">!=</span> <span class="n">prev_flr_to_flr</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_geo</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">prev_geo</span><span class="p">)</span> <span class="ow">or</span> \
                    <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_is_story_equivalent</span><span class="p">(</span><span class="n">rm1</span><span class="p">,</span> <span class="n">rm2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                            <span class="k">for</span> <span class="n">rm1</span><span class="p">,</span> <span class="n">rm2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">room_geo</span><span class="p">,</span> <span class="n">prev_geo</span><span class="p">)):</span>
                <span class="n">room_2ds</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_generate_room_2ds</span><span class="p">(</span>
                    <span class="n">room_geo</span><span class="p">,</span> <span class="n">flr_hgt</span><span class="p">,</span> <span class="n">perimeter_offset</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Story</span><span class="p">(</span>
                    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Floor</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">),</span> <span class="n">room_2ds</span><span class="p">,</span> <span class="n">flr_hgt</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># geometry is the same as the floor below</span>
                <span class="n">stories</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">prev_geo</span> <span class="o">=</span> <span class="n">room_geo</span>
            <span class="n">prev_flr_to_flr</span> <span class="o">=</span> <span class="n">flr_hgt</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">stories</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.from_dict">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sort_stories</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an Building from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A dictionary representation of a Building object.</span>
<span class="sd">            tolerance: The maximum difference between z values at which point vertices</span>
<span class="sd">                are considered to be in the same horizontal plane. This is used to check</span>
<span class="sd">                that all vertices of the input floor_geometry lie in the same horizontal</span>
<span class="sd">                floor plane. Default is 0, which will not perform any check.</span>
<span class="sd">            angle_tolerance: The max angle difference in degrees that vertices are</span>
<span class="sd">                allowed to differ from one another in order to consider them colinear.</span>
<span class="sd">                Default is 0, which makes no attempt to evaluate whether the Room</span>
<span class="sd">                volume is closed.</span>
<span class="sd">            sort_stories: A boolean to note whether the unique_stories should be sorted</span>
<span class="sd">                from lowest to highest story upon initialization (True) or whether</span>
<span class="sd">                the input order of unique_stories should be left as-is. (Default: True).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check the type of dictionary</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Building&#39;</span><span class="p">,</span> <span class="s1">&#39;Expected Building dictionary. &#39;</span> \
            <span class="s1">&#39;Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
        <span class="c1"># extract the 2D Stories</span>
        <span class="n">stories</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;unique_stories&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;unique_stories&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">s_dict</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;unique_stories&#39;</span><span class="p">]:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Story</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">s_dict</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">invalid_dict_error</span><span class="p">(</span><span class="n">s_dict</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="c1"># extract any additional 3D Rooms</span>
        <span class="n">room_3ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;room_3ds&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;room_3ds&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">r_dict</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;room_3ds&#39;</span><span class="p">]:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">room_3ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Room</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">r_dict</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">invalid_dict_error</span><span class="p">(</span><span class="n">r_dict</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="c1"># create the Building object</span>
        <span class="n">building</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">],</span> <span class="n">stories</span><span class="p">,</span> <span class="n">room_3ds</span><span class="p">,</span> <span class="n">sort_stories</span><span class="o">=</span><span class="n">sort_stories</span><span class="p">)</span>
        <span class="c1"># assign all other properties that are not a part of initializer</span>
        <span class="k">if</span> <span class="s1">&#39;roof&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s1">&#39;geometry&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">]</span> \
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">][</span><span class="s1">&#39;geometry&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">],</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="n">building</span><span class="o">.</span><span class="n">add_roof_geometry</span><span class="p">(</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;_roofs&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;_roofs&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># secret for filtered roofs</span>
            <span class="n">bldg_roofs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">st_id</span><span class="p">,</span> <span class="n">r_spec</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;_roofs&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">r_spec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">r_spec</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">rf_height</span> <span class="o">=</span> <span class="p">(</span><span class="n">roof</span><span class="o">.</span><span class="n">max_height</span> <span class="o">+</span> <span class="n">roof</span><span class="o">.</span><span class="n">min_height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
                    <span class="n">bldg_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">st_id</span><span class="p">,</span> <span class="n">rf_height</span><span class="p">,</span> <span class="n">roof</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bldg_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">st_id</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="n">building</span><span class="o">.</span><span class="n">_roofs</span> <span class="o">=</span> <span class="n">bldg_roofs</span>
        <span class="k">if</span> <span class="s1">&#39;display_name&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">building</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">building</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;BuildingProperties&#39;</span><span class="p">:</span>
            <span class="n">building</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">_load_extension_attr_from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">building</span></div>


<div class="viewcode-block" id="Building.from_honeybee">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.from_honeybee">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_honeybee</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">conversion_method</span><span class="o">=</span><span class="s1">&#39;AllRoom2D&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a Building from a Honeybee Model.</span>

<span class="sd">        If each Room has a story, these will be used to determine the separation</span>
<span class="sd">        into Dragonfly stories. Otherwise, stories will be auto-generated</span>
<span class="sd">        based on the floor heights of rooms.</span>

<span class="sd">        Args:</span>
<span class="sd">            model: A Honeybee Model to be converted to a Dragonfly Building.</span>
<span class="sd">            conversion_method: Text to indicate how to convert the Honeybee Rooms</span>
<span class="sd">                that have a loss of information when converted to Dragonfly Room2D.</span>
<span class="sd">                Choose from the following options. (Default: AllRoom2D).</span>

<span class="sd">                * AllRoom3D - Any Room with Face geometry that is not perfectly</span>
<span class="sd">                    horizontal or vertical will be left as-is on Building.room_3ds.</span>
<span class="sd">                * ExtrudedOnly - Rooms where all floors are horizontal and walls</span>
<span class="sd">                    are vertical will be imported to Room2D. Sloped roof geometries</span>
<span class="sd">                    will be imported as Dragonfly RoofSpecification with roof</span>
<span class="sd">                    faces being joined across rooms of the same story. Rooms with</span>
<span class="sd">                    sloped floors or slanted walls will be left as-is</span>
<span class="sd">                    on Building.room_3ds.</span>
<span class="sd">                * AllRoom2D - All Honeybee Rooms will be converted to Room2D</span>
<span class="sd">                    regardless of the orientation of their Faces. Rooms with</span>
<span class="sd">                    sloped floors or slanted walls pointing downwards will be</span>
<span class="sd">                    projected into the XY plane to make the Room2D floor plate</span>
<span class="sd">                    geometry. Sloped roofs and slanted walls that point upwards</span>
<span class="sd">                    will be converted to dragonfly RoofSpecification in an attempt</span>
<span class="sd">                    to preserve as much of the original room volume geometry</span>
<span class="sd">                    as possible.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the Building object with all rooms as 3D</span>
        <span class="n">dup_rooms</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">rooms</span><span class="p">]</span>
        <span class="n">bldg</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">room_3ds</span><span class="o">=</span><span class="n">dup_rooms</span><span class="p">)</span>
        <span class="n">bldg</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_display_name</span>
        <span class="c1"># convert the relevant rooms to 2D</span>
        <span class="n">min_diff</span> <span class="o">=</span> <span class="n">parse_distance_string</span><span class="p">(</span><span class="s1">&#39;2m&#39;</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">units</span><span class="p">)</span>
        <span class="n">bldg</span><span class="o">.</span><span class="n">convert_all_room_3ds_to_2d</span><span class="p">(</span>
            <span class="n">conversion_method</span><span class="o">=</span><span class="n">conversion_method</span><span class="p">,</span> <span class="n">min_difference</span><span class="o">=</span><span class="n">min_diff</span><span class="p">,</span>
            <span class="n">tolerance</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">angle_tolerance</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">bldg</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">_reset_adjacencies_from_honeybee</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">tolerance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bldg</span></div>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_room_story_geometry_valid</span><span class="p">(</span><span class="n">rooms</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that a set of Honeybee Rooms have geometry that makes a valid Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            rooms: An array of Honeybee Rooms that will be checked to ensure their</span>
<span class="sd">                geometry makes a valid Story.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the Room geometries make a valid Story. False if they do not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rooms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">flr_hts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">rm</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">z</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">])</span>
        <span class="n">min_flr_to_ceil</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">rm</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">rm</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">z</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">flr_hts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">flr_hts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min_flr_to_ceil</span> <span class="k">else</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unique_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a tuple of only unique Story objects that form the Building.</span>

<span class="sd">        Repeated stories are represented only once but will have a non-unity multiplier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span>

    <span class="nd">@unique_stories</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unique_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">story</span><span class="p">,</span> <span class="n">Story</span><span class="p">),</span> \
                    <span class="s1">&#39;Expected dragonfly Story. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">story</span><span class="p">))</span>
                <span class="n">story</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">floor_height</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_geometry_exists</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unique_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of the unique Room2D objects that form the Building.&quot;&quot;&quot;</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rooms</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a tuple of additional 3D Honeybee Rooms assigned to the Building.</span>

<span class="sd">        These rooms are a part of the Building but are not represented within</span>
<span class="sd">        the unique_stories or unique_room_2ds. Matching the Honeybee Room.story</span>
<span class="sd">        property to the Dragonfly Story.display_name of an object within the</span>
<span class="sd">        unique_stories will effectively place the Honeybee Room on that Story</span>
<span class="sd">        for the purposes of floor_area, exterior_wall_area, etc. However, note</span>
<span class="sd">        that the Honeybee Room.multiplier property takes precedence over</span>
<span class="sd">        whatever multiplier is assigned to the Dragonfly Story that the</span>
<span class="sd">        Room.story may reference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span>

    <span class="nd">@room_3ds</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">Room</span><span class="p">),</span> \
                    <span class="s1">&#39;Expected honeybee Room. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">room</span><span class="p">))</span>
                <span class="n">room</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="c1"># assign stories to any Rooms that lack them</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">story</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]):</span>
                <span class="n">Room</span><span class="o">.</span><span class="n">stories_by_floor_height</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_geometry_exists</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3d_faces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all Face objects for the 3D Honeybee Rooms in the Building.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">face</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">_faces</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3d_apertures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all Aperture objects for the 3D Honeybee Rooms in the Building.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">child_apertures</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">_faces</span><span class="p">:</span>
                <span class="n">child_apertures</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_apertures</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">child_apertures</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3d_doors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all Door objects for the 3D Honeybee Rooms in the Building.&quot;&quot;&quot;</span>
        <span class="n">child_doors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">_faces</span><span class="p">:</span>
                <span class="n">child_doors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">_doors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">child_doors</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3d_shades</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all Shade objects for the 3D Honeybee Rooms in the Building.&quot;&quot;&quot;</span>
        <span class="n">child_shades</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="n">child_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">shades</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                <span class="n">child_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">shades</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ap</span> <span class="ow">in</span> <span class="n">face</span><span class="o">.</span><span class="n">_apertures</span><span class="p">:</span>
                    <span class="n">child_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ap</span><span class="o">.</span><span class="n">shades</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">dr</span> <span class="ow">in</span> <span class="n">face</span><span class="o">.</span><span class="n">_doors</span><span class="p">:</span>
                    <span class="n">child_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">dr</span><span class="o">.</span><span class="n">shades</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">child_shades</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean noting whether this Building has Room2Ds assigned under stories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_room_3ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean noting whether this Building has 3D Honeybee Rooms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_room_2d_plenums</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether this Building&#39;s Room2Ds have plenum depths assigned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">has_plenums</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_2d_story_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a tuple of all Story display_names that have Room2Ds on them.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">display_name</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3d_story_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a tuple of all story display_names that have 3D Honeybee Rooms on them.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">rm</span><span class="o">.</span><span class="n">story</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether any Rooms in the Building have zones assigned.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_zone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_room_2ds</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">zone_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get dictionary of Rooms with zone identifiers as the keys.</span>

<span class="sd">        This is useful for grouping rooms by their Zone for export.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zones</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_room_2ds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">zones</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">zone</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># first room to be found in the zone</span>
                <span class="n">zones</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">zone</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">zones</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">story_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an integer for the number of stories in the building.</span>

<span class="sd">        This includes both the Room2Ds within unique_stories (including the</span>
<span class="sd">        Story.multiplier) as well as all stories defined by the room_3ds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r3d_stories</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">story_2ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2d_story_names</span>
            <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3d_story_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">st</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">story_2ds</span><span class="p">:</span>
                    <span class="n">r3d_stories</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">))</span> <span class="o">+</span> <span class="n">r3d_stories</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">story_count_above_ground</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get an integer for the number of stories above the ground.</span>

<span class="sd">        All stories defined by 3D Rooms are assumed to be above ground.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r3d_stories</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">story_2ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2d_story_names</span>
            <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3d_story_names</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">st</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">story_2ds</span><span class="p">:</span>
                    <span class="n">r3d_stories</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">((</span><span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories_above_ground</span><span class="p">))</span> <span class="o">+</span> \
            <span class="n">r3d_stories</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">unique_stories_above_ground</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a tuple of unique Story objects that are above the ground.</span>

<span class="sd">        A story is considered above the ground if at least one of its Room2Ds</span>
<span class="sd">        has an outdoor boundary condition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">story</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">is_above_ground</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the roof height of the Building as an absolute Z-coordinate.</span>

<span class="sd">        This property will account for the fact that the tallest Room may be a 3D</span>
<span class="sd">        Honeybee Room.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r2_h</span><span class="p">,</span> <span class="n">r3_h</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">r3_h</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">z</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2ds</span><span class="p">:</span>
            <span class="n">last_flr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r2_h</span> <span class="o">=</span> <span class="n">last_flr</span><span class="o">.</span><span class="n">max_room_2d_ceiling_height</span> <span class="o">+</span> \
                <span class="p">(</span><span class="n">last_flr</span><span class="o">.</span><span class="n">floor_to_floor_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">last_flr</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">r2_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r3_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">r2_h</span><span class="p">,</span> <span class="n">r3_h</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">r2_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r2_h</span>
        <span class="k">return</span> <span class="n">r3_h</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">height_above_ground</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a the height difference between the roof and first floor above the ground.</span>

<span class="sd">        This property will account for any 3D Room if they exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r2_h</span><span class="p">,</span> <span class="n">r3_h</span><span class="p">,</span> <span class="n">bldg_h</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">r2_h</span> <span class="o">=</span> <span class="n">bldg_h</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories_above_ground</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min_room_2d_floor_height</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># building completely below ground or no Room2Ds</span>
            <span class="n">r2_h</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">r3_h</span> <span class="o">=</span> <span class="n">bldg_h</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">z</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r2_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r3_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">r2_h</span><span class="p">,</span> <span class="n">r3_h</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">r2_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r2_h</span>
        <span class="k">return</span> <span class="n">r3_h</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">height_from_first_floor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a the height difference between the roof and the bottom-most floor.</span>

<span class="sd">        This property will account for any 3D Room if they exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r2_h</span><span class="p">,</span> <span class="n">r3_h</span><span class="p">,</span> <span class="n">bldg_h</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">r2_h</span> <span class="o">=</span> <span class="n">bldg_h</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min_room_2d_floor_height</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># building completely below ground or no Room2Ds</span>
            <span class="n">r2_h</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">r3_h</span> <span class="o">=</span> <span class="n">bldg_h</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">z</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r2_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r3_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">r2_h</span><span class="p">,</span> <span class="n">r3_h</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">r2_h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r2_h</span>
        <span class="k">return</span> <span class="n">r3_h</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">footprint_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total footprint area of the Building.</span>

<span class="sd">        The footprint is derived from the lowest dragonfly Story of the building</span>
<span class="sd">        unless the Building is composed entirely of 3D Rooms, in which case it</span>
<span class="sd">        is the combined floor area of the Rooms belonging to the lowest story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">floor_area</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># no Room2Ds</span>
            <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">floor_area</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lowest_story_room_3ds</span><span class="p">()</span>
                       <span class="k">if</span> <span class="ow">not</span> <span class="n">r</span><span class="o">.</span><span class="n">exclude_floor_area</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total floor area in the Building.</span>

<span class="sd">        This property uses both the 2D Story multipliers and the 3D Room multipliers</span>
<span class="sd">        to determine the total floor area. It will exclude 3D Rooms with a True</span>
<span class="sd">        exclude_floor_area and Stories with a True is_plenum.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fa_r2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">story</span><span class="o">.</span><span class="n">floor_area</span> <span class="o">*</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span>
                     <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">story</span><span class="o">.</span><span class="n">is_plenum</span><span class="p">])</span>
        <span class="n">fa_r3</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">floor_area</span> <span class="o">*</span> <span class="n">room</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span>
                     <span class="k">if</span> <span class="ow">not</span> <span class="n">room</span><span class="o">.</span><span class="n">exclude_floor_area</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">fa_r2</span> <span class="o">+</span> <span class="n">fa_r3</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">exterior_wall_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total exterior wall area in the Building.</span>

<span class="sd">        This property uses both the 2D Story multipliers and the 3D Room multipliers</span>
<span class="sd">        to determine the total exterior wall area.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ewa_r2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">story</span><span class="o">.</span><span class="n">exterior_wall_area</span> <span class="o">*</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span>
                      <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">])</span>
        <span class="n">ewa_r3</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">exterior_wall_area</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ewa_r2</span> <span class="o">+</span> <span class="n">ewa_r3</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">exterior_aperture_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total exterior wall aperture area in the Building.</span>

<span class="sd">        This property uses both the 2D Story multipliers and the 3D Room multipliers</span>
<span class="sd">        to determine the total exterior wall aperture area. All skylights apertures</span>
<span class="sd">        are excluded.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eaa_r2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">story</span><span class="o">.</span><span class="n">exterior_aperture_area</span> <span class="o">*</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span>
                      <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">])</span>
        <span class="n">eaa_r3</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">exterior_wall_aperture_area</span> <span class="o">*</span> <span class="n">room</span><span class="o">.</span><span class="n">multiplier</span>
                      <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">eaa_r2</span> <span class="o">+</span> <span class="n">eaa_r3</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_face_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total sub-face area in the Building.</span>

<span class="sd">        This property uses both the 2D Story multipliers and the 3D Room multipliers</span>
<span class="sd">        to determine the total sub-face area.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eaa_r2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">story</span><span class="o">.</span><span class="n">sub_face_area</span> <span class="o">*</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span>
                      <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">])</span>
        <span class="n">eaa_r3</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                <span class="n">eaa_r3</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ap</span><span class="o">.</span><span class="n">area</span> <span class="k">for</span> <span class="n">ap</span> <span class="ow">in</span> <span class="n">face</span><span class="o">.</span><span class="n">apertures</span><span class="p">)</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="n">multiplier</span>
                <span class="n">eaa_r3</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">dr</span><span class="o">.</span><span class="n">area</span> <span class="k">for</span> <span class="n">dr</span> <span class="ow">in</span> <span class="n">face</span><span class="o">.</span><span class="n">doors</span><span class="p">)</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="n">multiplier</span>
        <span class="k">return</span> <span class="n">eaa_r2</span> <span class="o">+</span> <span class="n">eaa_r3</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the volume of all the Rooms in the Building.</span>

<span class="sd">        This property uses both the 2D Story multipliers and the 3D Room multipliers</span>
<span class="sd">        to determine the total Building volume.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v_2r</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">story</span><span class="o">.</span><span class="n">volume</span> <span class="o">*</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">])</span>
        <span class="n">v_3r</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">volume</span> <span class="o">*</span> <span class="n">room</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">v_2r</span> <span class="o">+</span> <span class="n">v_3r</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Point2D for the min bounding rectangle vertex in the XY plane.</span>

<span class="sd">        This is useful in calculations to determine if this Building is in proximity</span>
<span class="sd">        to other objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r2_min_pt</span><span class="p">,</span> <span class="n">r3_min_pt</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2ds</span><span class="p">:</span>
            <span class="n">r2_min_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">r3_min_pt</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">_calculate_min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r2_min_pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r3_min_pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point2D</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">r2_min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">r3_min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">r2_min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">r3_min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">r2_min_pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r2_min_pt</span>
        <span class="k">return</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">r3_min_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">r3_min_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Point2D for the max bounding rectangle vertex in the XY plane.</span>

<span class="sd">        This is useful in calculations to determine if this Building is in proximity</span>
<span class="sd">        to other objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r2_max_pt</span><span class="p">,</span> <span class="n">r3_max_pt</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2ds</span><span class="p">:</span>
            <span class="n">r2_max_pt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="n">r3_max_pt</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">_calculate_max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r2_max_pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">r3_max_pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Point2D</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">r2_max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">r3_max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">r2_max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">r3_max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">r2_max_pt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r2_max_pt</span>
        <span class="k">return</span> <span class="n">Point2D</span><span class="p">(</span><span class="n">r3_max_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">r3_max_pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<div class="viewcode-block" id="Building.all_stories">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.all_stories">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">all_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all Story objects that form the Building.</span>

<span class="sd">        The Story objects returned here each have a multiplier of 1 and repeated</span>
<span class="sd">        stories are represented will their own Story object. 3D Rooms are not included</span>
<span class="sd">        in this output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_stories</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">new_story</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
            <span class="n">new_story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">all_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_story</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                    <span class="n">new_story</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
                    <span class="n">new_story</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s1">&#39;Flr</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                    <span class="n">new_story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">m_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_to_floor_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                    <span class="n">new_story</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">m_vec</span><span class="p">)</span>
                    <span class="n">all_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_story</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">all_stories</span></div>


<div class="viewcode-block" id="Building.all_room_2ds">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.all_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">all_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of all Room2D objects that form the Building.&quot;&quot;&quot;</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_stories</span><span class="p">():</span>
            <span class="n">rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rooms</span></div>


<div class="viewcode-block" id="Building.room_2ds_by_display_name">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.room_2ds_by_display_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_2ds_by_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all of the Room2Ds with a given display_name in the Building.&quot;&quot;&quot;</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_room_2ds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">display_name</span> <span class="o">==</span> <span class="n">room_name</span><span class="p">:</span>
                <span class="n">rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rooms</span></div>


<div class="viewcode-block" id="Building.room_3ds_by_display_name">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_display_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3ds_by_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all of the 3D Rooms with a given display_name in the Building.&quot;&quot;&quot;</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">display_name</span> <span class="o">==</span> <span class="n">room_name</span><span class="p">:</span>
                <span class="n">rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rooms</span></div>


<div class="viewcode-block" id="Building.room_3ds_by_story">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_story">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_3ds_by_story</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all of the 3D Honeybee Room objects assigned to a particular story.</span>

<span class="sd">        Args:</span>
<span class="sd">            story_name: Text for the display_name of the Story for which</span>
<span class="sd">                Honeybee Room objects will be returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">story</span> <span class="o">==</span> <span class="n">story_name</span><span class="p">:</span>
                <span class="n">rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rooms</span></div>


<div class="viewcode-block" id="Building.stories_by_display_name">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_display_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">stories_by_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all of the Stories with a given display_name in the Building.&quot;&quot;&quot;</span>
        <span class="n">stories</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">==</span> <span class="n">story_name</span><span class="p">:</span>
                <span class="n">stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stories</span></div>


<div class="viewcode-block" id="Building.stories_by_identifier">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_identifier">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">stories_by_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifiers</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of Story objects in the Building given Story identifiers.&quot;&quot;&quot;</span>
        <span class="n">stories</span><span class="p">,</span> <span class="n">bldg_stories</span> <span class="o">=</span> <span class="p">[],</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span>
        <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">identifiers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">bldg_stories</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">identifier</span><span class="p">:</span>
                    <span class="n">stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;Story &quot;</span><span class="si">{}</span><span class="s1">&quot; was not found in the Building.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">stories</span></div>


<div class="viewcode-block" id="Building.footprint">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.footprint">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">footprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of Face3D objects representing the footprint of the building.</span>

<span class="sd">        The footprint is derived from the lowest story of the building and, if</span>
<span class="sd">        all Room2Ds of this story can be joined into a single continuous polyface,</span>
<span class="sd">        then only one Face3D will be contained in the list output from this method.</span>
<span class="sd">        Otherwise, several Face3Ds may be output.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2ds</span><span class="p">:</span>
            <span class="n">ground_story</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ground_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># no need to create any new geometry</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">ground_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># need a single list of Face3Ds for the whole footprint</span>
                <span class="k">return</span> <span class="n">ground_story</span><span class="o">.</span><span class="n">footprint</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
        <span class="n">foot_rooms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lowest_story_room_3ds</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Room</span><span class="o">.</span><span class="n">grouped_horizontal_boundary</span><span class="p">(</span><span class="n">foot_rooms</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.shade_representation">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.shade_representation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shade_representation</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">exclude_index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">include_room3ds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of honeybee Shade objects representing the building geometry.</span>

<span class="sd">        These can be used to account for this Building&#39;s shade in the simulation of</span>
<span class="sd">        another nearby Building.</span>

<span class="sd">        Args:</span>
<span class="sd">            exclude_index: An optional index for a unique_story to be excluded from</span>
<span class="sd">                the shade representation. If None, all stories will be included</span>
<span class="sd">                in the result. (Default: None).</span>
<span class="sd">            cap: Boolean to note whether the shade representation should be capped</span>
<span class="sd">                with a top face. Usually, this is not necessary to account for</span>
<span class="sd">                blocked sun and is only needed when it&#39;s important to account for</span>
<span class="sd">                reflected sun off of roofs. (Default: False).</span>
<span class="sd">            include_room3ds: Boolean to note whether the 3D Rooms assigned to</span>
<span class="sd">                this Building should be included in the shade representation.</span>
<span class="sd">                Only exterior geometries are included. (Default: False).</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">context_shades</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">exclude_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">story</span><span class="o">.</span><span class="n">is_plenum</span><span class="p">:</span>
                    <span class="n">context_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">shade_representation</span><span class="p">(</span><span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">story</span><span class="o">.</span><span class="n">is_plenum</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">exclude_index</span><span class="p">:</span>
                        <span class="n">context_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">shade_representation</span><span class="p">(</span><span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mult_shd</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">shade_representation_multiplier</span><span class="p">(</span>
                            <span class="n">cap</span><span class="o">=</span><span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
                        <span class="n">context_shades</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">mult_shd</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">include_room3ds</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">boundary_condition</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                        <span class="n">context_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Shade</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">context_shades</span></div>


<div class="viewcode-block" id="Building.suggested_alignment_axes">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.suggested_alignment_axes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">suggested_alignment_axes</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">Vector2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get suggested LineSegment2Ds to be used for this Building.</span>

<span class="sd">        This method will return the most common axes across the Building&#39;s Room2D</span>
<span class="sd">        geometry along with the number of Room2D segments that correspond to each axis.</span>
<span class="sd">        The latter can be used to filter the suggested alignment axes to get</span>
<span class="sd">        only the most common ones across the Building.</span>

<span class="sd">        Args:</span>
<span class="sd">            distance: A number for the distance that will be used in the alignment</span>
<span class="sd">                operation. This will be used to determine the resolution at which</span>
<span class="sd">                alignment axes are generated and evaluated. Smaller alignment</span>
<span class="sd">                distances will result in the generation of more common_axes since</span>
<span class="sd">                a finer resolution can differentiate common that would typically be</span>
<span class="sd">                grouped together. For typical building geometry, an alignment distance</span>
<span class="sd">                of 0.3 meters or 1 foot is typically suitable for eliminating</span>
<span class="sd">                unwanted details while not changing the geometry too much from</span>
<span class="sd">                its original location.</span>
<span class="sd">            direction: A Vector2D object to represent the direction in which the</span>
<span class="sd">                common axes will be evaluated and generated.</span>
<span class="sd">            angle_tolerance: The max angle difference in radians that the Room2D</span>
<span class="sd">                segment direction can differ from the input direction before the</span>
<span class="sd">                segments are not factored into this calculation of common axes.</span>

<span class="sd">            Returns:</span>
<span class="sd">                A tuple with two elements.</span>

<span class="sd">            -   common_axes: A list of LineSegment2D objects for the common</span>
<span class="sd">                axes across the input Room2Ds.</span>

<span class="sd">            -   axis_values: A list of integers that aligns with the common_axes</span>
<span class="sd">                and denotes how many segments of the input Room2D each axis</span>
<span class="sd">                relates to. Higher numbers indicate that that the axis is more</span>
<span class="sd">                commonly aligned across the Room2Ds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">generate_alignment_axes</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unique_room_2ds</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.find_adjacency_gaps">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.find_adjacency_gaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_adjacency_gaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gap_distance</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identify gaps smaller than a gap_distance between this Building&#39;s Room2Ds.</span>

<span class="sd">        All cases where gaps can create failed adjacency solving or failed</span>
<span class="sd">        intersections between adjacent stories will be checked.</span>

<span class="sd">        Args:</span>
<span class="sd">            gap_distance: The maximum distance between two Room2Ds that is considered</span>
<span class="sd">                an adjacency gap. Differences between Room2Ds that are higher than</span>
<span class="sd">                this distance are considered meaningful gaps to be preserved.</span>
<span class="sd">                This value should be higher than the tolerance to be</span>
<span class="sd">                meaningful. (Default: 0.1, suitable for objects in meters).</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values at</span>
<span class="sd">                which point they are considered equivalent. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Point2Ds that note the location of any gaps between this</span>
<span class="sd">            Building&#39;s  Room2Ds, which are larger than the tolerance but less</span>
<span class="sd">            than the gap_distance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gap_points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">prev_mult</span><span class="p">,</span> <span class="n">story_count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prev_mult</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># test this story together with the one below</span>
                <span class="n">room_group</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">room_2ds</span>
                <span class="n">pts</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">find_adjacency_gaps</span><span class="p">(</span><span class="n">room_group</span><span class="p">,</span> <span class="n">gap_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">gap_points</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># lone bottom/middle story to test</span>
                <span class="n">pts</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">find_adjacency_gaps</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">gap_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">gap_points</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">story_count</span><span class="p">:</span>  <span class="c1"># lone top story to test</span>
                <span class="n">pts</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">find_adjacency_gaps</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">gap_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">gap_points</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pts</span><span class="p">)</span>
            <span class="n">prev_mult</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">gap_points</span><span class="p">))</span>  <span class="c1"># remove duplicates in the result</span></div>


<div class="viewcode-block" id="Building.convert_multipliers_to_stories">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.convert_multipliers_to_stories">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">convert_multipliers_to_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert this Building&#39;s stories with non-unity multipliers to geometry.&quot;&quot;&quot;</span>
        <span class="n">exist_story_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">)</span>
        <span class="n">stories_to_add</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_stories</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exist_story_ids</span><span class="p">:</span>
                <span class="n">stories_to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_stories</span><span class="p">(</span><span class="n">stories_to_add</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="Building.add_stories">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.add_stories">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stories</span><span class="p">,</span> <span class="n">add_duplicate_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add additional Story objects to this Building.</span>

<span class="sd">        Using this method will ensure that Stories are ordered according to their</span>
<span class="sd">        floor height as they are added. Also, in the case that Story identifiers</span>
<span class="sd">        match an existing one in this Building, these Stories will be merged</span>
<span class="sd">        together. If add_duplicate_ids is False, Room2Ds that have matching</span>
<span class="sd">        identifiers within a merged Story will not be ignored in order to</span>
<span class="sd">        avoid ID conflicts.</span>

<span class="sd">        Args:</span>
<span class="sd">            stories: A list or tuple of Story objects to be added to this Building.</span>
<span class="sd">            add_duplicate_ids: A boolean to note whether added Room2Ds that</span>
<span class="sd">                have matching identifiers within each Story should be ignored (False)</span>
<span class="sd">                or they should be added to the Story creating an ID collision</span>
<span class="sd">                that can be resolved later (True). (Default: False).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check to be sure all of the input is correct</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">stories</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">story</span><span class="p">,</span> <span class="n">Story</span><span class="p">),</span> \
                <span class="s1">&#39;Expected dragonfly Story. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">story</span><span class="p">))</span>
        <span class="c1"># create the list of new stories, merging stories that have the same identifier</span>
        <span class="n">new_stories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">o_story</span> <span class="ow">in</span> <span class="n">stories</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e_story</span> <span class="ow">in</span> <span class="n">new_stories</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">o_story</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">e_story</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span>
                    <span class="n">e_story</span><span class="o">.</span><span class="n">add_room_2ds</span><span class="p">(</span><span class="n">o_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">add_duplicate_ids</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">o_story</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">new_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o_story</span><span class="p">)</span>
        <span class="c1"># sort the stories by floor level and assign them to this Building</span>
        <span class="n">unique_stories</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">new_stories</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">floor_height</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="n">unique_stories</span></div>


<div class="viewcode-block" id="Building.remove_stories_by_identifier">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.remove_stories_by_identifier">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_stories_by_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifiers</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove Stories from this Building given Story identifiers to remove.&quot;&quot;&quot;</span>
        <span class="n">new_stories</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span>
                       <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">identifiers</span><span class="p">]</span>
        <span class="c1"># raise an error if any of the stories were not matched</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_stories</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">identifiers</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">identifiers</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">identifier</span><span class="p">:</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Story &quot;</span><span class="si">{}</span><span class="s1">&quot; was not found in the Building.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span> <span class="o">=</span> <span class="n">new_stories</span></div>


<div class="viewcode-block" id="Building.add_room_3ds">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.add_room_3ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_room_3ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rooms</span><span class="p">,</span> <span class="n">add_duplicate_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add additional 3D Honeybee Room objects to this Building.</span>

<span class="sd">        Args:</span>
<span class="sd">            stories: A list or tuple of Honeybee Room objects to be added to</span>
<span class="sd">                this building.</span>
<span class="sd">            add_duplicate_ids: A boolean to note whether added Rooms that</span>
<span class="sd">                have matching identifiers within the current Building should be</span>
<span class="sd">                ignored (False) or they should be added to the Building creating</span>
<span class="sd">                an ID collision that can be resolved later (True). (Default: False).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check to be sure that the input is composed of Rooms</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">Room</span><span class="p">),</span> \
                <span class="s1">&#39;Expected honeybee Room. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">room</span><span class="p">))</span>
        <span class="c1"># add the rooms and deal with duplicated IDs appropriately</span>
        <span class="n">new_room_3ds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_duplicate_ids</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">:</span>
                <span class="n">room</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">story</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">story</span> <span class="o">=</span> <span class="s1">&#39;Unknown&#39;</span>
                <span class="n">new_room_3ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exist_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">rm</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exist_set</span><span class="p">:</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
                    <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">story</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">room</span><span class="o">.</span><span class="n">story</span> <span class="o">=</span> <span class="s1">&#39;Unknown&#39;</span>
                    <span class="n">new_room_3ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="c1"># assign the new Rooms to this Building</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_3ds</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.add_roof_geometry">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.add_roof_geometry">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_roof_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roof_geometry</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">overlap_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add roof geometry to the stories of this Building.</span>

<span class="sd">        This method will attempt add each roof geometry to the best Story in the</span>
<span class="sd">        Building by checking for overlaps between the Story&#39;s Room2Ds and the</span>
<span class="sd">        Roof geometry in plan. When a given roof geometry overlaps with several</span>
<span class="sd">        Stories more than the specified overlap_threshold, the top-most Story</span>
<span class="sd">        will get the roof geometry assigned to it unless this top Story has a</span>
<span class="sd">        floor_height above the roof geometry, in which case the next highest story</span>
<span class="sd">        will be checked until a compatible one is found. If a given roof geometry</span>
<span class="sd">        does not overlap with any story geometry, it will be added to the top-most</span>
<span class="sd">        story of the building unless it lies below all of the stories, in which</span>
<span class="sd">        case it will not be assigned to the Building.</span>

<span class="sd">        Args:</span>
<span class="sd">            roof_geometry: An array of Face3D objects representing the geometry</span>
<span class="sd">                of the Roof.</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same. (Default: 0.01, suitable for</span>
<span class="sd">                objects in Meters).</span>
<span class="sd">            overlap_threshold: A number between 0 and 1 for the fraction of a room&#39;s</span>
<span class="sd">                area that must be covered by a given roof geometry for it to be</span>
<span class="sd">                considered overlapping with that room. This is intended to prevent</span>
<span class="sd">                incorrect roof assignment in cases where roofs extend slightly</span>
<span class="sd">                past the room they are intended for.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># convert all roof geometries to clean 2D polygons</span>
        <span class="n">roof_polygons</span><span class="p">,</span> <span class="n">clean_roofs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r_geo</span> <span class="ow">in</span> <span class="n">roof_geometry</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">clean_geo</span> <span class="o">=</span> <span class="n">r_geo</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># degenerate roof geometry to ignore</span>
                <span class="k">continue</span>
            <span class="n">clean_poly</span> <span class="o">=</span> <span class="n">Polygon2D</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">Point2D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">r_geo</span><span class="o">.</span><span class="n">boundary</span><span class="p">))</span>
            <span class="n">clean_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clean_geo</span><span class="p">)</span>
            <span class="n">roof_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clean_poly</span><span class="p">)</span>
        <span class="n">roof_geometry</span> <span class="o">=</span> <span class="n">clean_roofs</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roof_geometry</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># prepare the stories for checking the roofs</span>
        <span class="n">rev_stories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">))</span>
        <span class="n">story_polygons</span><span class="p">,</span> <span class="n">story_heights</span><span class="p">,</span> <span class="n">room_heights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">rev_stories</span><span class="p">:</span>
            <span class="n">room_polygons</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">polygon2d</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span>
            <span class="n">rm_heights</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_height</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span>
            <span class="n">story_polygons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_polygons</span><span class="p">)</span>
            <span class="n">story_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">floor_height</span><span class="p">)</span>
            <span class="n">room_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rm_heights</span><span class="p">)</span>

        <span class="c1"># loop through the roof_geometry and find a compatible story</span>
        <span class="n">proj_dir</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">ot</span> <span class="o">=</span> <span class="n">overlap_threshold</span>
        <span class="n">story_roofs</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">rev_stories</span><span class="p">]</span>  <span class="c1"># holds geo assigned to each story</span>
        <span class="k">for</span> <span class="n">rf_geo</span><span class="p">,</span> <span class="n">rf_poly</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">roof_geometry</span><span class="p">,</span> <span class="n">roof_polygons</span><span class="p">):</span>
            <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">story_heights</span><span class="p">,</span> <span class="n">story_polygons</span><span class="p">,</span> <span class="n">room_heights</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">st_ht</span><span class="p">,</span> <span class="n">story_poly</span><span class="p">,</span> <span class="n">rm_hts</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_obj</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">rf_geo</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">z</span> <span class="o">&lt;</span> <span class="n">st_ht</span><span class="p">:</span>
                    <span class="k">continue</span>  <span class="c1"># roof completely below story; valid assignment impossible</span>
                <span class="n">overlaps_story</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">rm_poly</span><span class="p">,</span> <span class="n">rm_ht</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">story_poly</span><span class="p">,</span> <span class="n">rm_hts</span><span class="p">):</span>
                    <span class="n">poly_rel</span> <span class="o">=</span> <span class="n">rf_poly</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">rm_poly</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">poly_rel</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">rm_poly</span> <span class="o">=</span> <span class="n">rm_poly</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># degenerate room to ignore</span>
                            <span class="k">continue</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">overlap_polys</span> <span class="o">=</span> <span class="n">rf_poly</span><span class="o">.</span><span class="n">boolean_intersect</span><span class="p">(</span><span class="n">rm_poly</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> \
                                <span class="k">if</span> <span class="n">poly_rel</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[</span><span class="n">rm_poly</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                            <span class="k">continue</span>  <span class="c1"># not considered a significant overlap</span>
                        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ply</span><span class="o">.</span><span class="n">area</span> <span class="k">for</span> <span class="n">ply</span> <span class="ow">in</span> <span class="n">overlap_polys</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">rm_poly</span><span class="o">.</span><span class="n">area</span> <span class="o">*</span> <span class="n">ot</span><span class="p">:</span>
                            <span class="k">continue</span>  <span class="c1"># not considered a significant overlap</span>
                        <span class="n">plane_ints</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">ov_poly</span> <span class="ow">in</span> <span class="n">overlap_polys</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">ov_poly</span><span class="p">:</span>
                                <span class="n">b_pt</span> <span class="o">=</span> <span class="n">Point3D</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">rm_ht</span><span class="p">)</span>
                                <span class="n">r_ray</span> <span class="o">=</span> <span class="n">Ray3D</span><span class="p">(</span><span class="n">b_pt</span><span class="p">,</span> <span class="n">proj_dir</span><span class="p">)</span>
                                <span class="n">pi</span> <span class="o">=</span> <span class="n">rf_geo</span><span class="o">.</span><span class="n">plane</span><span class="o">.</span><span class="n">intersect_line_ray</span><span class="p">(</span><span class="n">r_ray</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">pi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">plane_ints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
                                <span class="k">elif</span> <span class="n">rf_geo</span><span class="o">.</span><span class="n">plane</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">b_pt</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                                    <span class="n">plane_ints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_pt</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">plane_ints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">pi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">pi</span> <span class="ow">in</span> <span class="n">plane_ints</span><span class="p">):</span>
                            <span class="n">overlaps_story</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">else</span><span class="p">:</span>  <span class="c1"># roof extends below room; valid assignment impossible</span>
                            <span class="n">overlaps_story</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">break</span>
                <span class="k">if</span> <span class="n">overlaps_story</span><span class="p">:</span>  <span class="c1"># we have found the story to assign the roof geometry</span>
                    <span class="n">story_roofs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rf_geo</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># if it did not overlap any story, just add it to the top</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rf_geo</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">z</span> <span class="o">&gt;</span> <span class="n">story_heights</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># make sure it is not below all stories</span>
                        <span class="n">story_roofs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rf_geo</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">pass</span>  <span class="c1"># no stories in the building; must be made of 3D Room</span>

        <span class="c1"># create the RoofSpecification objects and assign them to the stories</span>
        <span class="k">for</span> <span class="n">story</span><span class="p">,</span> <span class="n">roof_geos</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rev_stories</span><span class="p">,</span> <span class="n">story_roofs</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roof_geos</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># combine the existing roof with the new one</span>
                    <span class="n">new_roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">roof_geos</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">roof_geos</span><span class="p">)</span>
                <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">new_roof</span></div>


<div class="viewcode-block" id="Building.remove_duplicate_roofs">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.remove_duplicate_roofs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_duplicate_roofs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove any roof geometries in the Building that appear more than once.</span>

<span class="sd">        This includes duplicated roof geometries assigned to different stories.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same. (Default: 0.01, suitable for</span>
<span class="sd">                objects in Meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># collect all roof geometries across all stories</span>
        <span class="n">roof_geos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">roof_geos</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
                <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># remove duplicate geometries from the list</span>
        <span class="n">clean_roof_geo</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r_geo</span> <span class="ow">in</span> <span class="n">roof_geos</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">exist_geo</span> <span class="ow">in</span> <span class="n">clean_roof_geo</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">r_geo</span><span class="o">.</span><span class="n">is_geometrically_equivalent</span><span class="p">(</span><span class="n">exist_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
                    <span class="k">break</span>  <span class="c1"># duplicate geometry found</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># the geometry is not yet in the clean list</span>
                <span class="n">clean_roof_geo</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_geo</span><span class="p">)</span>
        <span class="c1"># re-assign the roof geometry to the stories</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_roof_geometry</span><span class="p">(</span><span class="n">clean_roof_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.convert_room_3d_to_2d">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3d_to_2d">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">convert_room_3d_to_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_3d_identifier</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a single 3D Honeybee Room to a Dragonfly Room2D on this Building.</span>

<span class="sd">        This process will add the Room2D to an existing Dragonfly Story on the</span>
<span class="sd">        Building if the Honeybee Room.story matches a Story.display_name on this</span>
<span class="sd">        object. If not, a new Story on this Building will be initialized.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_3d_identifier: The identifier of the 3D honeybee Room on this</span>
<span class="sd">                Building that will be converted to a dragonfly Room2D.</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same. (Default: 0.01, suitable for</span>
<span class="sd">                objects in Meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            The newly-created Room2D object from the converted Room. Will be</span>
<span class="sd">            None if the Honeybee Room is not a closed solid and cannot be</span>
<span class="sd">            converted to a valid Room2D.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the Honeybee Room object to be converted</span>
        <span class="n">hb_room_i</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">)</span>
                     <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">room_3d_identifier</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hb_room_i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;No 3D Honeybee Room with an identifier of &quot;</span><span class="si">{}</span><span class="s1">&quot; was found on &#39;</span>
                <span class="s1">&#39;Building &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room_3d_identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">hb_room_i</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Multiple 3D Honeybee Rooms with an identifier of &quot;</span><span class="si">{}</span><span class="s1">&quot; were found on &#39;</span>
                <span class="s1">&#39;Building &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room_3d_identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">))</span>
        <span class="n">new_room_3ds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span>
        <span class="n">hb_room</span> <span class="o">=</span> <span class="n">new_room_3ds</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">hb_room_i</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c1"># create a Dragonfly Room2D from the Honeybee Room</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">df_room</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">from_honeybee</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># room is not a closed solid</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_3ds</span><span class="p">)</span>
        <span class="c1"># assign the Room2D to an existing Story or create a new one</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">==</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">story</span><span class="p">:</span>
                <span class="n">story</span><span class="o">.</span><span class="n">add_room_2d</span><span class="p">(</span><span class="n">df_room</span><span class="p">)</span>
                <span class="n">rel_story</span> <span class="o">=</span> <span class="n">story</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># a new Story object has to be initialized</span>
            <span class="n">new_story</span> <span class="o">=</span> <span class="n">Story</span><span class="p">(</span><span class="n">clean_string</span><span class="p">(</span><span class="n">hb_room</span><span class="o">.</span><span class="n">story</span><span class="p">),</span> <span class="p">(</span><span class="n">df_room</span><span class="p">,))</span>
            <span class="n">new_story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">story</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_stories</span><span class="p">([</span><span class="n">new_story</span><span class="p">])</span>
            <span class="n">rel_story</span> <span class="o">=</span> <span class="n">new_story</span>
        <span class="c1"># process any roofs</span>
        <span class="n">roof_geos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">roof_ceilings</span><span class="p">:</span>
            <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">face</span><span class="o">.</span><span class="n">tilt</span> <span class="o">&lt;</span> <span class="mi">89</span><span class="p">:</span>
                <span class="n">roof_geos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
        <span class="n">all_geo</span> <span class="o">=</span> <span class="n">rel_story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">roof_geos</span><span class="p">)</span> \
            <span class="k">if</span> <span class="n">rel_story</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">roof_geos</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_geo</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rel_story</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="o">.</span><span class="n">from_geometry_to_join</span><span class="p">(</span><span class="n">all_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df_room</span></div>


<div class="viewcode-block" id="Building.convert_room_3ds_to_2d">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3ds_to_2d">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">convert_room_3ds_to_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_3d_identifiers</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert several 3D Honeybee Rooms on this Building to a Dragonfly Room2Ds.</span>

<span class="sd">        This process will add the Room2Ds to an existing Dragonfly Story on the</span>
<span class="sd">        Building if the Honeybee Room.story matches a Story.display_name on this</span>
<span class="sd">        object. If not, a new Story on this Building will be initialized.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_3d_identifiers: A list of the identifiers for the 3D honeybee</span>
<span class="sd">                Rooms on this Building that will be converted to dragonfly Room2Ds.</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same. (Default: 0.01, suitable for</span>
<span class="sd">                objects in Meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of the newly-created Room2D objects from the converted Rooms.</span>
<span class="sd">            If a given 3D Room is not valid and cannot be converted to a Room2D,</span>
<span class="sd">            it will not be included in this output.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">df_rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r3_id</span> <span class="ow">in</span> <span class="n">room_3d_identifiers</span><span class="p">:</span>
            <span class="c1"># create the new Room2D</span>
            <span class="n">new_r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_room_3d_to_2d</span><span class="p">(</span><span class="n">r3_id</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">new_r2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">df_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_r2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df_rooms</span></div>


<div class="viewcode-block" id="Building.convert_all_room_3ds_to_2d">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.convert_all_room_3ds_to_2d">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">convert_all_room_3ds_to_2d</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">conversion_method</span><span class="o">=</span><span class="s1">&#39;AllRoom2D&#39;</span><span class="p">,</span> <span class="n">min_difference</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
            <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert all 3D Honeybee Rooms on this Building to a Dragonfly Room2Ds.</span>

<span class="sd">        This process will add the Room2Ds to an existing Dragonfly Story on the</span>
<span class="sd">        Building if the Honeybee Room.story matches a Story.display_name on this</span>
<span class="sd">        object. If not, a new Story on this Building will be initialized.</span>

<span class="sd">        Args:</span>
<span class="sd">            conversion_method: Text to indicate how to convert the 3D Rooms</span>
<span class="sd">                that have a loss of information when converted to Dragonfly Room2D.</span>
<span class="sd">                Choose from the following options. (Default: AllRoom2D).</span>

<span class="sd">                * AllRoom3D - Any Room with Face geometry that is not perfectly</span>
<span class="sd">                    horizontal or vertical will be left as-is on Building.room_3ds.</span>
<span class="sd">                * ExtrudedOnly - Rooms where all floors are horizontal and walls</span>
<span class="sd">                    are vertical will be converted to Room2D. Sloped roof geometries</span>
<span class="sd">                    will be converted to Dragonfly RoofSpecification with roof</span>
<span class="sd">                    faces being joined across rooms of the same story. Rooms with</span>
<span class="sd">                    sloped floors or slanted walls will be left as-is</span>
<span class="sd">                    on Building.room_3ds.</span>
<span class="sd">                * AllRoom2D - All Honeybee Rooms will be converted to Room2D</span>
<span class="sd">                    regardless of the orientation of their Faces. Rooms with</span>
<span class="sd">                    sloped floors or slanted walls pointing downwards will be</span>
<span class="sd">                    projected into the XY plane to make the Room2D floor plate</span>
<span class="sd">                    geometry. Sloped roofs and slanted walls that point upwards</span>
<span class="sd">                    will be converted to dragonfly RoofSpecification in an attempt</span>
<span class="sd">                    to preserve as much of the original room volume geometry</span>
<span class="sd">                    as possible.</span>

<span class="sd">            min_difference:  An float value to denote the minimum difference</span>
<span class="sd">                in floor heights that is considered meaningful. This is used to</span>
<span class="sd">                establish stories in the event that the 3D Rooms do not already</span>
<span class="sd">                have them. (Default: 2.0, which is suitable for models in meters).</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same. (Default: 0.01, suitable for</span>
<span class="sd">                objects in Meters).</span>
<span class="sd">            angle_tolerance: The max angle difference in degrees that Face3D normals</span>
<span class="sd">                are allowed to differ from the vertical or horizontal before they</span>
<span class="sd">                are no longer considered as such. (Default: 1 degree).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of the newly-created Room2D objects from the converted Rooms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># verify that the input method is valid</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">conversion_method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;allroom3d&#39;</span><span class="p">,</span> <span class="s1">&#39;extrudedonly&#39;</span><span class="p">,</span> <span class="s1">&#39;allroom2d&#39;</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Building conversion_method &quot;</span><span class="si">{}</span><span class="s1">&quot; is not recognized</span><span class="se">\n</span><span class="s1">Choose from: &#39;</span> \
                <span class="s1">&#39;AllRoom2D, ExtrudedOnly, AllRoom3D.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">conversion_method</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># collect the relevant 3D Rooms to be converted</span>
        <span class="n">new_room_3ds</span><span class="p">,</span> <span class="n">hb_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;allroom3d&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">hb_room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_room_flat_top_extrusion</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">):</span>
                    <span class="n">hb_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hb_room</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_room_3ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hb_room</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;extrudedonly&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">hb_room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_room_sloped_extrusion</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">):</span>
                    <span class="n">hb_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hb_room</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_room_3ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hb_room</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hb_rooms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span>

        <span class="c1"># assign stories if they don&#39;t already exist</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">story</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">hb_rooms</span><span class="p">]):</span>
            <span class="n">Room</span><span class="o">.</span><span class="n">stories_by_floor_height</span><span class="p">(</span><span class="n">hb_rooms</span><span class="o">.</span><span class="n">min_difference</span><span class="p">)</span>

        <span class="c1"># group the rooms by story and create dragonfly Stories</span>
        <span class="n">story_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">hb_rooms</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">story_dict</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">story</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">story_dict</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">story</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="p">]</span>

        <span class="c1"># evaluate floor heights to see if stories should be split</span>
        <span class="n">removed_flrs</span><span class="p">,</span> <span class="n">new_flrs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">s_id</span><span class="p">,</span> <span class="n">rms</span> <span class="ow">in</span> <span class="n">story_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_story_geometry_valid</span><span class="p">(</span><span class="n">rms</span><span class="p">):</span>
                <span class="n">rm_grps</span><span class="p">,</span> <span class="n">flr_hts</span> <span class="o">=</span> <span class="n">Room</span><span class="o">.</span><span class="n">group_by_floor_height</span><span class="p">(</span><span class="n">rms</span><span class="p">,</span> <span class="n">min_difference</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">grp</span><span class="p">,</span> <span class="n">ht</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rm_grps</span><span class="p">,</span> <span class="n">flr_hts</span><span class="p">):</span>
                    <span class="n">new_flrs</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s_id</span><span class="p">,</span> <span class="n">ht</span><span class="p">)]</span> <span class="o">=</span> <span class="n">grp</span>
                <span class="n">removed_flrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r_flr</span> <span class="ow">in</span> <span class="n">removed_flrs</span><span class="p">:</span>
            <span class="n">story_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">r_flr</span><span class="p">)</span>
        <span class="n">story_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_flrs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s_id</span><span class="p">,</span> <span class="n">rms</span> <span class="ow">in</span> <span class="n">story_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">rms</span><span class="p">:</span>
                <span class="n">rm</span><span class="o">.</span><span class="n">story</span> <span class="o">=</span> <span class="n">s_id</span>

        <span class="c1"># convert the relevant 3D Rooms to Room2D</span>
        <span class="n">df_rooms</span><span class="p">,</span> <span class="n">roof_dict</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">hb_room</span> <span class="ow">in</span> <span class="n">hb_rooms</span><span class="p">:</span>
            <span class="c1"># create a Dragonfly Room2D from the Honeybee Room</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">df_room</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">from_honeybee</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># invalid Honeybee Room that is not a closed solid</span>
                <span class="n">new_room_3ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hb_room</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="c1"># extract the relevant roof and skylight geometries</span>
            <span class="n">rfs</span><span class="p">,</span> <span class="n">skylights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;extrudedonly&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">roof_ceilings</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">angle_tolerance</span> <span class="o">&lt;</span> <span class="n">face</span><span class="o">.</span><span class="n">tilt</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">angle_tolerance</span><span class="p">:</span>
                        <span class="n">rfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;allroom2d&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">angle_tolerance</span> <span class="o">&lt;</span> <span class="n">face</span><span class="o">.</span><span class="n">tilt</span> <span class="o">&lt;</span> <span class="mi">90</span> <span class="o">-</span> <span class="n">angle_tolerance</span><span class="p">:</span>
                        <span class="n">rfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">sub_faces</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">Wall</span><span class="p">):</span>
                            <span class="n">skylights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="n">DetailedSkylights</span><span class="o">.</span><span class="n">from_honeybee</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">sub_faces</span><span class="p">))</span>
            <span class="c1"># assign the roof geometries to a dictionary to keep track of them</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rfs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">roof_dict</span><span class="p">[</span><span class="n">hb_room</span><span class="o">.</span><span class="n">story</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">rfs</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">roof_dict</span><span class="p">[</span><span class="n">hb_room</span><span class="o">.</span><span class="n">story</span><span class="p">]</span> <span class="o">=</span> <span class="n">rfs</span>
            <span class="c1"># assign any skylights to the Room2D</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">skylights</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">skylights</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">new_sky_light</span> <span class="o">=</span> <span class="n">skylights</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_polys</span> <span class="o">=</span> <span class="n">skylights</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">polygons</span>
                    <span class="n">new_is_dr</span> <span class="o">=</span> <span class="n">skylights</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">are_doors</span>
                    <span class="k">for</span> <span class="n">sl</span> <span class="ow">in</span> <span class="n">skylights</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="n">new_polys</span> <span class="o">+=</span> <span class="n">sl</span><span class="o">.</span><span class="n">polygons</span>
                        <span class="n">new_is_dr</span> <span class="o">+=</span> <span class="n">sl</span><span class="o">.</span><span class="n">are_doors</span>
                    <span class="n">new_sky_light</span> <span class="o">=</span> <span class="n">DetailedSkylights</span><span class="p">(</span><span class="n">new_polys</span><span class="p">,</span> <span class="n">new_is_dr</span><span class="p">)</span>
                <span class="n">df_room</span><span class="o">.</span><span class="n">skylight_parameters</span> <span class="o">=</span> <span class="n">new_sky_light</span>
            <span class="c1"># assign the Room2D to an existing Story or create a new one</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">==</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">story</span><span class="p">:</span>
                    <span class="n">story</span><span class="o">.</span><span class="n">add_room_2d</span><span class="p">(</span><span class="n">df_room</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># a new Story object has to be initialized</span>
                <span class="n">new_story</span> <span class="o">=</span> <span class="n">Story</span><span class="p">(</span><span class="n">clean_string</span><span class="p">(</span><span class="n">hb_room</span><span class="o">.</span><span class="n">story</span><span class="p">),</span> <span class="p">(</span><span class="n">df_room</span><span class="p">,))</span>
                <span class="n">new_story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">story</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_stories</span><span class="p">([</span><span class="n">new_story</span><span class="p">])</span>
            <span class="n">df_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_room</span><span class="p">)</span>

        <span class="c1"># build roof specifications from joined versions of the roofs</span>
        <span class="k">for</span> <span class="n">story_name</span><span class="p">,</span> <span class="n">roof_geos</span> <span class="ow">in</span> <span class="n">roof_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">==</span> <span class="n">story_name</span><span class="p">:</span>
                    <span class="n">all_geo</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">roof_geos</span><span class="p">)</span> \
                        <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">roof_geos</span>
                    <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="o">.</span><span class="n">from_geometry_to_join</span><span class="p">(</span>
                        <span class="n">all_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="k">break</span>

        <span class="c1"># reset the 3D Rooms on this object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_3ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">df_rooms</span></div>


<div class="viewcode-block" id="Building.match_and_replace_room_2d_floor_geometry">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.match_and_replace_room_2d_floor_geometry">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">match_and_replace_room_2d_floor_geometry</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">base_story_id</span><span class="p">,</span> <span class="n">replaced_story_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">overlap_percent</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">projection_distance</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">remove_unmatched</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace Room2D floor_geometry on stories using a base story in the building.</span>

<span class="sd">        This method is intended for the case that several stories with repeated</span>
<span class="sd">        room geometry exist over the Building height and all stories have been</span>
<span class="sd">        explicitly modeled with unique room names and possibly unique window geometry.</span>
<span class="sd">        However, only one story represents the clean room floor plates such that</span>
<span class="sd">        a desired building can be achieved by simply replacing the room geometry</span>
<span class="sd">        of the other stories with that of the base story.</span>

<span class="sd">        All Room2D names and properties of the replaced stories will be preserved</span>
<span class="sd">        through this method. Furthermore, windows and boundary conditions will</span>
<span class="sd">        be preserved if they do not differ by more than the projection_distance</span>
<span class="sd">        between the base story and the replaced stories.</span>

<span class="sd">        Args:</span>
<span class="sd">            base_story_id: Text for the identifier of the Story in this building</span>
<span class="sd">                that represents the clean Room2D geometry to be used as a base</span>
<span class="sd">                for all of the stories to be replaced.</span>
<span class="sd">            replaced_story_ids: An optional list of text strings for the identifiers</span>
<span class="sd">                of Stories to have their Room2D geometries replaced with the</span>
<span class="sd">                base Story geometry. If None, the Room2D geometries of all Stories</span>
<span class="sd">                in the Building with be replaced. (Default: None).</span>
<span class="sd">            overlap_percent: A number between 1 and 99 that represents the</span>
<span class="sd">                percentage of total floor area overlap between a given base room</span>
<span class="sd">                and a room on the replaced stories at which point the room</span>
<span class="sd">                will be replaced with the geometry on the base story. Typically,</span>
<span class="sd">                50% should be considered the lowest and most lenient overlap</span>
<span class="sd">                given that lower numbers have the potential to match a room to</span>
<span class="sd">                two rooms in the base story, often yielding unexpected results.</span>
<span class="sd">                However, this method will still run with lower overlap thresholds.</span>
<span class="sd">                Setting this value to 100 means that rooms are only replaced if</span>
<span class="sd">                they perfectly match the base story geometry, effectively causing</span>
<span class="sd">                this method to make no changes. (Default: 50).</span>
<span class="sd">            projection_distance: A number to be used to project the original window</span>
<span class="sd">                and door geometry back onto the wall segments of each room after</span>
<span class="sd">                the floor geometry has been replaced. If the windows/doors on</span>
<span class="sd">                the original geometry do not differ by more than the projection_distance</span>
<span class="sd">                between the base story and the replaced stories, the original</span>
<span class="sd">                windows will be preserved. Set to zero to have windows/doors</span>
<span class="sd">                preserved only if there is no change between the base story and</span>
<span class="sd">                the replaced story Room2D wall segment. (Default: 0).</span>
<span class="sd">            remove_unmatched: A boolean to note whether Room2Ds on the replaced</span>
<span class="sd">                Stories that are not matched to any Room2D on the base Story should</span>
<span class="sd">                be removed from the Building (True) or whether they should simply</span>
<span class="sd">                be left as they are (False). (Default: False).</span>
<span class="sd">            tolerance: The minimum difference in coordinate values for them</span>
<span class="sd">                to be considered distinct from one another. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">            angle_tolerance: The max angle difference in degrees that wall segments</span>
<span class="sd">                and sub-faces can differ from one another in order for them to</span>
<span class="sd">                be re-projected onto the new floor geometry. (Default: 1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the base story and stories to be replaced</span>
        <span class="n">base_story</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stories_by_identifier</span><span class="p">([</span><span class="n">base_story_id</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">replaced_story_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">replaced_stories</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stories_by_identifier</span><span class="p">(</span><span class="n">replaced_story_ids</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">replaced_stories</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span>
                                <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">identifier</span> <span class="o">!=</span> <span class="n">base_story_id</span><span class="p">]</span>
        <span class="n">overlap_frac</span> <span class="o">=</span> <span class="n">overlap_percent</span> <span class="o">/</span> <span class="mi">100</span>
        <span class="n">b_threshes</span> <span class="o">=</span> <span class="p">[</span><span class="n">b_room</span><span class="o">.</span><span class="n">floor_area</span> <span class="o">*</span> <span class="n">overlap_frac</span> <span class="k">for</span> <span class="n">b_room</span> <span class="ow">in</span> <span class="n">base_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">]</span>

        <span class="c1"># loop through each of the replaced stories and match rooms</span>
        <span class="n">matched_stories</span><span class="p">,</span> <span class="n">matched_areas</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r_story</span> <span class="ow">in</span> <span class="n">replaced_stories</span><span class="p">:</span>
            <span class="n">matched_rooms</span><span class="p">,</span> <span class="n">matched_a</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">r_room</span> <span class="ow">in</span> <span class="n">r_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="n">match_r</span><span class="p">,</span> <span class="n">match_a</span> <span class="o">=</span> <span class="p">[],</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">b_room</span><span class="p">,</span> <span class="n">b_thresh</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">base_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">b_threshes</span><span class="p">):</span>
                    <span class="n">overlap</span> <span class="o">=</span> <span class="n">b_room</span><span class="o">.</span><span class="n">overlap_area</span><span class="p">(</span><span class="n">r_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">overlap</span> <span class="o">&gt;=</span> <span class="n">b_thresh</span><span class="p">:</span>
                        <span class="n">m_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r_room</span><span class="o">.</span><span class="n">floor_height</span> <span class="o">-</span> <span class="n">b_room</span><span class="o">.</span><span class="n">floor_height</span><span class="p">)</span>
                        <span class="n">match_r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">m_vec</span><span class="p">))</span>
                        <span class="n">match_a</span> <span class="o">+=</span> <span class="n">overlap</span>
                <span class="n">matched_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match_r</span><span class="p">)</span>
                <span class="n">matched_a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match_a</span><span class="p">)</span>
            <span class="n">matched_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matched_rooms</span><span class="p">)</span>
            <span class="n">matched_areas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matched_a</span><span class="p">)</span>

        <span class="c1"># replace the rooms with the correct match</span>
        <span class="n">final_matched_stories</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">replaced_stories</span><span class="p">,</span> <span class="n">matched_stories</span><span class="p">,</span> <span class="n">matched_areas</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r_story</span><span class="p">,</span> <span class="n">matched_rooms</span><span class="p">,</span> <span class="n">matched_a</span> <span class="ow">in</span> <span class="n">zip_obj</span><span class="p">:</span>
            <span class="n">final_matched_rooms</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">r_room</span><span class="p">,</span> <span class="n">match_r</span><span class="p">,</span> <span class="n">area</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">r_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">matched_rooms</span><span class="p">,</span> <span class="n">matched_a</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">match_r</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># room was not matched</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">area</span> <span class="o">/</span> <span class="n">r_room</span><span class="o">.</span><span class="n">floor_area</span> <span class="o">&gt;</span> <span class="n">overlap_frac</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">match_r</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">r_room</span><span class="o">.</span><span class="n">replace_floor_geometry</span><span class="p">(</span>
                            <span class="n">match_r</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">projection_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">match_r</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">joined_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">join_coplanar_faces</span><span class="p">(</span><span class="n">match_r</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                        <span class="n">r_geo</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">joined_geo</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">area</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">r_room</span><span class="o">.</span><span class="n">replace_floor_geometry</span><span class="p">(</span>
                            <span class="n">r_geo</span><span class="p">,</span> <span class="n">projection_distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">)</span>
                <span class="n">final_matched_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_room</span><span class="p">)</span>
            <span class="n">final_matched_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">final_matched_rooms</span><span class="p">)</span>

        <span class="c1"># remove unmatched if requested</span>
        <span class="k">if</span> <span class="n">remove_unmatched</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">r_story</span><span class="p">,</span> <span class="n">matched_rooms</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">replaced_stories</span><span class="p">,</span> <span class="n">final_matched_stories</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matched_rooms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># remove the whole story</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_stories_by_identifier</span><span class="p">([</span><span class="n">r_story</span><span class="o">.</span><span class="n">identifier</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">r_story</span><span class="o">.</span><span class="n">room_2ds</span> <span class="o">=</span> <span class="n">matched_rooms</span></div>


<div class="viewcode-block" id="Building.add_prefix">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.add_prefix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the object identifier and all child objects by inserting a prefix.</span>

<span class="sd">        This is particularly useful in workflows where you duplicate and edit</span>
<span class="sd">        a starting object and then want to combine it with the original object</span>
<span class="sd">        into one Model (like making a model of repeating buildings) since all objects</span>
<span class="sd">        within a Model must have unique identifiers.</span>

<span class="sd">        Args:</span>
<span class="sd">            prefix: Text that will be inserted at the start of this object&#39;s</span>
<span class="sd">                (and child objects&#39;) identifier and display_name. It is recommended</span>
<span class="sd">                that this prefix be short to avoid maxing out the 100 allowable</span>
<span class="sd">                characters for dragonfly identifiers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span> <span class="o">=</span> <span class="n">clean_string</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.automatically_zone">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.automatically_zone">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">automatically_zone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orient_count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">north_vector</span><span class="o">=</span><span class="n">Vector2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                           <span class="n">attr_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically group the rooms of this Building into zones.</span>

<span class="sd">        Relevant properties that are used to group Room2Ds into zones include story,</span>
<span class="sd">        orientation, and additional attributes (like programs).</span>

<span class="sd">        Args:</span>
<span class="sd">            orient_count: An optional positive integer to set the number of orientation</span>
<span class="sd">                groups to use for zoning. For example, setting this to 4 will result</span>
<span class="sd">                in zones being established based on the four orientations (North,</span>
<span class="sd">                East, South, West). If None, the maximum number of unique groups</span>
<span class="sd">                will be used.</span>
<span class="sd">            north_vector: A ladybug_geometry Vector2D for the north direction.</span>
<span class="sd">                Default is the Y-axis (0, 1).</span>
<span class="sd">            attr_name: A string of an attribute that the input Room2Ds should have.</span>
<span class="sd">                This can have &#39;.&#39; that separate the nested attributes from one another.</span>
<span class="sd">                For example, &#39;properties.energy.program_type&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">automatically_zone</span><span class="p">(</span><span class="n">orient_count</span><span class="p">,</span> <span class="n">north_vector</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">Room</span><span class="o">.</span><span class="n">automatically_zone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">,</span> <span class="n">orient_count</span><span class="p">,</span> <span class="n">north_vector</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.sort_stories">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.sort_stories">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">sort_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sort the stories assigned to this Building by their floor heights&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> \
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">floor_height</span><span class="p">))</span></div>


<div class="viewcode-block" id="Building.separate_top_bottom_floors">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.separate_top_bottom_floors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">separate_top_bottom_floors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Separate top/bottom Stories with non-unity multipliers into their own Stories.</span>

<span class="sd">        The resulting first and last Stories will each have a multiplier of 1 and</span>
<span class="sd">        duplicated middle Stories will be added as needed. This method also</span>
<span class="sd">        automatically assigns the first story Room2Ds to have a ground contact</span>
<span class="sd">        floor and the top story Room2Ds to have an outdoor-exposed roof.</span>

<span class="sd">        This is particularly helpful when using to_honeybee workflows with</span>
<span class="sd">        multipliers but one wants to account for the heat exchange of the top</span>
<span class="sd">        or bottom floors with the ground or outdoors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># do not do anything if the Building has no 2D Stories</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2ds</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># empty tuples in case no floors are added</span>
        <span class="n">new_ground_floor</span><span class="p">,</span> <span class="n">new_top_floor</span> <span class="o">=</span> <span class="p">(),</span> <span class="p">()</span>

        <span class="c1"># ensure that the bottom floor is unique</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">story</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">new_ground_floor</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_separated_ground_floor</span><span class="p">(</span><span class="n">story</span><span class="p">),)</span>
            <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">story</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_to_floor_height</span><span class="p">))</span>  <span class="c1"># 2nd floor</span>

        <span class="c1"># ensure that the top floor is unique</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">story</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">new_top_floor</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_separated_top_floor</span><span class="p">(</span><span class="n">story</span><span class="p">),)</span>
            <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="c1"># set the unique stories to include any new top and bottom floors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="n">new_ground_floor</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">+</span> <span class="n">new_top_floor</span>

        <span class="c1"># assign the is_ground_contact and is_top_exposed properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ground_contact</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_top_exposed</span><span class="p">()</span></div>


<div class="viewcode-block" id="Building.separate_mid_floors">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.separate_mid_floors">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">separate_mid_floors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Separate all Stories with non-unity multipliers into two or three Stories.</span>

<span class="sd">        This method automatically assigns the first story Room2Ds to have a ground</span>
<span class="sd">        contact floor and will separate the top story of each unique story to</span>
<span class="sd">        have outdoor-exposed roofs when no Room2Ds are sensed above a given room.</span>

<span class="sd">        This is particularly helpful when using to_honeybee workflows with</span>
<span class="sd">        multipliers but one wants to account for the heat exchange of the top</span>
<span class="sd">        or bottom floors with the ground or outdoors.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The tolerance that will be used to compute the point within</span>
<span class="sd">                the floor boundary that is used to check whether there is geometry</span>
<span class="sd">                above each Room2D. It is recommended that this number not be less</span>
<span class="sd">                than 1 centimeter to avoid long computation times. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># do not do anything if the Building has no 2D Stories</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2ds</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># ensure that the bottom floor is unique</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">story</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">new_ground_floor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_separated_ground_floor</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
            <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">story</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_to_floor_height</span><span class="p">))</span>  <span class="c1"># 2nd floor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_ground_floor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">new_ground_floor</span><span class="o">.</span><span class="n">set_top_exposed_by_story_above</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="c1"># ensure that the top floor is unique</span>
        <span class="n">new_top_floors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">new_top_floor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_separated_top_floor</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
                <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_top_floor</span><span class="o">.</span><span class="n">set_top_exposed_by_story_above</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># this is the last story</span>
                    <span class="n">new_top_floor</span><span class="o">.</span><span class="n">set_top_exposed</span><span class="p">()</span>
                <span class="n">new_top_floors</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">story</span><span class="p">,</span> <span class="n">new_top_floor</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">story</span><span class="o">.</span><span class="n">set_top_exposed</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">story</span><span class="o">.</span><span class="n">set_top_exposed_by_story_above</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">new_top_floors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>

        <span class="c1"># set the unique stories to include any new top and bottom floors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_ground_floor</span><span class="p">,)</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_top_floors</span><span class="p">)</span>

        <span class="c1"># assign the is_ground_contact and is_top_exposed properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ground_contact</span><span class="p">()</span></div>


<div class="viewcode-block" id="Building.make_basement_stories">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.make_basement_stories">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_basement_stories</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basement_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">remove_windows</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make the lowest unique Story(s) of this Building into basements.</span>

<span class="sd">        This involves setting the outdoor walls of the basement stories to all</span>
<span class="sd">        have ground boundary conditions and setting the is_ground_contact</span>
<span class="sd">        property on all relevant Room2Ds that are a basement or have a basement</span>
<span class="sd">        story below them.</span>

<span class="sd">        This method will also ensure that all floors above the basement have</span>
<span class="sd">        outdoor boundary conditions.</span>

<span class="sd">        Args:</span>
<span class="sd">            basement_count: A positive integer for the number of unique Stories</span>
<span class="sd">                on this Building to make into basements. (Default: 1).</span>
<span class="sd">            remove_windows: Boolean to note whether basement Room2D segments</span>
<span class="sd">                with windows should have their outdoor boundary conditions and</span>
<span class="sd">                windows kept (True) or whether the windows should be removed</span>
<span class="sd">                in order to assign a ground boundary condition to all</span>
<span class="sd">                walls (False). (Default: False).</span>
<span class="sd">            tolerance: The tolerance that will be used to compute the point within</span>
<span class="sd">                the floor boundary that is used to check whether there is geometry</span>
<span class="sd">                below each Room2D. It is recommended that this number not be less</span>
<span class="sd">                than 1 centimeter to avoid long computation times. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check that the basement count is appropriate</span>
        <span class="k">if</span> <span class="n">basement_count</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">):</span>
            <span class="n">basement_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="c1"># assign underground walls to all basement stories</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[:</span><span class="n">basement_count</span><span class="p">]:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">make_underground</span><span class="p">(</span><span class="n">remove_windows</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">basement_count</span><span class="p">:]:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">make_aboveground</span><span class="p">()</span>
            <span class="n">story</span><span class="o">.</span><span class="n">set_ground_contact</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># set the ground contact property for basement Room2Ds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ground_contact</span><span class="p">()</span>
        <span class="n">max_gnd_count</span> <span class="o">=</span> <span class="n">basement_count</span> <span class="o">+</span> <span class="mi">1</span> \
            <span class="k">if</span> <span class="n">basement_count</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="k">else</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="n">max_gnd_count</span><span class="p">]):</span>
                <span class="n">story_below</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">story</span><span class="o">.</span><span class="n">set_ground_contact_by_story_below</span><span class="p">(</span><span class="n">story_below</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.split_room_2d_vertically">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.split_room_2d_vertically">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split_room_2d_vertically</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_id</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split a Room2D in this Building vertically if it crosses multiple stories.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_id: The identifier of a Room2D within this Building which will</span>
<span class="sd">                be split vertically with the Stories above it.</span>
<span class="sd">            tolerance: The tolerance to be used for determining whether the Room2D</span>
<span class="sd">                should be split. Default: 0.01, suitable for objects in meters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all the new rooms created by running the method. This</span>
<span class="sd">            can be used to post-process the rooms for attributes like adjacency</span>
<span class="sd">            within the Story they are placed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># loop through the stories of the model and find the Room2D</span>
        <span class="n">found_room</span><span class="p">,</span> <span class="n">split_heights</span><span class="p">,</span> <span class="n">split_stories</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">found_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">flr_hgt</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">median_room2d_floor_height</span>
                <span class="k">if</span> <span class="n">found_room</span><span class="o">.</span><span class="n">ceiling_height</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="o">&gt;</span> <span class="n">flr_hgt</span><span class="p">:</span>
                    <span class="n">split_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flr_hgt</span><span class="p">)</span>
                    <span class="n">split_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rm</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">room_id</span><span class="p">:</span>
                        <span class="n">found_room</span> <span class="o">=</span> <span class="n">rm</span>
                        <span class="k">break</span>

        <span class="c1"># check if the room was found and whether it should be split</span>
        <span class="k">if</span> <span class="n">found_room</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;No Room2D with the identifier &quot;</span><span class="si">{}</span><span class="s1">&quot; was found in the &#39;</span> \
                <span class="s1">&#39;Building.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room_id</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_heights</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>  <span class="c1"># no splitting to be done</span>

        <span class="c1"># split the room across the stories</span>
        <span class="n">new_rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">split_hgt</span><span class="p">,</span> <span class="n">add_story</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">split_heights</span><span class="p">,</span> <span class="n">split_stories</span><span class="p">)):</span>
            <span class="n">new_room</span> <span class="o">=</span> <span class="n">found_room</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_split</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">new_room</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">shift_dist</span> <span class="o">=</span> <span class="n">split_hgt</span> <span class="o">-</span> <span class="n">found_room</span><span class="o">.</span><span class="n">floor_height</span>
            <span class="n">move_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">shift_dist</span><span class="p">)</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">move_vec</span><span class="p">)</span>  <span class="c1"># move the room to the correct floor height</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_ceil_hgt</span> <span class="o">=</span> <span class="n">split_heights</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">new_room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">new_room</span><span class="o">.</span><span class="n">has_ceiling</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># last story of the split list</span>
                <span class="n">new_ceil_hgt</span> <span class="o">=</span> <span class="n">found_room</span><span class="o">.</span><span class="n">ceiling_height</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span> <span class="o">=</span> <span class="n">new_ceil_hgt</span> <span class="o">-</span> <span class="n">new_room</span><span class="o">.</span><span class="n">floor_height</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">is_ground_contact</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">has_floor</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">new_w_par</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># shift all of the window parameters for the room</span>
            <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">seg</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">found_room</span><span class="o">.</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">found_room</span><span class="o">.</span><span class="n">floor_segments</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">_AsymmetricBase</span><span class="p">):</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wp</span><span class="o">.</span><span class="n">shift_vertically</span><span class="p">(</span><span class="o">-</span><span class="n">shift_dist</span><span class="p">)</span>
                    <span class="n">wp</span><span class="o">.</span><span class="n">adjust_for_segment</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="n">new_ceil_hgt</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="n">new_w_par</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">window_parameters</span> <span class="o">=</span> <span class="n">new_w_par</span>
            <span class="n">add_story</span><span class="o">.</span><span class="n">add_room_2d</span><span class="p">(</span><span class="n">new_room</span><span class="p">)</span>
            <span class="n">new_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_room</span><span class="p">)</span>

        <span class="c1"># change the height of the original Room2D so that it doesn&#39;t overlap new rooms</span>
        <span class="n">found_room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span> <span class="o">=</span> <span class="n">split_heights</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">found_room</span><span class="o">.</span><span class="n">floor_height</span>
        <span class="n">found_room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">found_room</span><span class="o">.</span><span class="n">has_ceiling</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">new_w_par</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># shift all of the window parameters for the room</span>
        <span class="k">for</span> <span class="n">wp</span><span class="p">,</span> <span class="n">seg</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">found_room</span><span class="o">.</span><span class="n">window_parameters</span><span class="p">,</span> <span class="n">found_room</span><span class="o">.</span><span class="n">floor_segments</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span> <span class="n">_AsymmetricBase</span><span class="p">):</span>
                <span class="n">wp</span><span class="o">.</span><span class="n">adjust_for_segment</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="n">found_room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
            <span class="n">new_w_par</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>
        <span class="n">found_room</span><span class="o">.</span><span class="n">window_parameters</span> <span class="o">=</span> <span class="n">new_w_par</span>

        <span class="c1"># move any roofs if need be</span>
        <span class="k">if</span> <span class="n">found_room</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">kept_roofs</span><span class="p">,</span> <span class="n">moved_roofs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="n">roof</span> <span class="o">=</span> <span class="n">found_room</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span>
            <span class="k">for</span> <span class="n">r_geo</span><span class="p">,</span> <span class="n">r_poly</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span> <span class="n">roof</span><span class="o">.</span><span class="n">boundary_geometry_2d</span><span class="p">):</span>
                <span class="n">room_poly</span> <span class="o">=</span> <span class="n">found_room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span>
                <span class="k">if</span> <span class="n">room_poly</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">r_poly</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">moved_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_geo</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">kept_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_geo</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">moved_roofs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kept_roofs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">found_room</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">kept_roofs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">found_room</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">new_rooms</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">new_rooms</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">moved_roofs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_geo</span> <span class="o">=</span> <span class="n">new_rooms</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">geometry</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">moved_roofs</span><span class="p">)</span>
                    <span class="n">new_rooms</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">new_geo</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_rooms</span></div>


<div class="viewcode-block" id="Building.separate_room_2d_plenums">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.separate_room_2d_plenums">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">separate_room_2d_plenums</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">room_ids</span><span class="p">,</span> <span class="n">target_floor_to_ceiling</span><span class="p">,</span> <span class="n">floor_plenum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Separate a part of Room2D into ceiling (or floor) plenums.</span>

<span class="sd">        This method assumes that the Room2Ds&#39; floor-to-ceiling-height is actually</span>
<span class="sd">        set to the floor-to-floor height. So this method reduces the floor-to-ceiling</span>
<span class="sd">        height of these rooms to what it is actually supposed to be and then</span>
<span class="sd">        adds a new ceiling (or floor) plenum Story to the Building with the</span>
<span class="sd">        plenums modeled as explicit Room2Ds. If an existing plenum Story of the</span>
<span class="sd">        correct type is found above (or below) the Room2D for which a plenum</span>
<span class="sd">        was split off, the new Room2D will get added to that existing Story</span>
<span class="sd">        instead of a new Story being created.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_ids: A list of identifiers of Room2Ds within this Building, which</span>
<span class="sd">                will be split vertically to create a new plenum above (or below)</span>
<span class="sd">                the rooms.</span>
<span class="sd">            target_floor_to_ceiling: A number in model units for the desired</span>
<span class="sd">                floor-to-ceiling height of the final Room2Ds (assuming that this</span>
<span class="sd">                Room2D&#39;s current floor-to-ceiling height is actually the</span>
<span class="sd">                floor-to-floor height). If the current Room2D&#39;s floor-to-ceiling</span>
<span class="sd">                height is less than the input value, the floor-to-ceiling height</span>
<span class="sd">                will be reduced and a new ceiling or floor plenum created. This</span>
<span class="sd">                can also be a list of target_floor_to_ceiling heights that align</span>
<span class="sd">                with the input room_ids.</span>
<span class="sd">            floor_plenum: A boolean to note whether the plenum to be separated is</span>
<span class="sd">                a floor plenum for this current Room2D (in which case it is</span>
<span class="sd">                subtracted from the bottom) or it is a ceiling plenum (in which</span>
<span class="sd">                case it is subtracted from the top). (Default: False).</span>
<span class="sd">            tolerance: The maximum difference between point values for them to be</span>
<span class="sd">                considered distinct from one another. (Default: 0.01; suitable</span>
<span class="sd">                for objects in Meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all the new Room2Ds created by running the method. This</span>
<span class="sd">            can be used to post-process the rooms for attributes like</span>
<span class="sd">            floor/ceiling adjacency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># handle the case of multiple target_floor_to_ceiling values</span>
        <span class="n">t_ftc_i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target_floor_to_ceiling</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="n">target_floor_to_ceiling</span> <span class="o">=</span> <span class="p">[</span><span class="n">target_floor_to_ceiling</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_ids</span><span class="p">)</span>
        <span class="c1"># set up variables to help manage the plenums</span>
        <span class="n">room_ids</span><span class="p">,</span> <span class="n">plenum_rm_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">room_ids</span><span class="p">),</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">new_rooms</span><span class="p">,</span> <span class="n">new_stories</span><span class="p">,</span> <span class="n">new_story_i</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">resolve_roofs</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">st_type</span> <span class="o">=</span> <span class="s1">&#39;FloorPlenum&#39;</span> <span class="k">if</span> <span class="n">floor_plenum</span> <span class="k">else</span> <span class="s1">&#39;CeilingPlenum&#39;</span>

        <span class="c1"># loop through the Room2Ds and split the plenum if they&#39;re selected</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">is_plenum</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># don&#39;t create plenums of plenums</span>
            <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rm</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">in</span> <span class="n">room_ids</span><span class="p">:</span>
                    <span class="n">plenum_room</span> <span class="o">=</span> <span class="n">rm</span><span class="o">.</span><span class="n">separate_plenum</span><span class="p">(</span>
                        <span class="n">target_floor_to_ceiling</span><span class="p">[</span><span class="n">t_ftc_i</span><span class="p">],</span> <span class="n">floor_plenum</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">t_ftc_i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">plenum_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># add the room to the list of new rooms</span>
                        <span class="n">new_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plenum_room</span><span class="p">)</span>
                        <span class="n">plenum_rm_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">plenum_room</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                        <span class="c1"># figure out on which Story the plenum belongs</span>
                        <span class="n">pln_story</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="n">pln_st_i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">floor_plenum</span> <span class="k">else</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">pln_st_i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">pln_st_i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> \
                                <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">pln_st_i</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">st_type</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">pln_st_i</span> <span class="ow">in</span> <span class="n">new_story_i</span><span class="p">:</span>
                                <span class="k">for</span> <span class="n">st</span><span class="p">,</span> <span class="n">sti</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">new_stories</span><span class="p">,</span> <span class="n">new_story_i</span><span class="p">):</span>
                                    <span class="k">if</span> <span class="n">pln_st_i</span> <span class="o">==</span> <span class="n">sti</span><span class="p">:</span>
                                        <span class="n">pln_story</span> <span class="o">=</span> <span class="n">st</span>
                        <span class="k">else</span><span class="p">:</span>  <span class="c1"># there is already a relevant plenum story</span>
                            <span class="n">pln_story</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">pln_st_i</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">pln_story</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># we must create a new story</span>
                            <span class="n">pln_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">st_type</span><span class="p">)</span>
                            <span class="n">pln_story</span> <span class="o">=</span> <span class="n">Story</span><span class="p">(</span><span class="n">pln_id</span><span class="p">,</span> <span class="p">[</span><span class="n">plenum_room</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">st_type</span><span class="p">)</span>
                            <span class="n">pln_story</span><span class="o">.</span><span class="n">floor_to_floor_height</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_to_floor_height</span>
                            <span class="n">pln_story</span><span class="o">.</span><span class="n">floor_height</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_height</span>
                            <span class="n">pln_story</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">multiplier</span>
                            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">_display_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">pln_story</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> \
                                    <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> Plenum&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">pln_story</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
                                <span class="n">resolve_roofs</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="n">new_stories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pln_story</span><span class="p">)</span>
                            <span class="n">new_story_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pln_st_i</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pln_story</span><span class="o">.</span><span class="n">add_room_2d</span><span class="p">(</span><span class="n">plenum_room</span><span class="p">)</span>

        <span class="c1"># note the vertical domain of each room so we can correctly assign adjacencies</span>
        <span class="n">new_room_domains</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">new_rooms</span><span class="p">:</span>
            <span class="n">new_room_domains</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">floor_height</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">ceiling_height</span><span class="p">)</span>

        <span class="c1"># set up any adjacencies across the plenums</span>
        <span class="n">tol</span> <span class="o">=</span> <span class="n">tolerance</span>
        <span class="k">try</span><span class="p">:</span>  <span class="c1"># get the boundary condition to be used for adiabatic cases</span>
            <span class="n">ad_bc</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">adiabatic</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">ad_bc</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span>  <span class="c1"># honeybee_energy is not loaded; no adiabatic BC</span>
        <span class="k">for</span> <span class="n">new_room</span> <span class="ow">in</span> <span class="n">new_rooms</span><span class="p">:</span>
            <span class="n">new_bcs</span><span class="p">,</span> <span class="n">self_dom</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">new_room_domains</span><span class="p">[</span><span class="n">new_room</span><span class="o">.</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_room</span><span class="o">.</span><span class="n">boundary_conditions</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                    <span class="n">adj_room_id</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">boundary_condition_objects</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">adj_dom</span> <span class="o">=</span> <span class="n">new_room_domains</span><span class="p">[</span><span class="n">adj_room_id</span><span class="p">]</span>
                        <span class="n">z_ov_1</span> <span class="o">=</span> <span class="n">self_dom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">adj_dom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">tol</span>
                        <span class="n">z_ov_2</span> <span class="o">=</span> <span class="n">adj_dom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">self_dom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">tol</span>
                        <span class="n">z_overlap</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">z_ov_1</span> <span class="ow">or</span> <span class="n">z_ov_2</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># missing adjacency</span>
                        <span class="n">z_overlap</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">adj_room_id</span> <span class="ow">in</span> <span class="n">plenum_rm_ids</span> <span class="ow">and</span> <span class="n">z_overlap</span><span class="p">:</span>
                        <span class="n">clean_bc</span> <span class="o">=</span> <span class="n">bc</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">clean_bc</span> <span class="o">=</span> <span class="n">ad_bc</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">new_room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="k">else</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clean_bc</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                            <span class="n">new_room</span><span class="o">.</span><span class="n">_window_parameters</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">new_bcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clean_bc</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_bcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bc</span><span class="p">)</span>
            <span class="n">new_room</span><span class="o">.</span><span class="n">boundary_conditions</span> <span class="o">=</span> <span class="n">new_bcs</span>

        <span class="c1"># insert any newly-created stories into the Building</span>
        <span class="k">for</span> <span class="n">n_st</span> <span class="ow">in</span> <span class="n">new_stories</span><span class="p">:</span>
            <span class="n">n_st</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">new_stories</span> <span class="o">=</span> <span class="p">[</span><span class="n">st</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">st</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">new_story_i</span><span class="p">,</span> <span class="n">new_stories</span><span class="p">),</span>
                                              <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="n">new_story_i</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">new_stories</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="c1"># reverse so that we insert from top to bottom</span>
        <span class="n">new_story_i</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="c1"># reverse so that we insert from top to bottom</span>
        <span class="n">all_stories</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">st</span><span class="p">,</span> <span class="n">sti</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">new_stories</span><span class="p">,</span> <span class="n">new_story_i</span><span class="p">):</span>
            <span class="n">in_i</span> <span class="o">=</span> <span class="n">sti</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">floor_plenum</span> <span class="k">else</span> <span class="n">sti</span>
            <span class="n">all_stories</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">in_i</span><span class="p">,</span> <span class="n">st</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">all_stories</span><span class="p">)</span>

        <span class="c1"># resolve the roofs if they were copied</span>
        <span class="k">if</span> <span class="n">resolve_roofs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_duplicate_roofs</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># set the extension properties of the plenums</span>
        <span class="n">new_room_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">rm</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">new_rooms</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">make_plenums</span><span class="p">(</span><span class="n">new_room_ids</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_rooms</span></div>


<div class="viewcode-block" id="Building.convert_plenum_depths_to_room_2ds">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.convert_plenum_depths_to_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">convert_plenum_depths_to_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert all of the Room2D ceiling/floor plenum depths to explicit Room2Ds.</span>

<span class="sd">        This method is used under the hood of the translation from Dragonfly to</span>
<span class="sd">        Honeybee in order to convert Room2D ceiling_plenum_depth and</span>
<span class="sd">        floor_plenum_depth properties into explicit 3D plenum Rooms.</span>

<span class="sd">        However, it may be useful to call it explicitly (outside of the translation)</span>
<span class="sd">        in order to edit the plenum Room2Ds. For example, multiple plenum Room2Ds</span>
<span class="sd">        above several rooms can be joined together into a single continuous</span>
<span class="sd">        plenum if this is how the plenum exists on the real building.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The maximum difference between point values for them to be</span>
<span class="sd">                considered distinct from one another. (Default: 0.01; suitable</span>
<span class="sd">                for objects in Meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple with two elements.</span>

<span class="sd">            -   ceil_plenums: A list of Room2Ds for newly-created ceiling plenums</span>
<span class="sd">                from the ceiling_plenum_depths.</span>

<span class="sd">            -   floor_plenums: A list of Room2Ds for newly-created floor plenums</span>
<span class="sd">                from the floor_plenum_depths.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># gather all of the Room2D IDs with ceilings and floors to be split</span>
        <span class="n">ceiling_rm_ids</span><span class="p">,</span> <span class="n">ceiling_targets</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">floor_rm_ids</span><span class="p">,</span> <span class="n">floor_targets</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unique_room_2ds</span><span class="p">:</span>
            <span class="n">ftc</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span>
            <span class="n">cpd</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">ceiling_plenum_depth</span>
            <span class="n">fpd</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_plenum_depth</span>
            <span class="k">if</span> <span class="n">cpd</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">fpd</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># no plenums to be generated</span>
            <span class="k">elif</span> <span class="n">cpd</span> <span class="o">+</span> <span class="n">fpd</span> <span class="o">&gt;=</span> <span class="n">ftc</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># invalid plenum depths that are too high</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">room</span><span class="o">.</span><span class="n">has_ceiling</span> <span class="ow">and</span> <span class="n">cpd</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># invalid plenum assigned to air boundary ceiling</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">room</span><span class="o">.</span><span class="n">has_floor</span> <span class="ow">and</span> <span class="n">fpd</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>  <span class="c1"># invalid plenum assigned to air boundary floor</span>
            <span class="k">if</span> <span class="n">cpd</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ftc</span> <span class="o">=</span> <span class="n">ftc</span> <span class="o">-</span> <span class="n">cpd</span>
                <span class="n">ceiling_rm_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                <span class="n">ceiling_targets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ftc</span><span class="p">)</span>
                <span class="n">room</span><span class="o">.</span><span class="n">ceiling_plenum_depth</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># set to zero now that plenum is explicit</span>
            <span class="k">if</span> <span class="n">fpd</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ftc</span> <span class="o">=</span> <span class="n">ftc</span> <span class="o">-</span> <span class="n">fpd</span>
                <span class="n">floor_rm_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                <span class="n">floor_targets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ftc</span><span class="p">)</span>
                <span class="n">room</span><span class="o">.</span><span class="n">floor_plenum_depth</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># set to zero now that plenum is explicit</span>
        <span class="c1"># create the ceiling plenums</span>
        <span class="n">ceil_plenums</span><span class="p">,</span> <span class="n">floor_plenums</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ceiling_rm_ids</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ceil_plenums</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">separate_room_2d_plenums</span><span class="p">(</span>
                <span class="n">ceiling_rm_ids</span><span class="p">,</span> <span class="n">ceiling_targets</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">floor_rm_ids</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">floor_plenums</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">separate_room_2d_plenums</span><span class="p">(</span>
                <span class="n">floor_rm_ids</span><span class="p">,</span> <span class="n">floor_targets</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ceil_plenums</span><span class="p">,</span> <span class="n">floor_plenums</span></div>


<div class="viewcode-block" id="Building.set_outdoor_window_parameters">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_window_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_outdoor_window_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_parameter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all of the outdoor walls to have the same window parameters.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">set_outdoor_window_parameters</span><span class="p">(</span><span class="n">window_parameter</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.set_outdoor_shading_parameters">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_shading_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_outdoor_shading_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shading_parameter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all of the outdoor walls to have the same shading parameters.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">set_outdoor_shading_parameters</span><span class="p">(</span><span class="n">shading_parameter</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert all of the windows of the Story to the RectangularWindows format.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">to_rectangular_windows</span><span class="p">()</span></div>


<div class="viewcode-block" id="Building.move">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.move">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">moving_vec</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move this Building along a vector.</span>

<span class="sd">        Args:</span>
<span class="sd">            moving_vec: A ladybug_geometry Vector3D with the direction and distance</span>
<span class="sd">                to move the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">moving_vec</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">moving_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">moving_vec</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.rotate_xy">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.rotate_xy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotate_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rotate this Building counterclockwise in the XY plane by a certain angle.</span>

<span class="sd">        Args:</span>
<span class="sd">            angle: An angle in degrees.</span>
<span class="sd">            origin: A ladybug_geometry Point3D for the origin around which the</span>
<span class="sd">                object will be rotated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.reflect">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.reflect">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reflect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plane</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reflect this Building across a plane.</span>

<span class="sd">        Args:</span>
<span class="sd">            plane: A ladybug_geometry Plane across which the object will be reflected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.scale">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scale this Building by a factor from an origin point.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">            origin: A ladybug_geometry Point3D representing the origin from which</span>
<span class="sd">                to scale. If None, it will be scaled from the World origin (0, 0, 0).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span></div>


<div class="viewcode-block" id="Building.has_floors_ceilings">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.has_floors_ceilings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_floors_ceilings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_multiplier</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of tuples for each Room noting whether it has a floor/ceiling.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_multiplier: Boolean to note whether the returned list should be</span>
<span class="sd">                assume that the Rooms use multipliers or not. The list will typically</span>
<span class="sd">                be longer when use_multiplier is False. (Default: True).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">has_flr_ceil</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="n">story_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="n">story_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">room</span><span class="o">.</span><span class="n">has_floor</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">has_ceiling</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">use_multiplier</span><span class="p">:</span>
                <span class="n">has_flr_ceil</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story_list</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">multiplier</span><span class="p">):</span>
                    <span class="n">has_flr_ceil</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">story_list</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">has_flr_ceil</span></div>


<div class="viewcode-block" id="Building.check_collisions_between_stories">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.check_collisions_between_stories">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_collisions_between_stories</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that Room2Ds of each Story do not collide with others in the Building.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance that two Room2Ds geometries can collide</span>
<span class="sd">                with one another and still be considered valid. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised</span>
<span class="sd">                if colliding geometries are found. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with a dictionary if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">detailed</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">raise_exception</span> <span class="k">else</span> <span class="n">detailed</span>
        <span class="c1"># loop through the stories and test for collisions</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">stories</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">story1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stories</span><span class="p">):</span>
                <span class="n">fh1</span> <span class="o">=</span> <span class="n">story1</span><span class="o">.</span><span class="n">min_room_2d_floor_height</span>
                <span class="n">ch1</span> <span class="o">=</span> <span class="n">story1</span><span class="o">.</span><span class="n">max_room_2d_ceiling_height</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">story2</span> <span class="ow">in</span> <span class="n">stories</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]:</span>
                        <span class="n">fh2</span> <span class="o">=</span> <span class="n">story2</span><span class="o">.</span><span class="n">min_room_2d_floor_height</span>
                        <span class="n">ch2</span> <span class="o">=</span> <span class="n">story2</span><span class="o">.</span><span class="n">max_room_2d_ceiling_height</span>
                        <span class="n">v_overlap</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">if</span> <span class="n">fh1</span> <span class="o">&lt;</span> <span class="n">fh2</span> <span class="ow">and</span> <span class="n">ch1</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="o">&gt;</span> <span class="n">fh2</span><span class="p">:</span>
                            <span class="n">v_overlap</span> <span class="o">=</span> <span class="n">ch1</span> <span class="o">-</span> <span class="n">fh2</span>
                        <span class="k">elif</span> <span class="n">fh2</span> <span class="o">&lt;</span> <span class="n">fh1</span> <span class="ow">and</span> <span class="n">ch2</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="o">&gt;</span> <span class="n">fh1</span><span class="p">:</span>
                            <span class="n">v_overlap</span> <span class="o">=</span> <span class="n">ch2</span> <span class="o">-</span> <span class="n">fh1</span>
                        <span class="k">if</span> <span class="n">v_overlap</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">col_msg</span> <span class="o">=</span> <span class="n">story1</span><span class="o">.</span><span class="n">check_collision_with_story</span><span class="p">(</span>
                                <span class="n">story2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">detailed</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">col_msg</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                                    <span class="n">msgs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">col_msg</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col_msg</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">pass</span>  <span class="c1"># we have reached the end of the list of stories</span>
        <span class="c1"># process the output messages if issues were found</span>
        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">msgs</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Building &quot;</span><span class="si">{}</span><span class="s1">&quot; has stories with rooms that collide with one another&#39;</span> \
                <span class="s1">&#39;:</span><span class="se">\n</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_id</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">raise_exception</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">msg</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="Building.to_honeybee">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.to_honeybee">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_honeybee</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_multiplier</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                    <span class="n">enforce_adj</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert Dragonfly Building to a Honeybee Model.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_multiplier: If True, the multipliers on this Building&#39;s Stories will be</span>
<span class="sd">                passed along to the generated Honeybee Room objects, indicating the</span>
<span class="sd">                simulation will be run once for each unique room and then results</span>
<span class="sd">                will be multiplied. If False, full geometry objects will be written</span>
<span class="sd">                for each and every floor in the building that are represented through</span>
<span class="sd">                multipliers and all resulting multipliers will be 1. (Default: True).</span>
<span class="sd">            exclude_plenums: Boolean to indicate whether ceiling/floor plenum depths</span>
<span class="sd">                assigned to Room2Ds should be ignored during translation. This</span>
<span class="sd">                results in each Room2D translating to a single Honeybee Room at</span>
<span class="sd">                the full floor_to_ceiling_height instead of a base Room with (a)</span>
<span class="sd">                plenum Room(s). (Default: False).</span>
<span class="sd">            tolerance: The minimum distance in z values of floor_height and</span>
<span class="sd">                floor_to_ceiling_height at which adjacent Faces will be split.</span>
<span class="sd">                Default: 0.01, suitable for objects in meters.</span>
<span class="sd">            enforce_adj: Boolean to note whether an exception should be raised if</span>
<span class="sd">                an adjacency between two Room2Ds is invalid (True) or if the invalid</span>
<span class="sd">                Surface boundary condition should be replaced with an Outdoor</span>
<span class="sd">                boundary condition (False). If False, any Walls containing</span>
<span class="sd">                WindowParameters and an illegal boundary condition will also</span>
<span class="sd">                be replaced with an Outdoor boundary condition. (Default: True).</span>
<span class="sd">            enforce_solid: Boolean to note whether rooms should be translated</span>
<span class="sd">                as solid extrusions whenever translating them with custom</span>
<span class="sd">                roof geometry produces a non-solid result (True) or the non-solid</span>
<span class="sd">                room geometry should be allowed to remain in the result (False).</span>
<span class="sd">                The latter is useful for understanding why a particular roof</span>
<span class="sd">                geometry has produced a non-solid result. (Default: True).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A honeybee Model that represent the Building.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># separate the plenums unless they are excluded</span>
        <span class="n">ceil_plenums</span><span class="p">,</span> <span class="n">floor_plenums</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">exclude_plenums</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_room_2d_plenums</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>  <span class="c1"># avoid mutating this Building instance</span>
            <span class="n">ceil_plenums</span><span class="p">,</span> <span class="n">floor_plenums</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">convert_plenum_depths_to_room_2ds</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># compute the story heights once so they&#39;re not constantly recomputed</span>
        <span class="n">reset_roofs</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_roof_heights</span><span class="p">()</span>
            <span class="n">reset_roofs</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># generate all of the Honeybee Rooms</span>
        <span class="n">hb_rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">use_multiplier</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
                <span class="n">hb_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="n">story</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                                      <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span>
                                      <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_stories</span><span class="p">():</span>
                <span class="n">hb_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="n">story</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                                      <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span>
                                      <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
                <span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_3ds</span><span class="p">:</span>
            <span class="n">hb_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="n">hb_mod</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">hb_rooms</span><span class="p">)</span>
        <span class="n">hb_mod</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span>
        <span class="n">hb_mod</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_data</span>

        <span class="c1"># set adjacency between plenums and base rooms</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ceil_plenums</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">floor_plenums</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># build up a map between rooms and identifiers</span>
            <span class="n">room_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">rm</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span> <span class="n">rm</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">hb_rooms</span><span class="p">}</span>
            <span class="c1"># use the map to set adjacencies for ceiling plenums</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ceil_plenums</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">adj_ceil_pairs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">ceil_pln</span> <span class="ow">in</span> <span class="n">ceil_plenums</span><span class="p">:</span>
                    <span class="n">pln_id</span> <span class="o">=</span> <span class="n">ceil_pln</span><span class="o">.</span><span class="n">identifier</span>
                    <span class="n">base_id</span> <span class="o">=</span> <span class="n">pln_id</span><span class="p">[:</span><span class="o">-</span><span class="mi">15</span><span class="p">]</span>
                    <span class="n">adj_ceil_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">base_id</span><span class="p">,</span> <span class="n">pln_id</span><span class="p">))</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">use_multiplier</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ceil_pln</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                            <span class="n">pln_id_i</span> <span class="o">=</span> <span class="s1">&#39;Flr</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pln_id</span><span class="p">)</span>
                            <span class="n">base_id_i</span> <span class="o">=</span> <span class="s1">&#39;Flr</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">base_id</span><span class="p">)</span>
                            <span class="n">adj_ceil_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">base_id_i</span><span class="p">,</span> <span class="n">pln_id_i</span><span class="p">))</span>
                <span class="n">rm_faces</span><span class="p">,</span> <span class="n">pln_faces</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">base_id</span><span class="p">,</span> <span class="n">pln_id</span> <span class="ow">in</span> <span class="n">adj_ceil_pairs</span><span class="p">:</span>
                    <span class="n">room_face</span><span class="p">,</span> <span class="n">plenum_face</span> <span class="o">=</span> <span class="n">room_map</span><span class="p">[</span><span class="n">base_id</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">room_map</span><span class="p">[</span><span class="n">pln_id</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">room_face</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">plenum_face</span><span class="p">)</span>
                    <span class="n">rm_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_face</span><span class="p">)</span>
                    <span class="n">pln_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plenum_face</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">apply_ceiling_plenum_face_properties</span><span class="p">(</span><span class="n">rm_faces</span><span class="p">,</span> <span class="n">pln_faces</span><span class="p">)</span>
            <span class="c1"># use the map to set adjacencies for floor plenums</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">floor_plenums</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">adj_floor_pairs</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">floor_pln</span> <span class="ow">in</span> <span class="n">floor_plenums</span><span class="p">:</span>
                    <span class="n">pln_id</span> <span class="o">=</span> <span class="n">floor_pln</span><span class="o">.</span><span class="n">identifier</span>
                    <span class="n">base_id</span> <span class="o">=</span> <span class="n">pln_id</span><span class="p">[:</span><span class="o">-</span><span class="mi">13</span><span class="p">]</span>
                    <span class="n">adj_floor_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">base_id</span><span class="p">,</span> <span class="n">pln_id</span><span class="p">))</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">use_multiplier</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">floor_pln</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                            <span class="n">pln_id_i</span> <span class="o">=</span> <span class="s1">&#39;Flr</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">pln_id</span><span class="p">)</span>
                            <span class="n">base_id_i</span> <span class="o">=</span> <span class="s1">&#39;Flr</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">base_id</span><span class="p">)</span>
                            <span class="n">adj_floor_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">base_id_i</span><span class="p">,</span> <span class="n">pln_id_i</span><span class="p">))</span>
                <span class="n">rm_faces</span><span class="p">,</span> <span class="n">pln_faces</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">base_id</span><span class="p">,</span> <span class="n">pln_id</span> <span class="ow">in</span> <span class="n">adj_floor_pairs</span><span class="p">:</span>
                    <span class="n">room_face</span><span class="p">,</span> <span class="n">plenum_face</span> <span class="o">=</span> <span class="n">room_map</span><span class="p">[</span><span class="n">base_id</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">room_map</span><span class="p">[</span><span class="n">pln_id</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">room_face</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">plenum_face</span><span class="p">)</span>
                    <span class="n">rm_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_face</span><span class="p">)</span>
                    <span class="n">pln_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plenum_face</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">apply_floor_plenum_face_properties</span><span class="p">(</span><span class="n">rm_faces</span><span class="p">,</span> <span class="n">pln_faces</span><span class="p">)</span>

        <span class="c1"># put back the old roofs if they were not set originally</span>
        <span class="k">if</span> <span class="n">reset_roofs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">hb_mod</span></div>


<div class="viewcode-block" id="Building.to_dict">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">abridged</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">included_prop</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Building as a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            abridged: Boolean to note whether the extension properties of the</span>
<span class="sd">                object (ie. construction sets) should be included in detail</span>
<span class="sd">                (False) or just referenced by identifier (True). Default: False.</span>
<span class="sd">            included_prop: List of properties to filter keys that must be included in</span>
<span class="sd">                output dictionary. For example [&#39;energy&#39;] will include &#39;energy&#39; key if</span>
<span class="sd">                available in properties to_dict. By default all the keys will be</span>
<span class="sd">                included. To exclude all the keys from extensions use an empty list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Building&#39;</span><span class="p">}</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;unique_stories&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">abridged</span><span class="p">,</span> <span class="n">included_prop</span><span class="p">)</span>
                                      <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;room_3ds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">abridged</span><span class="p">,</span> <span class="n">included_prop</span><span class="p">)</span>
                                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">]</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">abridged</span><span class="p">,</span> <span class="n">included_prop</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># secret key used for filtered dictionaries</span>
            <span class="n">rf_dicts</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">st_id</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">roof</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span><span class="p">:</span>
                <span class="n">r_dict</span> <span class="o">=</span> <span class="n">roof</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="n">rf_dicts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">st_id</span><span class="p">,</span> <span class="n">r_dict</span><span class="p">))</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;_roofs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rf_dicts</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">to</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Building writer object.</span>

<span class="sd">        Use this method to access Writer class to write the building in other formats.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">writer</span>

<div class="viewcode-block" id="Building.process_alleys">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.process_alleys">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">process_alleys</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">adiabatic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove windows from any walls that within a distance of other buildings.</span>

<span class="sd">        This method can also optionally set the boundary conditions of these walls to</span>
<span class="sd">        adiabatic. This is helpful when attempting to account for alleys or parti walls</span>
<span class="sd">        that may exist between buildings of a denser urban district.</span>

<span class="sd">        Note that this staticmethod will edit the buildings in place so it may</span>
<span class="sd">        be appropriate to duplicate the Buildings before running this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            buildings: Dragonfly Building objects which will have their windows removed</span>
<span class="sd">                if their walls lie within the distance of another building.</span>
<span class="sd">            distance: A number for the maximum distance of an alleyway in model</span>
<span class="sd">                units. If a wall is closer to another Building than this distance,</span>
<span class="sd">                the windows will be removed. (Default: 1.0; suitable for objects</span>
<span class="sd">                in meters).</span>
<span class="sd">            adiabatic: A boolean to note whether the walls that have their windows</span>
<span class="sd">                removed should also receive an Adiabatic boundary condition.</span>
<span class="sd">                This is useful when the alleyways are more like parti walls than</span>
<span class="sd">                distinct pathways that someone could traverse.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the adiabatic boundary condition in case we need it</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ad_bc</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">adiabatic</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>  <span class="c1"># honeybee_energy is not loaded</span>
            <span class="n">ad_bc</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">adiabatic</span> <span class="k">else</span> <span class="n">bcs</span><span class="o">.</span><span class="n">ground</span>

        <span class="c1"># get the footprints, heights and bounding points of all of the buildings</span>
        <span class="n">story_heights</span><span class="p">,</span> <span class="n">story_polys</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">:</span>
            <span class="n">bldg_polys</span><span class="p">,</span> <span class="n">bldg_s_hgts</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">bldg</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
                <span class="n">flr_hgt</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_height</span>
                <span class="n">bldg_s_hgts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">flr_hgt</span><span class="p">,</span> <span class="n">flr_hgt</span> <span class="o">+</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_to_floor_height</span><span class="p">))</span>
                <span class="n">story_foot</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">footprint</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">st_poly</span> <span class="o">=</span> <span class="p">[</span><span class="n">Polygon2D</span><span class="p">((</span><span class="n">Point2D</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">face</span><span class="o">.</span><span class="n">vertices</span><span class="p">))</span>
                           <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">story_foot</span><span class="p">]</span>
                <span class="n">bldg_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st_poly</span><span class="p">)</span>
            <span class="n">story_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bldg_s_hgts</span><span class="p">)</span>
            <span class="n">story_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bldg_polys</span><span class="p">)</span>
        <span class="n">bldg_heights</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">height</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">]</span>
        <span class="n">bldg_pts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">:</span>
            <span class="n">b_min</span><span class="p">,</span> <span class="n">b_max</span> <span class="o">=</span> <span class="n">bldg</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">bldg</span><span class="o">.</span><span class="n">max</span>
            <span class="n">center</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">((</span><span class="n">b_min</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">b_max</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">b_min</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">b_max</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">bldg_pts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">b_min</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">b_max</span><span class="p">))</span>

        <span class="c1"># loop through the buildings and set the properties of the relevant walls</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">buildings</span><span class="p">):</span>
            <span class="c1"># first determine the relevant buildings and building heights</span>
            <span class="n">rel_st_polys</span><span class="p">,</span> <span class="n">rel_st_heights</span><span class="p">,</span> <span class="n">rel_b_heights</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="n">other_indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">buildings</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">other_indices</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Building</span><span class="o">.</span><span class="n">_bound_rect_in_dist</span><span class="p">(</span><span class="n">bldg_pts</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">bldg_pts</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">distance</span><span class="p">):</span>
                    <span class="n">rel_st_polys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story_polys</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                    <span class="n">rel_st_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">story_heights</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                    <span class="n">rel_b_heights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bldg_heights</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

            <span class="c1"># then, loop through the story Room2Ds and set properties of relevant walls</span>
            <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">bldg</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">:</span>
                <span class="n">st_hgt</span><span class="p">,</span> <span class="n">st_f2f</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_height</span><span class="p">,</span> <span class="n">story</span><span class="o">.</span><span class="n">floor_to_floor_height</span>
                <span class="n">st_c_hgt</span> <span class="o">=</span> <span class="n">st_hgt</span> <span class="o">+</span> <span class="n">st_f2f</span>
                <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                    <span class="n">zip_r_objs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rm</span><span class="o">.</span><span class="n">boundary_conditions</span><span class="p">,</span> <span class="n">rm</span><span class="o">.</span><span class="n">floor_segments_2d</span><span class="p">,</span>
                                     <span class="n">rm</span><span class="o">.</span><span class="n">segment_normals</span><span class="p">)</span>
                    <span class="n">new_bcs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rm</span><span class="o">.</span><span class="n">boundary_conditions</span><span class="p">)</span>
                    <span class="n">new_win_pars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">rm</span><span class="o">.</span><span class="n">window_parameters</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">seg</span><span class="p">,</span> <span class="n">normal</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_r_objs</span><span class="p">):</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>  <span class="c1"># nothing to change</span>
                            <span class="k">continue</span>
                        <span class="n">seg_mid</span> <span class="o">=</span> <span class="n">seg</span><span class="o">.</span><span class="n">midpoint</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">normal</span> <span class="o">*</span> <span class="o">-</span><span class="n">tolerance</span><span class="p">)</span>
                        <span class="n">seg_ray</span> <span class="o">=</span> <span class="n">LineSegment2D</span><span class="o">.</span><span class="n">from_sdl</span><span class="p">(</span><span class="n">seg_mid</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
                        <span class="n">zip_b_objs</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rel_b_heights</span><span class="p">,</span> <span class="n">rel_st_polys</span><span class="p">,</span> <span class="n">rel_st_heights</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">bh</span><span class="p">,</span> <span class="n">rel_poly</span><span class="p">,</span> <span class="n">rel_hgt</span> <span class="ow">in</span> <span class="n">zip_b_objs</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">st_hgt</span> <span class="o">&gt;=</span> <span class="n">bh</span> <span class="o">-</span> <span class="n">tolerance</span><span class="p">:</span>
                                <span class="k">continue</span>  <span class="c1"># story above other bldg; we can ignore it</span>
                            <span class="k">for</span> <span class="n">o_story</span><span class="p">,</span> <span class="n">o_h</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rel_poly</span><span class="p">,</span> <span class="n">rel_hgt</span><span class="p">):</span>
                                <span class="n">overlap</span> <span class="o">=</span> <span class="nb">min</span><span class="p">((</span><span class="n">o_h</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">st_c_hgt</span><span class="p">))</span> <span class="o">-</span> <span class="nb">max</span><span class="p">((</span><span class="n">o_h</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">st_hgt</span><span class="p">))</span>
                                <span class="k">if</span> <span class="n">overlap</span> <span class="o">&gt;=</span> <span class="n">st_f2f</span> <span class="o">*</span> <span class="mf">0.33</span><span class="p">:</span>  <span class="c1"># more than 1/3 overlap</span>
                                    <span class="k">for</span> <span class="n">o_poly</span> <span class="ow">in</span> <span class="n">o_story</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">o_poly</span><span class="o">.</span><span class="n">intersect_line_ray</span><span class="p">(</span><span class="n">seg_ray</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                            <span class="c1"># we have found an alleyway!</span>
                                            <span class="n">new_win_pars</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                                            <span class="k">if</span> <span class="n">adiabatic</span><span class="p">:</span>
                                                <span class="n">new_bcs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">ad_bc</span>
                                            <span class="k">break</span>
                    <span class="c1"># assign the new window parameters and boundary conditions</span>
                    <span class="n">rm</span><span class="o">.</span><span class="n">window_parameters</span> <span class="o">=</span> <span class="n">new_win_pars</span>
                    <span class="n">rm</span><span class="o">.</span><span class="n">boundary_conditions</span> <span class="o">=</span> <span class="n">new_bcs</span></div>


<div class="viewcode-block" id="Building.district_to_honeybee">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.district_to_honeybee">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">district_to_honeybee</span><span class="p">(</span>
            <span class="n">buildings</span><span class="p">,</span> <span class="n">use_multiplier</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">enforce_adj</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert an array of Building objects into a single district honeybee Model.</span>

<span class="sd">        Args:</span>
<span class="sd">            buildings: An array of Building objects to be converted into a</span>
<span class="sd">                honeybee Model.</span>
<span class="sd">            use_multiplier: If True, the multipliers on this Building&#39;s Stories will be</span>
<span class="sd">                passed along to the generated Honeybee Room objects, indicating the</span>
<span class="sd">                simulation will be run once for each unique room and then results</span>
<span class="sd">                will be multiplied. If False, full geometry objects will be written</span>
<span class="sd">                for each and every floor in the building that are represented through</span>
<span class="sd">                multipliers and all resulting multipliers will be 1. (Default: True).</span>
<span class="sd">            exclude_plenums: Boolean to indicate whether ceiling/floor plenum depths</span>
<span class="sd">                assigned to Room2Ds should be ignored during translation. This</span>
<span class="sd">                results in each Room2D translating to a single Honeybee Room at</span>
<span class="sd">                the full floor_to_ceiling_height instead of a base Room with (a)</span>
<span class="sd">                plenum Room(s). (Default: False).</span>
<span class="sd">            tolerance: The minimum distance in z values of floor_height and</span>
<span class="sd">                floor_to_ceiling_height at which adjacent Faces will be split.</span>
<span class="sd">                Default: 0.01, suitable for objects in meters.</span>
<span class="sd">            enforce_adj: Boolean to note whether an exception should be raised if</span>
<span class="sd">                an adjacency between two Room2Ds is invalid (True) or if the invalid</span>
<span class="sd">                Surface boundary condition should be replaced with an Outdoor</span>
<span class="sd">                boundary condition (False). If False, any Walls containing</span>
<span class="sd">                WindowParameters and an illegal boundary condition will also</span>
<span class="sd">                be replaced with an Outdoor boundary condition. (Default: True).</span>
<span class="sd">            enforce_solid: Boolean to note whether rooms should be translated</span>
<span class="sd">                as solid extrusions whenever translating them with custom</span>
<span class="sd">                roof geometry produces a non-solid result (True) or the non-solid</span>
<span class="sd">                room geometry should be allowed to remain in the result (False).</span>
<span class="sd">                The latter is useful for understanding why a particular roof</span>
<span class="sd">                geometry has produced a non-solid result. (Default: True).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A honeybee Model that represent the district.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create a base model to which everything will be added</span>
        <span class="n">base_model</span> <span class="o">=</span> <span class="n">buildings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span>
            <span class="n">use_multiplier</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="n">exclude_plenums</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
            <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
        <span class="c1"># loop through each Building, create a model, and add it to the base one</span>
        <span class="k">for</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">base_model</span><span class="o">.</span><span class="n">add_model</span><span class="p">(</span>
                <span class="n">bldg</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span><span class="n">use_multiplier</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="n">exclude_plenums</span><span class="p">,</span>
                                 <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span>
                                 <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">base_model</span></div>


<div class="viewcode-block" id="Building.buildings_to_honeybee">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.buildings_to_honeybee">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">buildings_to_honeybee</span><span class="p">(</span>
            <span class="n">buildings</span><span class="p">,</span> <span class="n">context_shades</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shade_distance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_multiplier</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">enforce_adj</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert an array of Buildings into several honeybee Models with self-shading.</span>

<span class="sd">        Each input Building will be exported into its own Model. For each Model,</span>
<span class="sd">        the other input Buildings will appear as context shade geometry. Thus,</span>
<span class="sd">        each Model is its own simulate-able unit accounting for the total</span>
<span class="sd">        self-shading of the input Buildings.</span>

<span class="sd">        Args:</span>
<span class="sd">            buildings: An array of Building objects to be converted into honeybee</span>
<span class="sd">                Models that account for their own shading of one another.</span>
<span class="sd">            context_shades: An optional array of ContextShade objects that will be</span>
<span class="sd">                added to the honeybee Models if their bounding box overlaps with a</span>
<span class="sd">                given building within the shade_distance.</span>
<span class="sd">            shade_distance: An optional number to note the distance beyond which other</span>
<span class="sd">                objects&#39; shade should not be exported into a given Model. This is</span>
<span class="sd">                helpful for reducing the simulation run time of each Model when other</span>
<span class="sd">                connected buildings are too far away to have a meaningful impact on</span>
<span class="sd">                the results. If None, all other buildings will be included as context</span>
<span class="sd">                shade in each and every Model. Set to 0 to exclude all neighboring</span>
<span class="sd">                buildings from the resulting models. Default: None.</span>
<span class="sd">            use_multiplier: If True, the multipliers on this Building&#39;s Stories will be</span>
<span class="sd">                passed along to the generated Honeybee Room objects, indicating the</span>
<span class="sd">                simulation will be run once for each unique room and then results</span>
<span class="sd">                will be multiplied. If False, full geometry objects will be written</span>
<span class="sd">                for each and every floor in the building that are represented through</span>
<span class="sd">                multipliers and all room multipliers will be 1. (Default: True).</span>
<span class="sd">            exclude_plenums: Boolean to indicate whether ceiling/floor plenum depths</span>
<span class="sd">                assigned to Room2Ds should be ignored during translation. This</span>
<span class="sd">                results in each Room2D translating to a single Honeybee Room at</span>
<span class="sd">                the full floor_to_ceiling_height instead of a base Room with (a)</span>
<span class="sd">                plenum Room(s). (Default: False).</span>
<span class="sd">            cap: Boolean to note whether building shade representations should be capped</span>
<span class="sd">                with a top face. Usually, this is not necessary to account for</span>
<span class="sd">                blocked sun and is only needed when it&#39;s important to account for</span>
<span class="sd">                reflected sun off of roofs. (Default: False).</span>
<span class="sd">            tolerance: The minimum distance in z values of floor_height and</span>
<span class="sd">                floor_to_ceiling_height at which adjacent Faces will be split.</span>
<span class="sd">                Default: 0.01, suitable for objects in meters.</span>
<span class="sd">            enforce_adj: Boolean to note whether an exception should be raised if</span>
<span class="sd">                an adjacency between two Room2Ds is invalid (True) or if the invalid</span>
<span class="sd">                Surface boundary condition should be replaced with an Outdoor</span>
<span class="sd">                boundary condition (False). If False, any Walls containing</span>
<span class="sd">                WindowParameters and an illegal boundary condition will also</span>
<span class="sd">                be replaced with an Outdoor boundary condition. (Default: True).</span>
<span class="sd">            enforce_solid: Boolean to note whether rooms should be translated</span>
<span class="sd">                as solid extrusions whenever translating them with custom</span>
<span class="sd">                roof geometry produces a non-solid result (True) or the non-solid</span>
<span class="sd">                room geometry should be allowed to remain in the result (False).</span>
<span class="sd">                The latter is useful for understanding why a particular roof</span>
<span class="sd">                geometry has produced a non-solid result. (Default: True).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of honeybee Models that represent the Building.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create lists with all context representations of the buildings + shade</span>
        <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span><span class="p">,</span> <span class="n">con_shades</span><span class="p">,</span> <span class="n">con_pts</span> <span class="o">=</span> <span class="n">Building</span><span class="o">.</span><span class="n">_honeybee_shades</span><span class="p">(</span>
            <span class="n">buildings</span><span class="p">,</span> <span class="n">context_shades</span><span class="p">,</span> <span class="n">shade_distance</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># loop through each Building and create a model</span>
        <span class="n">models</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list to be filled with Honeybee Models</span>
        <span class="n">num_bldg</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">buildings</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">buildings</span><span class="p">):</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">bldg</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span>
                <span class="n">use_multiplier</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="n">exclude_plenums</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
            <span class="n">Building</span><span class="o">.</span><span class="n">_add_context_to_honeybee</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span><span class="p">,</span> <span class="n">con_shades</span><span class="p">,</span>
                                              <span class="n">con_pts</span><span class="p">,</span> <span class="n">shade_distance</span><span class="p">,</span> <span class="n">num_bldg</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>  <span class="c1"># append to the final list of Models</span>
        <span class="k">return</span> <span class="n">models</span></div>


<div class="viewcode-block" id="Building.stories_to_honeybee">
<a class="viewcode-back" href="../../dragonfly.building.html#dragonfly.building.Building.stories_to_honeybee">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stories_to_honeybee</span><span class="p">(</span>
            <span class="n">buildings</span><span class="p">,</span> <span class="n">context_shades</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shade_distance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">use_multiplier</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclude_plenums</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">enforce_adj</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert an array of Buildings into one honeybee Model per story.</span>

<span class="sd">        Each Story of each input Building will be exported into its own Model. For each</span>
<span class="sd">        Honeybee Model, the other input Buildings will appear as context shade geometry</span>
<span class="sd">        as will all of the other stories of the same building. Thus, each Model</span>
<span class="sd">        is its own simulate-able unit accounting for the total self-shading of</span>
<span class="sd">        the input Buildings.</span>

<span class="sd">        Args:</span>
<span class="sd">            buildings: An array of Building objects to be converted into an array of</span>
<span class="sd">                honeybee Models with one story per model.</span>
<span class="sd">            context_shades: An optional array of ContextShade objects that will be</span>
<span class="sd">                added to the honeybee Models if their bounding box overlaps with a</span>
<span class="sd">                given building within the shade_distance.</span>
<span class="sd">            shade_distance: An optional number to note the distance beyond which other</span>
<span class="sd">                objects&#39; shade should not be exported into a given Model. This is</span>
<span class="sd">                helpful for reducing the simulation run time of each Model when other</span>
<span class="sd">                connected buildings are too far away to have a meaningful impact on</span>
<span class="sd">                the results. If None, all other buildings will be included as context</span>
<span class="sd">                shade in each and every Model. Set to 0 to exclude all neighboring</span>
<span class="sd">                buildings from the resulting models. Default: None.</span>
<span class="sd">            use_multiplier: If True, the multipliers on this Building&#39;s Stories will be</span>
<span class="sd">                passed along to the generated Honeybee Room objects, indicating the</span>
<span class="sd">                simulation will be run once for each unique room and then results</span>
<span class="sd">                will be multiplied. If False, full geometry objects will be written</span>
<span class="sd">                for each and every floor in the building that are represented through</span>
<span class="sd">                multipliers and all room multipliers will be 1. (Default: True).</span>
<span class="sd">            exclude_plenums: Boolean to indicate whether ceiling/floor plenum depths</span>
<span class="sd">                assigned to Room2Ds should be ignored during translation. This</span>
<span class="sd">                results in each Room2D translating to a single Honeybee Room at</span>
<span class="sd">                the full floor_to_ceiling_height instead of a base Room with (a)</span>
<span class="sd">                plenum Room(s). (Default: False).</span>
<span class="sd">            cap: Boolean to note whether building shade representations should be capped</span>
<span class="sd">                with a top face. Usually, this is not necessary to account for</span>
<span class="sd">                blocked sun and is only needed when it&#39;s important to account for</span>
<span class="sd">                reflected sun off of roofs. (Default: False).</span>
<span class="sd">            tolerance: The minimum distance in z values of floor_height and</span>
<span class="sd">                floor_to_ceiling_height at which adjacent Faces will be split.</span>
<span class="sd">                Default: 0.01, suitable for objects in meters.</span>
<span class="sd">            enforce_adj: Boolean to note whether an exception should be raised if</span>
<span class="sd">                an adjacency between two Room2Ds is invalid (True) or if the invalid</span>
<span class="sd">                Surface boundary condition should be replaced with an Outdoor</span>
<span class="sd">                boundary condition (False). If False, any Walls containing</span>
<span class="sd">                WindowParameters and an illegal boundary condition will also</span>
<span class="sd">                be replaced with an Outdoor boundary condition. (Default: True).</span>
<span class="sd">            enforce_solid: Boolean to note whether rooms should be translated</span>
<span class="sd">                as solid extrusions whenever translating them with custom</span>
<span class="sd">                roof geometry produces a non-solid result (True) or the non-solid</span>
<span class="sd">                room geometry should be allowed to remain in the result (False).</span>
<span class="sd">                The latter is useful for understanding why a particular roof</span>
<span class="sd">                geometry has produced a non-solid result. (Default: True).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of honeybee Models that represent the Stories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create lists with all context representations of the buildings + shade</span>
        <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span><span class="p">,</span> <span class="n">con_shades</span><span class="p">,</span> <span class="n">con_pts</span> <span class="o">=</span> <span class="n">Building</span><span class="o">.</span><span class="n">_honeybee_shades</span><span class="p">(</span>
            <span class="n">buildings</span><span class="p">,</span> <span class="n">context_shades</span><span class="p">,</span> <span class="n">shade_distance</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># loop through each Building and create a model</span>
        <span class="n">models</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list to be filled with Honeybee Models</span>
        <span class="n">num_bldg</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">buildings</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">buildings</span><span class="p">):</span>
            <span class="n">dummy_model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">bldg</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>  <span class="c1"># blank model to hold context shade</span>
            <span class="n">Building</span><span class="o">.</span><span class="n">_add_context_to_honeybee</span><span class="p">(</span>
                <span class="n">dummy_model</span><span class="p">,</span> <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span><span class="p">,</span> <span class="n">con_shades</span><span class="p">,</span> <span class="n">con_pts</span><span class="p">,</span>
                <span class="n">shade_distance</span><span class="p">,</span> <span class="n">num_bldg</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">bldg_con</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dummy_model</span><span class="o">.</span><span class="n">orphaned_shades</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">use_multiplier</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bldg</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">exclude_plenums</span> <span class="ow">and</span> <span class="n">story</span><span class="o">.</span><span class="n">has_plenums</span><span class="p">:</span>
                        <span class="n">plenum_bldg</span> <span class="o">=</span> <span class="n">Building</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="p">[</span><span class="n">story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()])</span>
                        <span class="n">dummy_model</span> <span class="o">=</span> <span class="n">plenum_bldg</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span>
                            <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                            <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
                        <span class="n">hb_rooms</span> <span class="o">=</span> <span class="n">dummy_model</span><span class="o">.</span><span class="n">rooms</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">hb_rooms</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span>
                            <span class="kc">True</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                            <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">bldg</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
                        <span class="n">hb_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">bldg</span><span class="o">.</span><span class="n">room_3ds_by_story</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">display_name</span><span class="p">))</span>
                    <span class="n">shds</span> <span class="o">=</span> <span class="n">bldg_con</span> <span class="o">+</span> <span class="n">bldg</span><span class="o">.</span><span class="n">shade_representation</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">hb_rooms</span><span class="p">,</span> <span class="n">orphaned_shades</span><span class="o">=</span><span class="n">shds</span><span class="p">)</span>
                    <span class="n">model</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">display_name</span>
                    <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>  <span class="c1"># append to the final list of Models</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">self_shds</span> <span class="o">=</span> <span class="p">[</span><span class="n">story</span><span class="o">.</span><span class="n">shade_representation</span><span class="p">(</span><span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="n">bldg</span><span class="o">.</span><span class="n">unique_stories</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">story</span><span class="o">.</span><span class="n">is_plenum</span><span class="p">]</span>
                <span class="n">full_shades</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">story</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bldg</span><span class="o">.</span><span class="n">unique_stories</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">story</span><span class="o">.</span><span class="n">is_plenum</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">multiplier</span><span class="p">):</span>
                            <span class="n">mult_shd</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">shade_representation_multiplier</span><span class="p">(</span>
                                <span class="n">k</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
                            <span class="n">mult_shd</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s_ar</span> <span class="ow">in</span> <span class="n">self_shds</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">s_ar</span><span class="p">])</span>
                            <span class="n">mult_shd</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">s</span> <span class="k">for</span> <span class="n">s_ar</span> <span class="ow">in</span> <span class="n">self_shds</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">s_ar</span><span class="p">])</span>
                            <span class="n">full_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mult_shd</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">story</span><span class="p">,</span> <span class="n">shades</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">bldg</span><span class="o">.</span><span class="n">all_stories</span><span class="p">(),</span> <span class="n">full_shades</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">exclude_plenums</span> <span class="ow">and</span> <span class="n">story</span><span class="o">.</span><span class="n">has_plenums</span><span class="p">:</span>
                        <span class="n">plenum_bldg</span> <span class="o">=</span> <span class="n">Building</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="p">[</span><span class="n">story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()])</span>
                        <span class="n">dummy_model</span> <span class="o">=</span> <span class="n">plenum_bldg</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span>
                            <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                            <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
                        <span class="n">hb_rooms</span> <span class="o">=</span> <span class="n">dummy_model</span><span class="o">.</span><span class="n">rooms</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">hb_rooms</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span>
                            <span class="kc">True</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                            <span class="n">enforce_adj</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">bldg</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
                        <span class="n">hb_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">bldg</span><span class="o">.</span><span class="n">room_3ds_by_story</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">display_name</span><span class="p">))</span>
                    <span class="n">shds</span> <span class="o">=</span> <span class="n">bldg_con</span> <span class="o">+</span> <span class="n">shades</span>
                    <span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">hb_rooms</span><span class="p">,</span> <span class="n">orphaned_shades</span><span class="o">=</span><span class="n">shds</span><span class="p">)</span>
                    <span class="n">model</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">story</span><span class="o">.</span><span class="n">display_name</span>
                    <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>  <span class="c1"># append to the final list of Models</span>
            <span class="k">if</span> <span class="n">bldg</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>  <span class="c1"># organize them by story and add them</span>
                <span class="n">accounted_for</span> <span class="o">=</span> <span class="n">bldg</span><span class="o">.</span><span class="n">room_2d_story_names</span>
                <span class="n">r3_story_dict</span> <span class="o">=</span> <span class="n">bldg</span><span class="o">.</span><span class="n">_story_dict_room_3d</span><span class="p">()</span>
                <span class="n">shds</span> <span class="o">=</span> <span class="n">bldg_con</span> <span class="o">+</span> <span class="n">bldg</span><span class="o">.</span><span class="n">shade_representation</span><span class="p">(</span>
                    <span class="kc">None</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">story_id</span><span class="p">,</span> <span class="n">hb_rooms</span> <span class="ow">in</span> <span class="n">r3_story_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">story_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">accounted_for</span><span class="p">:</span>
                        <span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">story_id</span><span class="p">,</span> <span class="n">hb_rooms</span><span class="p">,</span> <span class="n">orphaned_shades</span><span class="o">=</span><span class="n">shds</span><span class="p">)</span>
                        <span class="n">models</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>  <span class="c1"># append to the final list of Models</span>
        <span class="k">return</span> <span class="n">models</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_compute_roof_heights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list with the center height of each RoofSpecification in the Building.</span>

<span class="sd">        This method is used internally during Honeybee serialization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">roof_specs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rf_height</span> <span class="o">=</span> <span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">max_height</span> <span class="o">+</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">min_height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
                <span class="n">roof_specs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">rf_height</span><span class="p">,</span> <span class="n">story</span><span class="o">.</span><span class="n">roof</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roof_specs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">story</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">roof_specs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_story_roofs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of RoofSpecifications that are relevant for a given Story.</span>

<span class="sd">        The returned list will contain tuples where the first item is the center</span>
<span class="sd">        height of the roof and the second item is the RoofSpecification object.</span>
<span class="sd">        This is used under the hood to determine whether roofs of other Stories</span>
<span class="sd">        should influence a given Room2D.</span>

<span class="sd">        Args:</span>
<span class="sd">            story: A Story object within the Building.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># compute the center height of each roof specification</span>
        <span class="n">bldg_roofs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_roof_heights</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roofs</span>
        <span class="c1"># filter out the roofs for the relevant story</span>
        <span class="n">rel_roofs</span><span class="p">,</span> <span class="n">story_found</span> <span class="o">=</span> <span class="p">[],</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">st_id</span><span class="p">,</span> <span class="n">hgt</span><span class="p">,</span> <span class="n">roof</span> <span class="ow">in</span> <span class="n">bldg_roofs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">story_found</span> <span class="ow">and</span> <span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rel_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">hgt</span><span class="p">,</span> <span class="n">roof</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">story</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">st_id</span><span class="p">:</span>
                <span class="n">story_found</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">rel_roofs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_story_dict_room_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a dictionary of 3D Honeybee Rooms organized by story.&quot;&quot;&quot;</span>
        <span class="n">r3_story_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">r3_story_dict</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">story</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">r3_story_dict</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">story</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">r3_story_dict</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_lowest_story_room_3ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of Honeybee Rooms for the lowest story of the Building.</span>

<span class="sd">        Note that this method should typically only be used when the Building is</span>
<span class="sd">        composed entirely of 3D Honeybee Rooms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r3_story_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_story_dict_room_3d</span><span class="p">()</span>
        <span class="n">floor_hgts</span><span class="p">,</span> <span class="n">floor_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rooms</span> <span class="ow">in</span> <span class="n">r3_story_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">flr_hgt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">average_floor_height</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">rooms</span><span class="p">)</span>
            <span class="n">floor_hgts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flr_hgt</span><span class="p">)</span>
            <span class="n">floor_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rooms</span><span class="p">)</span>
        <span class="n">sort_rooms</span> <span class="o">=</span> <span class="p">[</span><span class="n">rs</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">rs</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">floor_hgts</span><span class="p">,</span> <span class="n">floor_rooms</span><span class="p">),</span>
                                             <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="k">return</span> <span class="n">sort_rooms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_geometry_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Building must have some geometry - at least one Story &#39;</span>
                             <span class="s1">&#39;or one Room under room_3ds.&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_is_room_flat_top_extrusion</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test if a 3D Honeybee Room is a flat-topped extrusion.</span>

<span class="sd">        This will only be True if all Faces in the Room are vertical or horizontal</span>
<span class="sd">        within the angle tolerance.</span>

<span class="sd">        Args:</span>
<span class="sd">            hb_room: The 3D Honeybee Room to be tested.</span>
<span class="sd">            tolerance: The absolute tolerance with which the Room geometry will</span>
<span class="sd">                be evaluated.</span>
<span class="sd">            angle_tolerance: The angle tolerance at which the geometry will</span>
<span class="sd">                be evaluated in degrees.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the 3D Room is a flat-topped extrusion. False if not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set up the parameters for evaluating vertical or horizontal</span>
        <span class="n">vert_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">min_v_ang</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle_tolerance</span><span class="p">)</span>
        <span class="n">max_v_ang</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">min_v_ang</span>
        <span class="n">min_h_ang</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">min_v_ang</span>
        <span class="n">max_h_ang</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">min_v_ang</span>

        <span class="c1"># loop through the 3D Room faces and test them</span>
        <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">_faces</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>  <span class="c1"># first make sure that the geometry is not degenerate</span>
                <span class="n">clean_geo</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">v_ang</span> <span class="o">=</span> <span class="n">clean_geo</span><span class="o">.</span><span class="n">normal</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">vert_vec</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">min_v_ang</span> <span class="ow">or</span> <span class="n">v_ang</span> <span class="o">&gt;=</span> <span class="n">max_v_ang</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">elif</span> <span class="n">min_h_ang</span> <span class="o">&lt;=</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">max_h_ang</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># degenerate face to ignore</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_is_room_sloped_extrusion</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test if a 3D Honeybee Room is a sloped-roof extrusion.</span>

<span class="sd">        This will only be True if all Floor Faces of the Room are horizontal</span>
<span class="sd">        and all Wall Faces are vertical within the angle tolerance. Roof Faces</span>
<span class="sd">        are permitted to have any level of slope as long as they are pointing</span>
<span class="sd">        upwards. AirBoundary Faces must be vertical or horizontal.</span>

<span class="sd">        Args:</span>
<span class="sd">            hb_room: The 3D Honeybee Room to be tested.</span>
<span class="sd">            tolerance: The absolute tolerance with which the Room geometry will</span>
<span class="sd">                be evaluated.</span>
<span class="sd">            angle_tolerance: The angle tolerance at which the geometry will</span>
<span class="sd">                be evaluated in degrees.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the 3D Room is a sloped-roof extrusion. False if not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set up the parameters for evaluating vertical or horizontal</span>
        <span class="n">vert_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">min_v_ang</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle_tolerance</span><span class="p">)</span>
        <span class="n">max_v_ang</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">min_v_ang</span>
        <span class="n">min_h_ang</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">min_v_ang</span>
        <span class="n">max_h_ang</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">min_v_ang</span>
        <span class="n">sloped_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># loop through the 3D Room faces and test them</span>
        <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">_faces</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>  <span class="c1"># first make sure that the geometry is not degenerate</span>
                <span class="n">clean_geo</span> <span class="o">=</span> <span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">v_ang</span> <span class="o">=</span> <span class="n">clean_geo</span><span class="o">.</span><span class="n">normal</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">vert_vec</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">Wall</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">min_h_ang</span> <span class="o">&lt;=</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">max_h_ang</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">Floor</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">min_v_ang</span> <span class="ow">or</span> <span class="n">v_ang</span> <span class="o">&gt;=</span> <span class="n">max_v_ang</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">RoofCeiling</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">min_v_ang</span> <span class="ow">or</span> <span class="n">v_ang</span> <span class="o">&gt;=</span> <span class="n">max_v_ang</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">max_h_ang</span><span class="p">:</span>
                        <span class="n">sloped_count</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># AirBoundary Faces must be vertical or horizontal</span>
                    <span class="k">if</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">min_v_ang</span> <span class="ow">or</span> <span class="n">v_ang</span> <span class="o">&gt;=</span> <span class="n">max_v_ang</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">min_h_ang</span> <span class="o">&lt;=</span> <span class="n">v_ang</span> <span class="o">&lt;=</span> <span class="n">max_h_ang</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># degenerate face to ignore</span>
                <span class="k">pass</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_honeybee_shades</span><span class="p">(</span><span class="n">buildings</span><span class="p">,</span> <span class="n">context_shades</span><span class="p">,</span> <span class="n">shade_distance</span><span class="p">,</span> <span class="n">cap</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get lists of Honeybee shades from Building and ContextShade objects.&quot;&quot;&quot;</span>
        <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">con_shades</span><span class="p">,</span> <span class="n">con_pts</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">shade_distance</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">shade_distance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">bldg</span> <span class="ow">in</span> <span class="n">buildings</span><span class="p">:</span>
                <span class="n">b_shades</span> <span class="o">=</span> <span class="n">bldg</span><span class="o">.</span><span class="n">shade_representation</span><span class="p">(</span>
                    <span class="n">cap</span><span class="o">=</span><span class="n">cap</span><span class="p">,</span> <span class="n">include_room3ds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">bldg_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_shades</span><span class="p">)</span>
                <span class="n">b_min</span><span class="p">,</span> <span class="n">b_max</span> <span class="o">=</span> <span class="n">bldg</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">bldg</span><span class="o">.</span><span class="n">max</span>
                <span class="n">center</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">((</span><span class="n">b_min</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">b_max</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">b_min</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">b_max</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">bldg_pts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">b_min</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">b_max</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">context_shades</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">con</span> <span class="ow">in</span> <span class="n">context_shades</span><span class="p">:</span>
                    <span class="n">con_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">con</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">())</span>
                    <span class="n">c_min</span><span class="p">,</span> <span class="n">c_max</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">con</span><span class="o">.</span><span class="n">max</span>
                    <span class="n">center</span> <span class="o">=</span> <span class="n">Point2D</span><span class="p">((</span><span class="n">c_min</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">c_max</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">c_min</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">c_max</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="n">con_pts</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c_min</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">c_max</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span><span class="p">,</span> <span class="n">con_shades</span><span class="p">,</span> <span class="n">con_pts</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_add_context_to_honeybee</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">bldg_shades</span><span class="p">,</span> <span class="n">bldg_pts</span><span class="p">,</span> <span class="n">con_shades</span><span class="p">,</span> <span class="n">con_pts</span><span class="p">,</span>
                                 <span class="n">shade_distance</span><span class="p">,</span> <span class="n">num_bldg</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add context shades to a Honeybee Model based on shade distance.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">shade_distance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># add all other bldg shades to the model</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num_bldg</span><span class="p">):</span>  <span class="c1"># buildings before this one</span>
                <span class="k">for</span> <span class="n">shd</span> <span class="ow">in</span> <span class="n">bldg_shades</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="n">model</span><span class="o">.</span><span class="n">add_shade</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>  <span class="c1"># buildings after this one</span>
                <span class="k">for</span> <span class="n">shd</span> <span class="ow">in</span> <span class="n">bldg_shades</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                    <span class="n">model</span><span class="o">.</span><span class="n">add_shade</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">c_shade</span> <span class="ow">in</span> <span class="n">con_shades</span><span class="p">:</span>  <span class="c1"># context shades</span>
                <span class="k">for</span> <span class="n">shd</span> <span class="ow">in</span> <span class="n">c_shade</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shd</span><span class="p">,</span> <span class="n">Shade</span><span class="p">):</span>
                        <span class="n">model</span><span class="o">.</span><span class="n">add_shade</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">model</span><span class="o">.</span><span class="n">add_shade_mesh</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">shade_distance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># add only shade within the distance</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num_bldg</span><span class="p">):</span>  <span class="c1"># buildings before this one</span>
                <span class="k">if</span> <span class="n">Building</span><span class="o">.</span><span class="n">_bound_rect_in_dist</span><span class="p">(</span><span class="n">bldg_pts</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">bldg_pts</span><span class="p">[</span><span class="n">j</span><span class="p">],</span>
                                                <span class="n">shade_distance</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">shd</span> <span class="ow">in</span> <span class="n">bldg_shades</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                        <span class="n">model</span><span class="o">.</span><span class="n">add_shade</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>  <span class="c1"># buildings after this one</span>
                <span class="k">if</span> <span class="n">Building</span><span class="o">.</span><span class="n">_bound_rect_in_dist</span><span class="p">(</span><span class="n">bldg_pts</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">bldg_pts</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
                                                <span class="n">shade_distance</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">shd</span> <span class="ow">in</span> <span class="n">bldg_shades</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                        <span class="n">model</span><span class="o">.</span><span class="n">add_shade</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">con_shades</span><span class="p">)):</span>  <span class="c1"># context shades</span>
                <span class="k">if</span> <span class="n">Building</span><span class="o">.</span><span class="n">_bound_rect_in_dist</span><span class="p">(</span><span class="n">bldg_pts</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">con_pts</span><span class="p">[</span><span class="n">s</span><span class="p">],</span>
                                                <span class="n">shade_distance</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">shd</span> <span class="ow">in</span> <span class="n">con_shades</span><span class="p">[</span><span class="n">s</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shd</span><span class="p">,</span> <span class="n">Shade</span><span class="p">):</span>
                            <span class="n">model</span><span class="o">.</span><span class="n">add_shade</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">model</span><span class="o">.</span><span class="n">add_shade_mesh</span><span class="p">(</span><span class="n">shd</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_room_2ds</span><span class="p">(</span><span class="n">face3d_array</span><span class="p">,</span> <span class="n">flr_to_ceiling</span><span class="p">,</span> <span class="n">perim_offset</span><span class="p">,</span>
                           <span class="n">bldg_id</span><span class="p">,</span> <span class="n">flr_count</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate Room2D objects given geometry and information about their parent.</span>

<span class="sd">        Args:</span>
<span class="sd">            face3d_array: An array of Face3D objects to be turned into a Story&#39;s Room2Ds.</span>
<span class="sd">            flr_to_ceiling: The floor-to-ceiling height to use for all the Room2Ds.</span>
<span class="sd">            perim_offset: A perimeter offset to be used to subdivide Face3Ds</span>
<span class="sd">            bldg_id: Text for the identifier to which the rooms belong.</span>
<span class="sd">            flr_count: Integer for the which story the building belongs to.</span>
<span class="sd">            tolerance: Tolerance to be used in the creation of the Room2Ds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if there is a non-zero perimeter offset, separate core vs. perimeter zones</span>
        <span class="k">if</span> <span class="n">perim_offset</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">perim_offset</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;perimeter_offset cannot be less than than 0.&#39;</span>
            <span class="n">new_face3d_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">floor_face</span> <span class="ow">in</span> <span class="n">face3d_array</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">floor_face</span> <span class="o">=</span> <span class="n">floor_face</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">perimeter</span><span class="p">,</span> <span class="n">core</span> <span class="o">=</span> <span class="n">perimeter_core_subfaces</span><span class="p">(</span>
                        <span class="n">floor_face</span><span class="p">,</span> <span class="n">perim_offset</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">new_face3d_array</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">perimeter</span><span class="p">)</span>
                    <span class="n">new_face3d_array</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">core</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># the generation of the polyskel failed</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Core/perimeter generation failed:</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                    <span class="n">new_face3d_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">floor_face</span><span class="p">)</span>  <span class="c1"># just use existing floor</span>
            <span class="n">face3d_array</span> <span class="o">=</span> <span class="n">new_face3d_array</span>  <span class="c1"># replace with offset core/perimeter</span>

        <span class="c1"># create the Room2D objects</span>
        <span class="n">room_2ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">room_geo</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">face3d_array</span><span class="p">):</span>
            <span class="n">room</span> <span class="o">=</span> <span class="n">Room2D</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Floor</span><span class="si">{}</span><span class="s1">_Room</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bldg_id</span><span class="p">,</span> <span class="n">flr_count</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">room_geo</span><span class="p">,</span> <span class="n">flr_to_ceiling</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="n">room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>

        <span class="c1"># solve for interior adjacency if there core/perimeter zoning was requested</span>
        <span class="k">if</span> <span class="n">perim_offset</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">room_2ds</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">intersect_adjacency</span><span class="p">(</span>
                <span class="n">room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">preserve_wall_props</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">Room2D</span><span class="o">.</span><span class="n">solve_adjacency</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">room_2ds</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_is_story_equivalent</span><span class="p">(</span><span class="n">face1</span><span class="p">,</span> <span class="n">face2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check whether area, XY centerpoint and XY first point match between Face3D.</span>

<span class="sd">        Args:</span>
<span class="sd">            face1: First Face3D to check.</span>
<span class="sd">            face2: Second Face3D to check.</span>
<span class="sd">            tolerance: The maximum difference between x, y, and z values at which</span>
<span class="sd">                point vertices are considered to be the same.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if face1 is geometrically equivalent to face 2 else False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check wether the center points match within tolerance.</span>
        <span class="n">cent1</span> <span class="o">=</span> <span class="n">face1</span><span class="o">.</span><span class="n">center</span>
        <span class="n">cent2</span> <span class="o">=</span> <span class="n">face2</span><span class="o">.</span><span class="n">center</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">cent1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">cent2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tolerance</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">cent1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">cent2</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># check wether the point at start matches within tolerance</span>
        <span class="n">start1</span> <span class="o">=</span> <span class="n">face1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">start2</span> <span class="o">=</span> <span class="n">face2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">start1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">start2</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tolerance</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">start1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">start2</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tolerance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># check whether areas match within tolerance</span>
        <span class="n">area_tol</span> <span class="o">=</span> <span class="n">tolerance</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">face1</span><span class="o">.</span><span class="n">area</span> <span class="o">-</span> <span class="n">face2</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">area_tol</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_bound_rect_in_dist</span><span class="p">(</span><span class="n">bound_pts1</span><span class="p">,</span> <span class="n">bound_pts2</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the bounding rectangles of two footprints overlap within a distance.</span>

<span class="sd">        Checking the overlap of the bounding rectangles is extremely quick given this</span>
<span class="sd">        method&#39;s use of the Separating Axis Theorem.</span>

<span class="sd">        Args:</span>
<span class="sd">            bound_pts1: An array of Point2Ds (min, center, max) for the first footprint.</span>
<span class="sd">            bound_pts2: An array of Point2Ds (min, center, max) for the second footprint.</span>
<span class="sd">            distance: Acceptable distance between the two bounding rectangles.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Bounding rectangle check using the Separating Axis Theorem</span>
        <span class="n">polygon1_width</span> <span class="o">=</span> <span class="n">bound_pts1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">bound_pts1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span>
        <span class="n">polygon2_width</span> <span class="o">=</span> <span class="n">bound_pts2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">bound_pts2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span>
        <span class="n">dist_btwn_x</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">bound_pts1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">bound_pts2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">x_gap_btwn_rect</span> <span class="o">=</span> <span class="n">dist_btwn_x</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">polygon1_width</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">polygon2_width</span><span class="p">)</span>

        <span class="n">polygon1_height</span> <span class="o">=</span> <span class="n">bound_pts1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">bound_pts1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span>
        <span class="n">polygon2_height</span> <span class="o">=</span> <span class="n">bound_pts2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">bound_pts2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span>
        <span class="n">dist_btwn_y</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">bound_pts1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">bound_pts2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">y_gap_btwn_rect</span> <span class="o">=</span> <span class="n">dist_btwn_y</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">polygon1_height</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">polygon2_height</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_gap_btwn_rect</span> <span class="o">&gt;</span> <span class="n">distance</span> <span class="ow">or</span> <span class="n">y_gap_btwn_rect</span> <span class="o">&gt;</span> <span class="n">distance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># no overlap</span>
        <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># overlap exists</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_separated_ground_floor</span><span class="p">(</span><span class="n">base_story</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a separated ground floor from a base_story.&quot;&quot;&quot;</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="n">base_story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>  <span class="c1"># generate a new bottom floor</span>
        <span class="n">bottom</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">bottom</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s1">&#39;Ground&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bottom</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_separated_top_floor</span><span class="p">(</span><span class="n">base_story</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a separated top floor from a base_story.&quot;&quot;&quot;</span>
        <span class="n">top</span> <span class="o">=</span> <span class="n">base_story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>  <span class="c1"># generate a new top floor</span>
        <span class="n">move_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">top</span><span class="o">.</span><span class="n">floor_to_floor_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">top</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">top</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">move_vec</span><span class="p">)</span>
        <span class="n">top</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">top</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="s1">&#39;Top&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">top</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_b</span> <span class="o">=</span> <span class="n">Building</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">story</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span> <span class="k">for</span> <span class="n">story</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_3ds</span><span class="p">))</span>
        <span class="n">new_b</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span>
        <span class="n">new_b</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">new_b</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">_duplicate_extension_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_b</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unique_stories</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Building: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span></div>

</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2026, Ladybug Tools.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>