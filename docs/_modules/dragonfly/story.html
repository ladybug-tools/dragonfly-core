<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dragonfly.story &#8212; dragonfly-core  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=0b9525ea" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<link rel="icon" type="image/x-icon" href="https://github.com/ladybug-tools/artwork/raw/refs/heads/master/icons_bugs/ico/dragonfly.ico">
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          dragonfly-core</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/index.html#commands">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cli/translate.html">translate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate">dragonfly translate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-merge-models-to-honeybee">merge-models-to-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-model-to-honeybee">model-to-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/translate.html#dragonfly-translate-model-to-honeybee-file">model-to-honeybee-file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/validate.html">validate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate">dragonfly validate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate-model">model</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/validate.html#dragonfly-validate-room-collisions">room-collisions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/create.html">create</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/create.html#dragonfly-create">dragonfly create</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-from-geojson">from-geojson</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-from-honeybee">from-honeybee</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/create.html#dragonfly-create-merge-models">merge-models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cli/edit.html">edit</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit">dragonfly edit</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-align">align</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-convert-units">convert-units</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-remove-short-segments">remove-short-segments</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-reset-room-boundaries">reset-room-boundaries</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-solve-adjacency">solve-adjacency</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../cli/edit.html#dragonfly-edit-windows-by-ratio">windows-by-ratio</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dragonfly.html">dragonfly package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.cli.html">dragonfly.cli package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.cli.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.create.html">dragonfly.cli.create module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.from_geojson"><code class="docutils literal notranslate"><span class="pre">from_geojson()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.create.html#dragonfly.cli.create.merge_models"><code class="docutils literal notranslate"><span class="pre">merge_models()</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.edit.html">dragonfly.cli.edit module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.translate.html">dragonfly.cli.translate module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.merge_models_to_honeybee"><code class="docutils literal notranslate"><span class="pre">merge_models_to_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.model_to_honeybee"><code class="docutils literal notranslate"><span class="pre">model_to_honeybee()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.translate.html#dragonfly.cli.translate.model_to_honeybee_file"><code class="docutils literal notranslate"><span class="pre">model_to_honeybee_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.cli.validate.html">dragonfly.cli.validate module</a><ul>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.validate.html#dragonfly.cli.validate.validate_model"><code class="docutils literal notranslate"><span class="pre">validate_model()</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="../../dragonfly.cli.validate.html#dragonfly.cli.validate.validate_room_collisions"><code class="docutils literal notranslate"><span class="pre">validate_room_collisions()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.cli.html#module-dragonfly.cli">Module contents</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.writer.html">dragonfly.writer package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.writer.html#submodules">Submodules</a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.building.html">dragonfly.writer.building module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.context.html">dragonfly.writer.context module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.model.html">dragonfly.writer.model module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.room2d.html">dragonfly.writer.room2d module</a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.writer.story.html">dragonfly.writer.story module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.writer.html#module-dragonfly.writer">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.building.html">dragonfly.building module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building"><code class="docutils literal notranslate"><span class="pre">Building</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_roof_geometry"><code class="docutils literal notranslate"><span class="pre">add_roof_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_room_3ds"><code class="docutils literal notranslate"><span class="pre">add_room_3ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.add_stories"><code class="docutils literal notranslate"><span class="pre">add_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.all_room_2ds"><code class="docutils literal notranslate"><span class="pre">all_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.all_stories"><code class="docutils literal notranslate"><span class="pre">all_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.buildings_to_honeybee"><code class="docutils literal notranslate"><span class="pre">buildings_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.check_collisions_between_stories"><code class="docutils literal notranslate"><span class="pre">check_collisions_between_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_all_room_3ds_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_all_room_3ds_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_multipliers_to_stories"><code class="docutils literal notranslate"><span class="pre">convert_multipliers_to_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_plenum_depths_to_room_2ds"><code class="docutils literal notranslate"><span class="pre">convert_plenum_depths_to_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3d_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_room_3d_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.convert_room_3ds_to_2d"><code class="docutils literal notranslate"><span class="pre">convert_room_3ds_to_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.district_to_honeybee"><code class="docutils literal notranslate"><span class="pre">district_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.find_adjacency_gaps"><code class="docutils literal notranslate"><span class="pre">find_adjacency_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.footprint"><code class="docutils literal notranslate"><span class="pre">footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_all_story_geometry"><code class="docutils literal notranslate"><span class="pre">from_all_story_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_footprint"><code class="docutils literal notranslate"><span class="pre">from_footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_floors_ceilings"><code class="docutils literal notranslate"><span class="pre">has_floors_ceilings()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.make_basement_stories"><code class="docutils literal notranslate"><span class="pre">make_basement_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.match_and_replace_room_2d_floor_geometry"><code class="docutils literal notranslate"><span class="pre">match_and_replace_room_2d_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.process_alleys"><code class="docutils literal notranslate"><span class="pre">process_alleys()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.remove_duplicate_roofs"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.remove_stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">remove_stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_2ds_by_display_name"><code class="docutils literal notranslate"><span class="pre">room_2ds_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_display_name"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds_by_story"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_story()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_mid_floors"><code class="docutils literal notranslate"><span class="pre">separate_mid_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_room_2d_plenums"><code class="docutils literal notranslate"><span class="pre">separate_room_2d_plenums()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.separate_top_bottom_floors"><code class="docutils literal notranslate"><span class="pre">separate_top_bottom_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.shade_representation"><code class="docutils literal notranslate"><span class="pre">shade_representation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.sort_stories"><code class="docutils literal notranslate"><span class="pre">sort_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.split_room_2d_vertically"><code class="docutils literal notranslate"><span class="pre">split_room_2d_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_display_name"><code class="docutils literal notranslate"><span class="pre">stories_by_display_name()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.stories_to_honeybee"><code class="docutils literal notranslate"><span class="pre">stories_to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.suggested_alignment_axes"><code class="docutils literal notranslate"><span class="pre">suggested_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.footprint_area"><code class="docutils literal notranslate"><span class="pre">footprint_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_2d_plenums"><code class="docutils literal notranslate"><span class="pre">has_room_2d_plenums</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_2ds"><code class="docutils literal notranslate"><span class="pre">has_room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_room_3ds"><code class="docutils literal notranslate"><span class="pre">has_room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.has_zones"><code class="docutils literal notranslate"><span class="pre">has_zones</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height"><code class="docutils literal notranslate"><span class="pre">height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height_above_ground"><code class="docutils literal notranslate"><span class="pre">height_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.height_from_first_floor"><code class="docutils literal notranslate"><span class="pre">height_from_first_floor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_2d_story_names"><code class="docutils literal notranslate"><span class="pre">room_2d_story_names</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_apertures"><code class="docutils literal notranslate"><span class="pre">room_3d_apertures</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_doors"><code class="docutils literal notranslate"><span class="pre">room_3d_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_faces"><code class="docutils literal notranslate"><span class="pre">room_3d_faces</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_shades"><code class="docutils literal notranslate"><span class="pre">room_3d_shades</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3d_story_names"><code class="docutils literal notranslate"><span class="pre">room_3d_story_names</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.room_3ds"><code class="docutils literal notranslate"><span class="pre">room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.story_count"><code class="docutils literal notranslate"><span class="pre">story_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.story_count_above_ground"><code class="docutils literal notranslate"><span class="pre">story_count_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_room_2ds"><code class="docutils literal notranslate"><span class="pre">unique_room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_stories"><code class="docutils literal notranslate"><span class="pre">unique_stories</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.unique_stories_above_ground"><code class="docutils literal notranslate"><span class="pre">unique_stories_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.building.html#dragonfly.building.Building.zone_dict"><code class="docutils literal notranslate"><span class="pre">zone_dict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.colorobj.html">dragonfly.colorobj module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D"><code class="docutils literal notranslate"><span class="pre">ColorRoom2D</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attr_name"><code class="docutils literal notranslate"><span class="pre">attr_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attr_name_end"><code class="docutils literal notranslate"><span class="pre">attr_name_end</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes"><code class="docutils literal notranslate"><span class="pre">attributes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes_original"><code class="docutils literal notranslate"><span class="pre">attributes_original</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.attributes_unique"><code class="docutils literal notranslate"><span class="pre">attributes_unique</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.floor_faces"><code class="docutils literal notranslate"><span class="pre">floor_faces</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.graphic_container"><code class="docutils literal notranslate"><span class="pre">graphic_container</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.legend_parameters"><code class="docutils literal notranslate"><span class="pre">legend_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.max_point"><code class="docutils literal notranslate"><span class="pre">max_point</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.min_point"><code class="docutils literal notranslate"><span class="pre">min_point</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.colorobj.html#dragonfly.colorobj.ColorRoom2D.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.config.html">dragonfly.config module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders"><code class="docutils literal notranslate"><span class="pre">Folders</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_core_version"><code class="docutils literal notranslate"><span class="pre">dragonfly_core_version</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_core_version_str"><code class="docutils literal notranslate"><span class="pre">dragonfly_core_version_str</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_schema_version"><code class="docutils literal notranslate"><span class="pre">dragonfly_schema_version</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.dragonfly_schema_version_str"><code class="docutils literal notranslate"><span class="pre">dragonfly_schema_version_str</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.config.html#dragonfly.config.Folders.python_package_path"><code class="docutils literal notranslate"><span class="pre">python_package_path</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.context.html">dragonfly.context module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade"><code class="docutils literal notranslate"><span class="pre">ContextShade</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.apply_vertex_map"><code class="docutils literal notranslate"><span class="pre">apply_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.is_conforming"><code class="docutils literal notranslate"><span class="pre">is_conforming()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.unconforming_vertex_map"><code class="docutils literal notranslate"><span class="pre">unconforming_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.area"><code class="docutils literal notranslate"><span class="pre">area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.geometry"><code class="docutils literal notranslate"><span class="pre">geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.is_detached"><code class="docutils literal notranslate"><span class="pre">is_detached</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.context.html#dragonfly.context.ContextShade.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.dictutil.html">dragonfly.dictutil module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.dictutil.html#dragonfly.dictutil.dict_to_object"><code class="docutils literal notranslate"><span class="pre">dict_to_object()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.extensionutil.html">dragonfly.extensionutil module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.building_extension_dicts"><code class="docutils literal notranslate"><span class="pre">building_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.context_shade_extension_dicts"><code class="docutils literal notranslate"><span class="pre">context_shade_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.model_extension_dicts"><code class="docutils literal notranslate"><span class="pre">model_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.room2d_extension_dicts"><code class="docutils literal notranslate"><span class="pre">room2d_extension_dicts()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.extensionutil.html#dragonfly.extensionutil.story_extension_dicts"><code class="docutils literal notranslate"><span class="pre">story_extension_dicts()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.model.html">dragonfly.model module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_building"><code class="docutils literal notranslate"><span class="pre">add_building()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_context_shade"><code class="docutils literal notranslate"><span class="pre">add_context_shade()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_model"><code class="docutils literal notranslate"><span class="pre">add_model()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.buildings_by_identifier"><code class="docutils literal notranslate"><span class="pre">buildings_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all"><code class="docutils literal notranslate"><span class="pre">check_all()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_duplicate_identifiers"><code class="docutils literal notranslate"><span class="pre">check_all_duplicate_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_room3d"><code class="docutils literal notranslate"><span class="pre">check_all_room3d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_all_room_collisions"><code class="docutils literal notranslate"><span class="pre">check_all_room_collisions()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_collisions_between_stories"><code class="docutils literal notranslate"><span class="pre">check_collisions_between_stories()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_degenerate_room_2ds"><code class="docutils literal notranslate"><span class="pre">check_degenerate_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_building_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_building_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_context_shade_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_context_shade_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_room_2d_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_room_2d_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_duplicate_story_identifiers"><code class="docutils literal notranslate"><span class="pre">check_duplicate_story_identifiers()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_for_error"><code class="docutils literal notranslate"><span class="pre">check_for_error()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_for_extension"><code class="docutils literal notranslate"><span class="pre">check_for_extension()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">check_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_no_roof_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_roof_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_no_room2d_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_room2d_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_plenum_depths"><code class="docutils literal notranslate"><span class="pre">check_plenum_depths()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_roofs_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roofs_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_room2d_floor_heights_valid"><code class="docutils literal notranslate"><span class="pre">check_room2d_floor_heights_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_self_intersecting_room_2ds"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.check_window_parameters_valid"><code class="docutils literal notranslate"><span class="pre">check_window_parameters_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.clean_irrational_geometry"><code class="docutils literal notranslate"><span class="pre">clean_irrational_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.context_shade_by_identifier"><code class="docutils literal notranslate"><span class="pre">context_shade_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.convert_to_units"><code class="docutils literal notranslate"><span class="pre">convert_to_units()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dfjson"><code class="docutils literal notranslate"><span class="pre">from_dfjson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dfpkl"><code class="docutils literal notranslate"><span class="pre">from_dfpkl()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_file"><code class="docutils literal notranslate"><span class="pre">from_file()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_geojson"><code class="docutils literal notranslate"><span class="pre">from_geojson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.from_pomf"><code class="docutils literal notranslate"><span class="pre">from_pomf()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.lines_from_pomf"><code class="docutils literal notranslate"><span class="pre">lines_from_pomf()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.model_dict_room_2d_subset"><code class="docutils literal notranslate"><span class="pre">model_dict_room_2d_subset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.model_dict_subset"><code class="docutils literal notranslate"><span class="pre">model_dict_subset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.remove_duplicate_roofs"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reset_coordinate_system"><code class="docutils literal notranslate"><span class="pre">reset_coordinate_system()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reset_ids"><code class="docutils literal notranslate"><span class="pre">reset_ids()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.resolve_id_collisions"><code class="docutils literal notranslate"><span class="pre">resolve_id_collisions()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_2ds_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_2ds_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_3ds_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_3ds_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.separate_top_bottom_floors"><code class="docutils literal notranslate"><span class="pre">separate_top_bottom_floors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.stories_by_identifier"><code class="docutils literal notranslate"><span class="pre">stories_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dfjson"><code class="docutils literal notranslate"><span class="pre">to_dfjson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dfpkl"><code class="docutils literal notranslate"><span class="pre">to_dfpkl()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_geojson"><code class="docutils literal notranslate"><span class="pre">to_geojson()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_geojson_dict"><code class="docutils literal notranslate"><span class="pre">to_geojson_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.validate"><code class="docutils literal notranslate"><span class="pre">validate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.ERROR_MAP"><code class="docutils literal notranslate"><span class="pre">ERROR_MAP</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.angle_tolerance"><code class="docutils literal notranslate"><span class="pre">angle_tolerance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_height"><code class="docutils literal notranslate"><span class="pre">average_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_height_above_ground"><code class="docutils literal notranslate"><span class="pre">average_height_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_story_count"><code class="docutils literal notranslate"><span class="pre">average_story_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.average_story_count_above_ground"><code class="docutils literal notranslate"><span class="pre">average_story_count_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.buildings"><code class="docutils literal notranslate"><span class="pre">buildings</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.context_shades"><code class="docutils literal notranslate"><span class="pre">context_shades</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.footprint_area"><code class="docutils literal notranslate"><span class="pre">footprint_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.reference_vector"><code class="docutils literal notranslate"><span class="pre">reference_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.room_3ds"><code class="docutils literal notranslate"><span class="pre">room_3ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.stories"><code class="docutils literal notranslate"><span class="pre">stories</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.tolerance"><code class="docutils literal notranslate"><span class="pre">tolerance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.units"><code class="docutils literal notranslate"><span class="pre">units</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.model.html#dragonfly.model.Model.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.projection.html">dragonfly.projection module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.lon_lat_to_polygon"><code class="docutils literal notranslate"><span class="pre">lon_lat_to_polygon()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.meters_to_long_lat_factors"><code class="docutils literal notranslate"><span class="pre">meters_to_long_lat_factors()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.origin_long_lat_from_location"><code class="docutils literal notranslate"><span class="pre">origin_long_lat_from_location()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.projection.html#dragonfly.projection.polygon_to_lon_lat"><code class="docutils literal notranslate"><span class="pre">polygon_to_lon_lat()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.properties.html">dragonfly.properties module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties"><code class="docutils literal notranslate"><span class="pre">BuildingProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_ceiling_plenum_face_properties"><code class="docutils literal notranslate"><span class="pre">apply_ceiling_plenum_face_properties()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_floor_plenum_face_properties"><code class="docutils literal notranslate"><span class="pre">apply_floor_plenum_face_properties()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.apply_properties_from_geojson_dict"><code class="docutils literal notranslate"><span class="pre">apply_properties_from_geojson_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.make_plenums"><code class="docutils literal notranslate"><span class="pre">make_plenums()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.BuildingProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties"><code class="docutils literal notranslate"><span class="pre">ContextShadeProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ContextShadeProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties"><code class="docutils literal notranslate"><span class="pre">ModelProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.apply_properties_from_dict"><code class="docutils literal notranslate"><span class="pre">apply_properties_from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.ModelProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties"><code class="docutils literal notranslate"><span class="pre">Room2DProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.Room2DProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties"><code class="docutils literal notranslate"><span class="pre">StoryProperties</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.properties.html#dragonfly.properties.StoryProperties.host"><code class="docutils literal notranslate"><span class="pre">host</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.roof.html">dragonfly.roof module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification"><code class="docutils literal notranslate"><span class="pre">RoofSpecification</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.check_roof_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roof_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.find_gaps"><code class="docutils literal notranslate"><span class="pre">find_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.from_geometry_to_join"><code class="docutils literal notranslate"><span class="pre">from_geometry_to_join()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.join_geometries"><code class="docutils literal notranslate"><span class="pre">join_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.overlap_count"><code class="docutils literal notranslate"><span class="pre">overlap_count()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.pull_to_segments"><code class="docutils literal notranslate"><span class="pre">pull_to_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.remove_small_holes"><code class="docutils literal notranslate"><span class="pre">remove_small_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.resolved_geometry"><code class="docutils literal notranslate"><span class="pre">resolved_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_lines"><code class="docutils literal notranslate"><span class="pre">split_with_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_polygon"><code class="docutils literal notranslate"><span class="pre">split_with_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_thick_line"><code class="docutils literal notranslate"><span class="pre">split_with_thick_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.split_with_thick_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_thick_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.subtract_roofs"><code class="docutils literal notranslate"><span class="pre">subtract_roofs()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.union_coplanar"><code class="docutils literal notranslate"><span class="pre">union_coplanar()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.update_geometry_2d"><code class="docutils literal notranslate"><span class="pre">update_geometry_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.update_geometry_3d"><code class="docutils literal notranslate"><span class="pre">update_geometry_3d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.altitudes"><code class="docutils literal notranslate"><span class="pre">altitudes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.azimuths"><code class="docutils literal notranslate"><span class="pre">azimuths</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.boundary_geometry_2d"><code class="docutils literal notranslate"><span class="pre">boundary_geometry_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.center_heights"><code class="docutils literal notranslate"><span class="pre">center_heights</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.geometry"><code class="docutils literal notranslate"><span class="pre">geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.geometry_2d"><code class="docutils literal notranslate"><span class="pre">geometry_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.max_height"><code class="docutils literal notranslate"><span class="pre">max_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.min_height"><code class="docutils literal notranslate"><span class="pre">min_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.planes"><code class="docutils literal notranslate"><span class="pre">planes</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.roof.html#dragonfly.roof.RoofSpecification.tilts"><code class="docutils literal notranslate"><span class="pre">tilts</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.room2d.html">dragonfly.room2d module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D"><code class="docutils literal notranslate"><span class="pre">Room2D</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.apply_vertex_map"><code class="docutils literal notranslate"><span class="pre">apply_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.assign_sub_faces"><code class="docutils literal notranslate"><span class="pre">assign_sub_faces()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.average_orientation"><code class="docutils literal notranslate"><span class="pre">average_orientation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_degenerate"><code class="docutils literal notranslate"><span class="pre">check_degenerate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_horizontal"><code class="docutils literal notranslate"><span class="pre">check_horizontal()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_plenum_depths"><code class="docutils literal notranslate"><span class="pre">check_plenum_depths()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.check_window_parameters_valid"><code class="docutils literal notranslate"><span class="pre">check_window_parameters_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.coordinate_room_2d_vertices"><code class="docutils literal notranslate"><span class="pre">coordinate_room_2d_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.coordinate_segment_vertices"><code class="docutils literal notranslate"><span class="pre">coordinate_segment_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency"><code class="docutils literal notranslate"><span class="pre">find_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency_by_guide_lines"><code class="docutils literal notranslate"><span class="pre">find_adjacency_by_guide_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_adjacency_gaps"><code class="docutils literal notranslate"><span class="pre">find_adjacency_gaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.find_segment_adjacency"><code class="docutils literal notranslate"><span class="pre">find_segment_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segment_by_index"><code class="docutils literal notranslate"><span class="pre">floor_segment_by_index()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_polygon"><code class="docutils literal notranslate"><span class="pre">from_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.from_vertices"><code class="docutils literal notranslate"><span class="pre">from_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.generate_alignment_axes"><code class="docutils literal notranslate"><span class="pre">generate_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.generate_grid"><code class="docutils literal notranslate"><span class="pre">generate_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_adjacency"><code class="docutils literal notranslate"><span class="pre">group_by_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_air_boundary_adjacency"><code class="docutils literal notranslate"><span class="pre">group_by_air_boundary_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_attribute"><code class="docutils literal notranslate"><span class="pre">group_by_attribute()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_floor_height"><code class="docutils literal notranslate"><span class="pre">group_by_floor_height()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.group_by_orientation"><code class="docutils literal notranslate"><span class="pre">group_by_orientation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.grouped_horizontal_boundary"><code class="docutils literal notranslate"><span class="pre">grouped_horizontal_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.intersect_adjacency"><code class="docutils literal notranslate"><span class="pre">intersect_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_by_boundary"><code class="docutils literal notranslate"><span class="pre">join_by_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.join_to_neighbor"><code class="docutils literal notranslate"><span class="pre">join_to_neighbor()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.label_point"><code class="docutils literal notranslate"><span class="pre">label_point()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.make_skylights_flush"><code class="docutils literal notranslate"><span class="pre">make_skylights_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.make_windows_flush"><code class="docutils literal notranslate"><span class="pre">make_windows_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_skylights"><code class="docutils literal notranslate"><span class="pre">offset_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_skylights_from_edges"><code class="docutils literal notranslate"><span class="pre">offset_skylights_from_edges()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.offset_windows"><code class="docutils literal notranslate"><span class="pre">offset_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.overlap_area"><code class="docutils literal notranslate"><span class="pre">overlap_area()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.patch_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">patch_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_polygon"><code class="docutils literal notranslate"><span class="pre">pull_to_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_polyline"><code class="docutils literal notranslate"><span class="pre">pull_to_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_room_2d"><code class="docutils literal notranslate"><span class="pre">pull_to_room_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.pull_to_segments"><code class="docutils literal notranslate"><span class="pre">pull_to_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.rectangularize_windows"><code class="docutils literal notranslate"><span class="pre">rectangularize_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.relevant_roof_geometry"><code class="docutils literal notranslate"><span class="pre">relevant_roof_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_colinear_vertices"><code class="docutils literal notranslate"><span class="pre">remove_colinear_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_degenerate_holes"><code class="docutils literal notranslate"><span class="pre">remove_degenerate_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_duplicate_vertices"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_short_segments"><code class="docutils literal notranslate"><span class="pre">remove_short_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_holes"><code class="docutils literal notranslate"><span class="pre">remove_small_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_skylights"><code class="docutils literal notranslate"><span class="pre">remove_small_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.replace_floor_geometry"><code class="docutils literal notranslate"><span class="pre">replace_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.reset_adjacency"><code class="docutils literal notranslate"><span class="pre">reset_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.room_orientation_plane"><code class="docutils literal notranslate"><span class="pre">room_orientation_plane()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_indices_by_guide_lines"><code class="docutils literal notranslate"><span class="pre">segment_indices_by_guide_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_orientations"><code class="docutils literal notranslate"><span class="pre">segment_orientations()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.separate_plenum"><code class="docutils literal notranslate"><span class="pre">separate_plenum()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_adjacency"><code class="docutils literal notranslate"><span class="pre">set_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_air_boundary"><code class="docutils literal notranslate"><span class="pre">set_air_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_boundary_condition"><code class="docutils literal notranslate"><span class="pre">set_boundary_condition()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.set_window_parameter"><code class="docutils literal notranslate"><span class="pre">set_window_parameter()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_grid"><code class="docutils literal notranslate"><span class="pre">snap_to_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_line_end_points"><code class="docutils literal notranslate"><span class="pre">snap_to_line_end_points()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.snap_to_points"><code class="docutils literal notranslate"><span class="pre">snap_to_points()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.solve_adjacency"><code class="docutils literal notranslate"><span class="pre">solve_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_through_self_intersection"><code class="docutils literal notranslate"><span class="pre">split_through_self_intersection()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_line"><code class="docutils literal notranslate"><span class="pre">split_with_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_lines"><code class="docutils literal notranslate"><span class="pre">split_with_lines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_polygon"><code class="docutils literal notranslate"><span class="pre">split_with_polygon()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_thick_line"><code class="docutils literal notranslate"><span class="pre">split_with_thick_line()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.split_with_thick_polyline"><code class="docutils literal notranslate"><span class="pre">split_with_thick_polyline()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.subtract_room_2ds"><code class="docutils literal notranslate"><span class="pre">subtract_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_core_perimeter"><code class="docutils literal notranslate"><span class="pre">to_core_perimeter()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_detailed_windows"><code class="docutils literal notranslate"><span class="pre">to_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.unconforming_vertex_map"><code class="docutils literal notranslate"><span class="pre">unconforming_vertex_map()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.update_floor_geometry"><code class="docutils literal notranslate"><span class="pre">update_floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.air_boundaries"><code class="docutils literal notranslate"><span class="pre">air_boundaries</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.boundary_conditions"><code class="docutils literal notranslate"><span class="pre">boundary_conditions</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_elevation"><code class="docutils literal notranslate"><span class="pre">ceiling_elevation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_height"><code class="docutils literal notranslate"><span class="pre">ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.ceiling_plenum_depth"><code class="docutils literal notranslate"><span class="pre">ceiling_plenum_depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.center"><code class="docutils literal notranslate"><span class="pre">center</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.exterior_window_area"><code class="docutils literal notranslate"><span class="pre">exterior_window_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_elevation"><code class="docutils literal notranslate"><span class="pre">floor_elevation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_geometry"><code class="docutils literal notranslate"><span class="pre">floor_geometry</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_height"><code class="docutils literal notranslate"><span class="pre">floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_plenum_depth"><code class="docutils literal notranslate"><span class="pre">floor_plenum_depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segments"><code class="docutils literal notranslate"><span class="pre">floor_segments</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_segments_2d"><code class="docutils literal notranslate"><span class="pre">floor_segments_2d</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.floor_to_ceiling_height"><code class="docutils literal notranslate"><span class="pre">floor_to_ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_ceiling"><code class="docutils literal notranslate"><span class="pre">has_ceiling</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_floor"><code class="docutils literal notranslate"><span class="pre">has_floor</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.highest_plenum_floor_height"><code class="docutils literal notranslate"><span class="pre">highest_plenum_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.interior_wall_area"><code class="docutils literal notranslate"><span class="pre">interior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_core"><code class="docutils literal notranslate"><span class="pre">is_core</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_ground_contact"><code class="docutils literal notranslate"><span class="pre">is_ground_contact</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_perimeter"><code class="docutils literal notranslate"><span class="pre">is_perimeter</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.is_top_exposed"><code class="docutils literal notranslate"><span class="pre">is_top_exposed</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.roof_sub_face_area"><code class="docutils literal notranslate"><span class="pre">roof_sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_count"><code class="docutils literal notranslate"><span class="pre">segment_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.segment_normals"><code class="docutils literal notranslate"><span class="pre">segment_normals</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.shading_parameters"><code class="docutils literal notranslate"><span class="pre">shading_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.skylight_area"><code class="docutils literal notranslate"><span class="pre">skylight_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.skylight_parameters"><code class="docutils literal notranslate"><span class="pre">skylight_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.wall_sub_face_area"><code class="docutils literal notranslate"><span class="pre">wall_sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.window_parameters"><code class="docutils literal notranslate"><span class="pre">window_parameters</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.room2d.html#dragonfly.room2d.Room2D.zone"><code class="docutils literal notranslate"><span class="pre">zone</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.shadingparameter.html">dragonfly.shadingparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder"><code class="docutils literal notranslate"><span class="pre">ExtrudedBorder</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.ExtrudedBorder.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount"><code class="docutils literal notranslate"><span class="pre">LouversByCount</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.contour_vector"><code class="docutils literal notranslate"><span class="pre">contour_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.flip_start_side"><code class="docutils literal notranslate"><span class="pre">flip_start_side</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.louver_count"><code class="docutils literal notranslate"><span class="pre">louver_count</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByCount.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance"><code class="docutils literal notranslate"><span class="pre">LouversByDistance</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.contour_vector"><code class="docutils literal notranslate"><span class="pre">contour_vector</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.distance"><code class="docutils literal notranslate"><span class="pre">distance</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.flip_start_side"><code class="docutils literal notranslate"><span class="pre">flip_start_side</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.LouversByDistance.offset"><code class="docutils literal notranslate"><span class="pre">offset</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang"><code class="docutils literal notranslate"><span class="pre">Overhang</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.add_shading_to_face"><code class="docutils literal notranslate"><span class="pre">add_shading_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.angle"><code class="docutils literal notranslate"><span class="pre">angle</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.shadingparameter.html#dragonfly.shadingparameter.Overhang.depth"><code class="docutils literal notranslate"><span class="pre">depth</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.skylightparameter.html">dragonfly.skylightparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights"><code class="docutils literal notranslate"><span class="pre">DetailedSkylights</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.aperture_area_from_face"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_overlaps"><code class="docutils literal notranslate"><span class="pre">check_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.check_valid_for_face"><code class="docutils literal notranslate"><span class="pre">check_valid_for_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.invalid_face_geometries"><code class="docutils literal notranslate"><span class="pre">invalid_face_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.make_flush"><code class="docutils literal notranslate"><span class="pre">make_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.merge_and_simplify"><code class="docutils literal notranslate"><span class="pre">merge_and_simplify()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.merge_to_bounding_rectangle"><code class="docutils literal notranslate"><span class="pre">merge_to_bounding_rectangle()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.offset_polygons_for_face"><code class="docutils literal notranslate"><span class="pre">offset_polygons_for_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.overlapping_geometries"><code class="docutils literal notranslate"><span class="pre">overlapping_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.rectangularize"><code class="docutils literal notranslate"><span class="pre">rectangularize()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_duplicate_skylights"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_self_intersecting"><code class="docutils literal notranslate"><span class="pre">remove_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_small_skylights"><code class="docutils literal notranslate"><span class="pre">remove_small_skylights()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.remove_windows"><code class="docutils literal notranslate"><span class="pre">remove_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.rotate"><code class="docutils literal notranslate"><span class="pre">rotate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.self_intersecting_geometries"><code class="docutils literal notranslate"><span class="pre">self_intersecting_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.union_overlaps"><code class="docutils literal notranslate"><span class="pre">union_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.polygons"><code class="docutils literal notranslate"><span class="pre">polygons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.DetailedSkylights.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea"><code class="docutils literal notranslate"><span class="pre">GriddedSkylightArea</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.skylight_area"><code class="docutils literal notranslate"><span class="pre">skylight_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.spacing"><code class="docutils literal notranslate"><span class="pre">spacing</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightArea.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio"><code class="docutils literal notranslate"><span class="pre">GriddedSkylightRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.add_skylight_to_face"><code class="docutils literal notranslate"><span class="pre">add_skylight_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.area_from_face"><code class="docutils literal notranslate"><span class="pre">area_from_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.skylight_ratio"><code class="docutils literal notranslate"><span class="pre">skylight_ratio</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.spacing"><code class="docutils literal notranslate"><span class="pre">spacing</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.skylightparameter.html#dragonfly.skylightparameter.GriddedSkylightRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.story.html">dragonfly.story module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story"><code class="docutils literal notranslate"><span class="pre">Story</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_prefix"><code class="docutils literal notranslate"><span class="pre">add_prefix()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2d"><code class="docutils literal notranslate"><span class="pre">add_room_2d()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2ds"><code class="docutils literal notranslate"><span class="pre">add_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.align"><code class="docutils literal notranslate"><span class="pre">align()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.align_room_2ds"><code class="docutils literal notranslate"><span class="pre">align_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.automatically_zone"><code class="docutils literal notranslate"><span class="pre">automatically_zone()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_collision_with_story"><code class="docutils literal notranslate"><span class="pre">check_collision_with_story()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">check_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_roof_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_roof_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_room2d_overlaps"><code class="docutils literal notranslate"><span class="pre">check_no_room2d_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_roofs_above_rooms"><code class="docutils literal notranslate"><span class="pre">check_roofs_above_rooms()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.check_room2d_floor_heights_valid"><code class="docutils literal notranslate"><span class="pre">check_room2d_floor_heights_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.delete_degenerate_room_2ds"><code class="docutils literal notranslate"><span class="pre">delete_degenerate_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.fill_holes"><code class="docutils literal notranslate"><span class="pre">fill_holes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_geometry"><code class="docutils literal notranslate"><span class="pre">floor_geometry()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.footprint"><code class="docutils literal notranslate"><span class="pre">footprint()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.from_honeybee"><code class="docutils literal notranslate"><span class="pre">from_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.generate_grid"><code class="docutils literal notranslate"><span class="pre">generate_grid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.intersect_room_2d_adjacency"><code class="docutils literal notranslate"><span class="pre">intersect_room_2d_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.join_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.join_small_room_2ds"><code class="docutils literal notranslate"><span class="pre">join_small_room_2ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.make_aboveground"><code class="docutils literal notranslate"><span class="pre">make_aboveground()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.make_underground"><code class="docutils literal notranslate"><span class="pre">make_underground()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.move"><code class="docutils literal notranslate"><span class="pre">move()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.outline_polylines"><code class="docutils literal notranslate"><span class="pre">outline_polylines()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.outline_segments"><code class="docutils literal notranslate"><span class="pre">outline_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.patch_missing_adjacencies"><code class="docutils literal notranslate"><span class="pre">patch_missing_adjacencies()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rebuild_detailed_windows"><code class="docutils literal notranslate"><span class="pre">rebuild_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reflect"><code class="docutils literal notranslate"><span class="pre">reflect()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_colinear_vertices"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_colinear_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_duplicate_vertices"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_duplicate_vertices()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_short_segments"><code class="docutils literal notranslate"><span class="pre">remove_room_2d_short_segments()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reset_adjacency"><code class="docutils literal notranslate"><span class="pre">reset_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.reset_room_2d_boundaries"><code class="docutils literal notranslate"><span class="pre">reset_room_2d_boundaries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_2d_story_geometry_valid"><code class="docutils literal notranslate"><span class="pre">room_2d_story_geometry_valid()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_by_identifier"><code class="docutils literal notranslate"><span class="pre">room_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rooms_by_identifier"><code class="docutils literal notranslate"><span class="pre">rooms_by_identifier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.rotate_xy"><code class="docutils literal notranslate"><span class="pre">rotate_xy()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_adjacent_air_boundary"><code class="docutils literal notranslate"><span class="pre">set_adjacent_air_boundary()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact"><code class="docutils literal notranslate"><span class="pre">set_ground_contact()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact_by_story_below"><code class="docutils literal notranslate"><span class="pre">set_ground_contact_by_story_below()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_shading_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_shading_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_window_parameters"><code class="docutils literal notranslate"><span class="pre">set_outdoor_window_parameters()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed"><code class="docutils literal notranslate"><span class="pre">set_top_exposed()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed_by_story_above"><code class="docutils literal notranslate"><span class="pre">set_top_exposed_by_story_above()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation"><code class="docutils literal notranslate"><span class="pre">shade_representation()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation_multiplier"><code class="docutils literal notranslate"><span class="pre">shade_representation_multiplier()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.solve_room_2d_adjacency"><code class="docutils literal notranslate"><span class="pre">solve_room_2d_adjacency()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.split_with_story_above"><code class="docutils literal notranslate"><span class="pre">split_with_story_above()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.suggested_alignment_axes"><code class="docutils literal notranslate"><span class="pre">suggested_alignment_axes()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_honeybee"><code class="docutils literal notranslate"><span class="pre">to_honeybee()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.STORY_TYPES"><code class="docutils literal notranslate"><span class="pre">STORY_TYPES</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.display_name"><code class="docutils literal notranslate"><span class="pre">display_name</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.exterior_aperture_area"><code class="docutils literal notranslate"><span class="pre">exterior_aperture_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.exterior_wall_area"><code class="docutils literal notranslate"><span class="pre">exterior_wall_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_area"><code class="docutils literal notranslate"><span class="pre">floor_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_height"><code class="docutils literal notranslate"><span class="pre">floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.floor_to_floor_height"><code class="docutils literal notranslate"><span class="pre">floor_to_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.full_id"><code class="docutils literal notranslate"><span class="pre">full_id</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_parent"><code class="docutils literal notranslate"><span class="pre">has_parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_plenums"><code class="docutils literal notranslate"><span class="pre">has_plenums</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.has_zones"><code class="docutils literal notranslate"><span class="pre">has_zones</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.highest_plenum_floor_height"><code class="docutils literal notranslate"><span class="pre">highest_plenum_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.identifier"><code class="docutils literal notranslate"><span class="pre">identifier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.is_above_ground"><code class="docutils literal notranslate"><span class="pre">is_above_ground</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.is_plenum"><code class="docutils literal notranslate"><span class="pre">is_plenum</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.max"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.max_room_2d_ceiling_height"><code class="docutils literal notranslate"><span class="pre">max_room_2d_ceiling_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.median_room2d_floor_height"><code class="docutils literal notranslate"><span class="pre">median_room2d_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.min"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.min_room_2d_floor_height"><code class="docutils literal notranslate"><span class="pre">min_room_2d_floor_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.multiplier"><code class="docutils literal notranslate"><span class="pre">multiplier</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.parent"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.properties"><code class="docutils literal notranslate"><span class="pre">properties</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.roof"><code class="docutils literal notranslate"><span class="pre">roof</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.room_2ds"><code class="docutils literal notranslate"><span class="pre">room_2ds</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.sub_face_area"><code class="docutils literal notranslate"><span class="pre">sub_face_area</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.to"><code class="docutils literal notranslate"><span class="pre">to</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.type"><code class="docutils literal notranslate"><span class="pre">type</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.volume"><code class="docutils literal notranslate"><span class="pre">volume</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.story.html#dragonfly.story.Story.zone_dict"><code class="docutils literal notranslate"><span class="pre">zone_dict</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.subdivide.html">dragonfly.subdivide module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.subdivide.html#dragonfly.subdivide.interpret_core_perimeter_subdivide"><code class="docutils literal notranslate"><span class="pre">interpret_core_perimeter_subdivide()</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.subdivide.html#dragonfly.subdivide.interpret_floor_height_subdivide"><code class="docutils literal notranslate"><span class="pre">interpret_floor_height_subdivide()</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../dragonfly.windowparameter.html">dragonfly.windowparameter module</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows"><code class="docutils literal notranslate"><span class="pre">DetailedWindows</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.adjust_for_segment"><code class="docutils literal notranslate"><span class="pre">adjust_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.aperture_area_from_segment"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_self_intersecting"><code class="docutils literal notranslate"><span class="pre">check_self_intersecting()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_valid_for_segment"><code class="docutils literal notranslate"><span class="pre">check_valid_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.check_window_overlaps"><code class="docutils literal notranslate"><span class="pre">check_window_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.flip"><code class="docutils literal notranslate"><span class="pre">flip()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.from_face3ds"><code class="docutils literal notranslate"><span class="pre">from_face3ds()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_face3d_in_segment_plane"><code class="docutils literal notranslate"><span class="pre">is_face3d_in_segment_plane()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.is_flipped_equivalent"><code class="docutils literal notranslate"><span class="pre">is_flipped_equivalent()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.make_flush"><code class="docutils literal notranslate"><span class="pre">make_flush()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_and_simplify"><code class="docutils literal notranslate"><span class="pre">merge_and_simplify()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_bounding_rectangle"><code class="docutils literal notranslate"><span class="pre">merge_to_bounding_rectangle()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.overlapping_geometries"><code class="docutils literal notranslate"><span class="pre">overlapping_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.rectangularize"><code class="docutils literal notranslate"><span class="pre">rectangularize()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_duplicate_windows"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.remove_windows"><code class="docutils literal notranslate"><span class="pre">remove_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.self_intersecting_geometries"><code class="docutils literal notranslate"><span class="pre">self_intersecting_geometries()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_horizontally"><code class="docutils literal notranslate"><span class="pre">shift_horizontally()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.shift_vertically"><code class="docutils literal notranslate"><span class="pre">shift_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.union_overlaps"><code class="docutils literal notranslate"><span class="pre">union_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.polygons"><code class="docutils literal notranslate"><span class="pre">polygons</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.DetailedWindows.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows"><code class="docutils literal notranslate"><span class="pre">RectangularWindows</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.adjust_for_segment"><code class="docutils literal notranslate"><span class="pre">adjust_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.aperture_area_from_segment"><code class="docutils literal notranslate"><span class="pre">aperture_area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_valid_for_segment"><code class="docutils literal notranslate"><span class="pre">check_valid_for_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.check_window_overlaps"><code class="docutils literal notranslate"><span class="pre">check_window_overlaps()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.flip"><code class="docutils literal notranslate"><span class="pre">flip()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.offset"><code class="docutils literal notranslate"><span class="pre">offset()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_doors"><code class="docutils literal notranslate"><span class="pre">remove_doors()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_duplicate_windows"><code class="docutils literal notranslate"><span class="pre">remove_duplicate_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_small_windows"><code class="docutils literal notranslate"><span class="pre">remove_small_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.remove_windows"><code class="docutils literal notranslate"><span class="pre">remove_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_horizontally"><code class="docutils literal notranslate"><span class="pre">shift_horizontally()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.shift_vertically"><code class="docutils literal notranslate"><span class="pre">shift_vertically()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_detailed_windows"><code class="docutils literal notranslate"><span class="pre">to_detailed_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.are_doors"><code class="docutils literal notranslate"><span class="pre">are_doors</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.heights"><code class="docutils literal notranslate"><span class="pre">heights</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.origins"><code class="docutils literal notranslate"><span class="pre">origins</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RectangularWindows.widths"><code class="docutils literal notranslate"><span class="pre">widths</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio"><code class="docutils literal notranslate"><span class="pre">RepeatingWindowRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.horizontal_separation"><code class="docutils literal notranslate"><span class="pre">horizontal_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.vertical_separation"><code class="docutils literal notranslate"><span class="pre">vertical_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.window_height"><code class="docutils literal notranslate"><span class="pre">window_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowRatio.window_ratio"><code class="docutils literal notranslate"><span class="pre">window_ratio</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight"><code class="docutils literal notranslate"><span class="pre">RepeatingWindowWidthHeight</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.horizontal_separation"><code class="docutils literal notranslate"><span class="pre">horizontal_separation</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.window_height"><code class="docutils literal notranslate"><span class="pre">window_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.RepeatingWindowWidthHeight.window_width"><code class="docutils literal notranslate"><span class="pre">window_width</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea"><code class="docutils literal notranslate"><span class="pre">SimpleWindowArea</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowArea.window_area"><code class="docutils literal notranslate"><span class="pre">window_area</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio"><code class="docutils literal notranslate"><span class="pre">SimpleWindowRatio</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.rect_split"><code class="docutils literal notranslate"><span class="pre">rect_split</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SimpleWindowRatio.window_ratio"><code class="docutils literal notranslate"><span class="pre">window_ratio</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow"><code class="docutils literal notranslate"><span class="pre">SingleWindow</span></code></a><ul>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.ToString"><code class="docutils literal notranslate"><span class="pre">ToString()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.add_window_to_face"><code class="docutils literal notranslate"><span class="pre">add_window_to_face()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.area_from_segment"><code class="docutils literal notranslate"><span class="pre">area_from_segment()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.duplicate"><code class="docutils literal notranslate"><span class="pre">duplicate()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge"><code class="docutils literal notranslate"><span class="pre">merge()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.merge_to_rectangular"><code class="docutils literal notranslate"><span class="pre">merge_to_rectangular()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.scale"><code class="docutils literal notranslate"><span class="pre">scale()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.split"><code class="docutils literal notranslate"><span class="pre">split()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.to_rectangular_windows"><code class="docutils literal notranslate"><span class="pre">to_rectangular_windows()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.trim"><code class="docutils literal notranslate"><span class="pre">trim()</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.height"><code class="docutils literal notranslate"><span class="pre">height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.sill_height"><code class="docutils literal notranslate"><span class="pre">sill_height</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.user_data"><code class="docutils literal notranslate"><span class="pre">user_data</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="../../dragonfly.windowparameter.html#dragonfly.windowparameter.SingleWindow.width"><code class="docutils literal notranslate"><span class="pre">width</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../dragonfly.html#module-dragonfly">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-4">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../cli/index.html">CLI Docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">dragonfly</a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-8 content" role="main">
      
  <h1>Source code for dragonfly.story</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: utf-8</span>
<span class="sd">&quot;&quot;&quot;Dragonfly Story.&quot;&quot;&quot;</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry2d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Vector2D</span><span class="p">,</span> <span class="n">Polygon2D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ladybug_geometry.geometry3d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Vector3D</span><span class="p">,</span> <span class="n">Point3D</span><span class="p">,</span> <span class="n">Ray3D</span><span class="p">,</span> <span class="n">Polyline3D</span><span class="p">,</span> \
    <span class="n">Face3D</span><span class="p">,</span> <span class="n">Polyface3D</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">float_positive</span><span class="p">,</span> <span class="n">int_in_range</span><span class="p">,</span> <span class="n">clean_string</span><span class="p">,</span> \
    <span class="n">clean_and_id_string</span><span class="p">,</span> <span class="n">valid_string</span><span class="p">,</span> <span class="n">invalid_dict_error</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.boundarycondition</span><span class="w"> </span><span class="kn">import</span> <span class="n">boundary_conditions</span> <span class="k">as</span> <span class="n">bcs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.boundarycondition</span><span class="w"> </span><span class="kn">import</span> <span class="n">Outdoors</span><span class="p">,</span> <span class="n">Surface</span><span class="p">,</span> <span class="n">Ground</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.facetype</span><span class="w"> </span><span class="kn">import</span> <span class="n">AirBoundary</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.facetype</span><span class="w"> </span><span class="kn">import</span> <span class="n">face_types</span> <span class="k">as</span> <span class="n">ftyp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.altnumber</span><span class="w"> </span><span class="kn">import</span> <span class="n">autocalculate</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">honeybee.shade</span><span class="w"> </span><span class="kn">import</span> <span class="n">Shade</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">._base</span><span class="w"> </span><span class="kn">import</span> <span class="n">_BaseGeometry</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.room2d</span><span class="w"> </span><span class="kn">import</span> <span class="n">Room2D</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.roof</span><span class="w"> </span><span class="kn">import</span> <span class="n">RoofSpecification</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.windowparameter</span><span class="w"> </span><span class="kn">import</span> <span class="n">DetailedWindows</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.properties</span><span class="w"> </span><span class="kn">import</span> <span class="n">StoryProperties</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">dragonfly.writer.story</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">writer</span>


<div class="viewcode-block" id="Story">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Story</span><span class="p">(</span><span class="n">_BaseGeometry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A Story of a building defined by an extruded Room2Ds.</span>

<span class="sd">    Args:</span>
<span class="sd">        identifier: Text string for a unique Story ID. Must be &lt; 100 characters</span>
<span class="sd">            and not contain any spaces or special characters.</span>
<span class="sd">        room_2ds: An array of dragonfly Room2D objects that together form an</span>
<span class="sd">            entire story of a building.</span>
<span class="sd">        floor_to_floor_height: A number for the distance from the floor plate of</span>
<span class="sd">            this Story to the floor of the story above this one (if it exists).</span>
<span class="sd">            This should be in the same units system as the input room_2d geometry.</span>
<span class="sd">            If None, this value will be the maximum floor_to_ceiling_height of the</span>
<span class="sd">            input room_2ds plus any difference between the Story floor height</span>
<span class="sd">            and the room floor heights. (Default: None)</span>
<span class="sd">        floor_height: A number for the absolute floor height of the Story.</span>
<span class="sd">            If None, this will be the minimum floor height of all the Story&#39;s</span>
<span class="sd">            room_2ds, which is suitable for cases where there are no floor</span>
<span class="sd">            plenums. (Default: None).</span>
<span class="sd">        multiplier: An integer that denotes the number of times that this</span>
<span class="sd">            Story is repeated over the height of the building. (Default: 1).</span>
<span class="sd">        roof: An optional RoofSpecification object containing geometry and instructions</span>
<span class="sd">            for generating sloped roofs over a Story. The RoofSpecification will only</span>
<span class="sd">            affect the child Room2Ds that have a True is_top_exposed property</span>
<span class="sd">            and it will only be utilized in translation to Honeybee when the Story</span>
<span class="sd">            multiplier is 1. If None, all Room2D ceilings will be flat. (Default: None).</span>
<span class="sd">        type: Text to indicate the type of story that this object represents.</span>
<span class="sd">            Choose from the options below. (Default: DifferentialDryBulb).</span>

<span class="sd">            * Standard</span>
<span class="sd">            * CeilingPlenum</span>
<span class="sd">            * FloorPlenum</span>

<span class="sd">    Properties:</span>
<span class="sd">        * identifier</span>
<span class="sd">        * display_name</span>
<span class="sd">        * full_id</span>
<span class="sd">        * room_2ds</span>
<span class="sd">        * floor_to_floor_height</span>
<span class="sd">        * floor_height</span>
<span class="sd">        * multiplier</span>
<span class="sd">        * roof</span>
<span class="sd">        * type</span>
<span class="sd">        * is_plenum</span>
<span class="sd">        * has_plenums</span>
<span class="sd">        * has_zones</span>
<span class="sd">        * zone_dict</span>
<span class="sd">        * parent</span>
<span class="sd">        * has_parent</span>
<span class="sd">        * max_room_2d_ceiling_height</span>
<span class="sd">        * min_room_2d_floor_height</span>
<span class="sd">        * highest_plenum_floor_height</span>
<span class="sd">        * floor_area</span>
<span class="sd">        * exterior_wall_area</span>
<span class="sd">        * exterior_aperture_area</span>
<span class="sd">        * sub_face_area</span>
<span class="sd">        * volume</span>
<span class="sd">        * is_above_ground</span>
<span class="sd">        * min</span>
<span class="sd">        * max</span>
<span class="sd">        * median_room2d_floor_height</span>
<span class="sd">        * user_data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">STORY_TYPES</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Standard&#39;</span><span class="p">,</span> <span class="s1">&#39;CeilingPlenum&#39;</span><span class="p">,</span> <span class="s1">&#39;FloorPlenum&#39;</span><span class="p">)</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_room_2ds&#39;</span><span class="p">,</span> <span class="s1">&#39;_floor_to_floor_height&#39;</span><span class="p">,</span> <span class="s1">&#39;_floor_height&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_multiplier&#39;</span><span class="p">,</span> <span class="s1">&#39;_roof&#39;</span><span class="p">,</span> <span class="s1">&#39;_type&#39;</span><span class="p">,</span> <span class="s1">&#39;_parent&#39;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">room_2ds</span><span class="p">,</span> <span class="n">floor_to_floor_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">floor_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">multiplier</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">roof</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;Standard&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A Story of a building defined by an extruded Floor2Ds.&quot;&quot;&quot;</span>
        <span class="n">_BaseGeometry</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>  <span class="c1"># process the identifier</span>

        <span class="c1"># process the Room2Ds and story geometry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span> <span class="o">=</span> <span class="n">room_2ds</span>

        <span class="c1"># process the input properties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">floor_height</span> <span class="o">=</span> <span class="n">floor_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">floor_to_floor_height</span> <span class="o">=</span> <span class="n">floor_to_floor_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">multiplier</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">roof</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># _parent will be set when Story is added to a Building</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="n">StoryProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># properties for extensions</span>

<div class="viewcode-block" id="Story.from_dict">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.from_dict">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a Story from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: A dictionary representation of a Story object.</span>
<span class="sd">            tolerance: The maximum difference between z values at which point vertices</span>
<span class="sd">                are considered to be in the same horizontal plane. This is used to check</span>
<span class="sd">                that all vertices of the input floor_geometry lie in the same horizontal</span>
<span class="sd">                floor plane. Default is 0, which will not perform any check.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check the type of dictionary</span>
        <span class="k">assert</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Story&#39;</span><span class="p">,</span> <span class="s1">&#39;Expected Story dictionary. &#39;</span> \
            <span class="s1">&#39;Got </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>

        <span class="c1"># serialize the rooms</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r_dict</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;room_2ds&#39;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Room2D</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">r_dict</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">invalid_dict_error</span><span class="p">(</span><span class="n">r_dict</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

        <span class="c1"># check if any room boundaries were reversed</span>
        <span class="n">dict_pts</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">room</span><span class="p">[</span><span class="s1">&#39;floor_boundary&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;room_2ds&#39;</span><span class="p">]]</span>
        <span class="n">room_pts</span> <span class="o">=</span> <span class="p">[(</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">rm</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">]</span>
        <span class="n">not_reversed</span> <span class="o">=</span> <span class="p">[</span><span class="n">dpt</span> <span class="o">==</span> <span class="n">rpt</span> <span class="k">for</span> <span class="n">dpt</span><span class="p">,</span> <span class="n">rpt</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dict_pts</span><span class="p">,</span> <span class="n">room_pts</span><span class="p">)]</span>

        <span class="c1"># ensure Surface boundary conditions are correct if floors were reversed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">not_reversed</span><span class="p">):</span>  <span class="c1"># some room floors have been reversed</span>
            <span class="n">bcs_to_update</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">not_revd</span><span class="p">,</span> <span class="n">room</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">not_reversed</span><span class="p">,</span> <span class="n">rooms</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">not_revd</span><span class="p">:</span>  <span class="c1"># double negative! reversed room boundary</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">):</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>  <span class="c1"># segment must be updated</span>
                            <span class="n">newid</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">..Face</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                            <span class="n">bc_room</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">boundary_condition_objects</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">bc_f_i</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">boundary_condition_objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;..Face&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">bc_tup</span> <span class="o">=</span> <span class="p">(</span><span class="n">bc_room</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">bc_f_i</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">newid</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">))</span>
                            <span class="n">bcs_to_update</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bc_tup</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">bc_tup</span> <span class="ow">in</span> <span class="n">bcs_to_update</span><span class="p">:</span>  <span class="c1"># update any reversed boundary conditions</span>
                <span class="n">adj_room</span> <span class="o">=</span> <span class="n">bc_tup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">not_revd</span><span class="p">,</span> <span class="n">room</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">not_reversed</span><span class="p">,</span> <span class="n">rooms</span><span class="p">):</span>  <span class="c1"># find adjacent room</span>
                    <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">adj_room</span><span class="p">:</span>
                        <span class="n">bc_to_update</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">[</span><span class="n">bc_tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="n">not_revd</span> \
                            <span class="k">else</span> <span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">bc_tup</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                        <span class="n">bc_to_update</span><span class="o">.</span><span class="n">_boundary_condition_objects</span> <span class="o">=</span> <span class="n">bc_tup</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1"># process the floor_to_floor_height and the multiplier</span>
        <span class="n">f2fh</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;floor_to_floor_height&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;floor_to_floor_height&#39;</span> <span class="ow">in</span> <span class="n">data</span> \
            <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;floor_to_floor_height&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">autocalculate</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">fh</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;floor_height&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;floor_height&#39;</span> <span class="ow">in</span> <span class="n">data</span> \
            <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;floor_height&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">autocalculate</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;multiplier&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;multiplier&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="mi">1</span>
        <span class="n">s_type</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;story_type&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;story_type&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">else</span> <span class="s1">&#39;Standard&#39;</span>

        <span class="c1"># process the roof specification if it exists</span>
        <span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">],</span> <span class="n">tolerance</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;roof&#39;</span> <span class="ow">in</span> <span class="n">data</span> \
            <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># create the story object</span>
        <span class="n">story</span> <span class="o">=</span> <span class="n">Story</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">],</span> <span class="n">rooms</span><span class="p">,</span> <span class="n">f2fh</span><span class="p">,</span> <span class="n">fh</span><span class="p">,</span> <span class="n">mult</span><span class="p">,</span> <span class="n">roof</span><span class="p">,</span> <span class="n">s_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;display_name&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;user_data&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">user_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span>

        <span class="c1"># load any extension attributes assigned to the story</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;StoryProperties&#39;</span><span class="p">:</span>
            <span class="n">story</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">_load_extension_attr_from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">story</span></div>


<div class="viewcode-block" id="Story.from_honeybee">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.from_honeybee">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_honeybee</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">rooms</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a Story from a list of Honeybee Rooms.</span>

<span class="sd">        Args:</span>
<span class="sd">            identifier: Text string for a unique Story ID. Must be &lt; 100 characters</span>
<span class="sd">                and not contain any spaces or special characters.</span>
<span class="sd">            rooms: A list of Honeybee Room objects.</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same. (Default: 0.01,</span>
<span class="sd">                suitable for objects in Meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the Room2Ds from the Honeybee Rooms</span>
        <span class="n">room_2ds</span><span class="p">,</span> <span class="n">rfs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">hb_room</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Room2D</span><span class="o">.</span><span class="n">from_honeybee</span><span class="p">(</span><span class="n">hb_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">hb_room</span><span class="o">.</span><span class="n">roof_ceilings</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">face</span><span class="o">.</span><span class="n">tilt</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># use one degree tolerance</span>
                        <span class="n">rfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># invalid Honeybee Room that is not a closed solid</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Room &quot;</span><span class="si">{}</span><span class="s1">&quot; is not a closed solid and cannot be converted to &#39;</span> \
                    <span class="s1">&#39;a Room2D.</span><span class="se">\n</span><span class="s1">Try using the &quot;ExtrudedOnly&quot; option to convert &#39;</span> \
                    <span class="s1">&#39;the Honeybee Model to Dragonfly&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hb_room</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">s_type</span> <span class="o">=</span> <span class="s1">&#39;CeilingPlenum&#39;</span> \
            <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">hb_room</span><span class="o">.</span><span class="n">exclude_floor_area</span> <span class="k">for</span> <span class="n">hb_room</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;Standard&#39;</span>

        <span class="c1"># re-set the adjacencies in relation to the Room2D segments</span>
        <span class="n">room_2ds</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">room_2ds</span> <span class="k">if</span> <span class="n">room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="n">room_2ds</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_reset_adjacencies_from_honeybee</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># create the roof geometry if it exists</span>
        <span class="n">roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="o">.</span><span class="n">from_geometry_to_join</span><span class="p">(</span><span class="n">rfs</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> \
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rfs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">room_2ds</span><span class="p">,</span> <span class="n">roof</span><span class="o">=</span><span class="n">roof</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">s_type</span><span class="p">)</span></div>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_reset_adjacencies_from_honeybee</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Re-set the adjacencies in relation to the Room2D segments.</span>

<span class="sd">        It is customary to run this method after converting the Story from Honeybee.</span>
<span class="sd">        This will ensure that any Surface boundary conditions from the Honeybee</span>
<span class="sd">        translation survive the translation process to the Dragonfly conventions</span>
<span class="sd">        of Surface boundary conditions.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_2ds: A list of Room2Ds of the same Story for which adjacencies</span>
<span class="sd">                will be reset.</span>
<span class="sd">            tolerance: The maximum difference between values at which point vertices</span>
<span class="sd">                are considered to be the same.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_adj_faces</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room_1</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">)</span>
                         <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">)]</span> <span class="k">for</span> <span class="n">room_1</span> <span class="ow">in</span> <span class="n">room_2ds</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">room_1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">room_2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">Polygon2D</span><span class="o">.</span><span class="n">overlapping_bounding_rect</span><span class="p">(</span>
                            <span class="n">room_1</span><span class="o">.</span><span class="n">_floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span><span class="p">,</span>
                            <span class="n">room_2</span><span class="o">.</span><span class="n">_floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
                        <span class="k">continue</span>  <span class="c1"># no overlap in bounding rect; adjacency impossible</span>
                    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">seg_1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room_1</span><span class="o">.</span><span class="n">floor_segments_2d</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">seg_2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room_2</span><span class="o">.</span><span class="n">floor_segments_2d</span><span class="p">):</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room_2</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">Surface</span><span class="p">):</span>
                                <span class="k">if</span> <span class="n">seg_1</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">seg_2</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span> <span class="ow">and</span> \
                                        <span class="n">seg_1</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">seg_2</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">seg_1</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">seg_2</span><span class="o">.</span><span class="n">length</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                                        <span class="c1"># set the boundary conditions of the segments</span>
                                        <span class="n">room_1</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">room_2</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
                                        <span class="k">try</span><span class="p">:</span>
                                            <span class="n">adj_f_1</span> <span class="o">=</span> <span class="n">all_adj_faces</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                                            <span class="n">adj_f_2</span> <span class="o">=</span> <span class="n">all_adj_faces</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                                            <span class="n">adj_f_1</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">adj_f_1</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
                                            <span class="n">adj_f_2</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">adj_f_2</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
                                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                                            <span class="k">pass</span>  <span class="c1"># from honeybee broke adjacency</span>
                                        <span class="k">break</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># we have reached the end of the list of zones</span>
        <span class="c1"># set any adjacencies to default that were not set</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">default_adj_bc</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">adiabatic</span>
            <span class="n">remove_win</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">default_adj_bc</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span>
            <span class="n">remove_win</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">r_i</span><span class="p">,</span> <span class="n">adj_faces</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_adj_faces</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">seg_i</span> <span class="ow">in</span> <span class="n">adj_faces</span><span class="p">:</span>
                <span class="n">room_2ds</span><span class="p">[</span><span class="n">r_i</span><span class="p">]</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">[</span><span class="n">seg_i</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_adj_bc</span>
                <span class="n">room_2ds</span><span class="p">[</span><span class="n">r_i</span><span class="p">]</span><span class="o">.</span><span class="n">_air_boundaries</span><span class="p">[</span><span class="n">seg_i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">remove_win</span><span class="p">:</span>
                    <span class="n">room_2ds</span><span class="p">[</span><span class="n">r_i</span><span class="p">]</span><span class="o">.</span><span class="n">_window_parameters</span><span class="p">[</span><span class="n">seg_i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">room_2ds</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set a tuple of Room2D objects that form the Story.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span>

    <span class="nd">@room_2ds</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Story must have at least one Room2D.&#39;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="n">Room2D</span><span class="p">),</span> \
                <span class="s1">&#39;Expected dragonfly Room2D. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">room</span><span class="p">))</span>
            <span class="n">room</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_to_floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set a number for the distance from this floor plate to the next one.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floor_to_floor_height</span>

    <span class="nd">@floor_to_floor_height</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_to_floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ciel_hgt</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">ceiling_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">ciel_hgt</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floor_to_floor_height</span> <span class="o">=</span> <span class="n">float_positive</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;floor-to-floor height&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set a number for the absolute floor height of the Story.</span>

<span class="sd">        This will be the minimum floor height of all the Story&#39;s room_2ds unless</span>
<span class="sd">        specified otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span>

    <span class="nd">@floor_height</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">floor_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">multiplier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set an integer noting how many times this Story is repeated.</span>

<span class="sd">        Multipliers are used to speed up the calculation when similar Stories are</span>
<span class="sd">        repeated more than once. Essentially, a given simulation with the</span>
<span class="sd">        Story is run once and then the result is multiplied by the multiplier.</span>
<span class="sd">        This comes with some inaccuracy. However, this error might not be too large</span>
<span class="sd">        if the Stories are similar enough and it can often be worth it since it can</span>
<span class="sd">        greatly speed up the calculation.</span>

<span class="sd">        For more information on multipliers in EnergyPlus see EnergyPlus Tips and Tricks:</span>
<span class="sd">        https://bigladdersoftware.com/epx/docs/9-1/tips-and-tricks-using-energyplus/\</span>
<span class="sd">using-multipliers-zone-and-or-window.html</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiplier</span>

    <span class="nd">@multiplier</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">multiplier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_multiplier</span> <span class="o">=</span> <span class="n">int_in_range</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">input_name</span><span class="o">=</span><span class="s1">&#39;room multiplier&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">roof</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set a RoofSpecification with instructions for generating sloped roofs.</span>

<span class="sd">        The RoofSpecification will only affect the child Room2Ds that have a True</span>
<span class="sd">        is_top_exposed property and it will only be utilized in translation to</span>
<span class="sd">        Honeybee when the Story multiplier is 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span>

    <span class="nd">@roof</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">roof</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">RoofSpecification</span><span class="p">),</span> \
                <span class="s1">&#39;Expected dragonfly RoofSpecification. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="n">value</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get or set text to indicate the type of Story.</span>

<span class="sd">        Choose from the following options:</span>

<span class="sd">        * Standard</span>
<span class="sd">        * CeilingPlenum</span>
<span class="sd">        * FloorPlenum</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>

    <span class="nd">@type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">clean_input</span> <span class="o">=</span> <span class="n">valid_string</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">STORY_TYPES</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">clean_input</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">key</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Story type </span><span class="si">{}</span><span class="s1"> is not recognized.</span><span class="se">\n</span><span class="s1">Choose from the &#39;</span>
                <span class="s1">&#39;following:</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">STORY_TYPES</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_plenum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether the Room2Ds of the Story represent plenums.</span>

<span class="sd">        If True, all Room2Ds in the Story are translated to 3D with a True</span>
<span class="sd">        exclude_floor_area property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;CeilingPlenum&#39;</span><span class="p">,</span> <span class="s1">&#39;FloorPlenum&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_plenums</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether Room2Ds on this Story have assigned plenum depths.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">ceiling_plenum_depth</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_plenum_depth</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_zones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean for whether any Rooms in the Story have zones assigned.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_zone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">zone_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get dictionary of Rooms with zone identifiers as the keys.</span>

<span class="sd">        This is useful for grouping rooms by their Zone for export.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zones</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">zones</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">zone</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># first room to be found in the zone</span>
                <span class="n">zones</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">zone</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">zones</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parent Building if assigned. None if not assigned.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Boolean noting whether this Story has a parent Building.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">max_room_2d_ceiling_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the highest ceiling height of all Room2Ds in the Story.</span>

<span class="sd">        Note that this property is not set-able and is linked to the Room2D geometry.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">ceiling_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">min_room_2d_floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the lowest floor height of all Room2Ds in the Story.</span>

<span class="sd">        Note that this property is not set-able and is linked to the Room2D geometry.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">floor_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">highest_plenum_floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the highest floor height in the Story including plenums.</span>

<span class="sd">        This property is useful for checking that roof geometries do not</span>
<span class="sd">        collide with a floor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">highest_plenum_floor_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total floor area in the Story.</span>

<span class="sd">        Note that this property is for one Story and does NOT use the multiplier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">flr_area</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">floor_area</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">flr_area</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">exterior_wall_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total exterior wall area in the Story.</span>

<span class="sd">        Note that this property is for one story and does NOT use the multiplier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ewa</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">exterior_wall_area</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">ewa</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">exterior_aperture_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total exterior aperture area in the Story.</span>

<span class="sd">        Note that this property is for one story and does NOT use the multiplier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eaa</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">exterior_aperture_area</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">eaa</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">sub_face_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the total sub-face area.</span>

<span class="sd">        Note that this property is for one story and does NOT use the multiplier.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eaa</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">sub_face_area</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">eaa</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a number for the volume of all the Rooms in the Story.</span>

<span class="sd">        Note that this property is for one story and does NOT use the multiplier.</span>
<span class="sd">        However, if this Story is assigned to a parent Building with room_3ds,</span>
<span class="sd">        it will include the volume of these 3D Rooms (without the room multiplier).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">room</span><span class="o">.</span><span class="n">volume</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_parent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">has_room_3ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">room_3ds_by_story</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">):</span>
                <span class="n">vol</span> <span class="o">+=</span> <span class="n">r</span><span class="o">.</span><span class="n">volume</span>
        <span class="k">return</span> <span class="n">vol</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_above_ground</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a boolean to note if this Story is above the ground.</span>

<span class="sd">        The story is considered above the ground if at least one of its Room2Ds</span>
<span class="sd">        has an outdoor boundary condition for its walls.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">bc</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Point2D for the min bounding rectangle vertex in the XY plane.</span>

<span class="sd">        This is useful in calculations to determine if this Story is in proximity</span>
<span class="sd">        to others.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Point2D for the max bounding rectangle vertex in the XY plane.</span>

<span class="sd">        This is useful in calculations to determine if this Story is in proximity</span>
<span class="sd">        to others.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">median_room2d_floor_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the median floor height of the Room2Ds of this Story.&quot;&quot;&quot;</span>
        <span class="n">median_i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">flr_hgt</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">floor_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">]</span>
        <span class="n">flr_hgt</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">flr_hgt</span><span class="p">[</span><span class="n">median_i</span><span class="p">]</span>

<div class="viewcode-block" id="Story.floor_geometry">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.floor_geometry">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">floor_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a ladybug_geometry Polyface3D object representing the floor plate.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">story_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_height</span>
        <span class="n">room_floors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="n">story_height</span> <span class="o">-</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_height</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="n">room_floors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">room_floors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">diff</span><span class="p">)))</span>
        <span class="c1"># TODO: consider returning a list of polyfaces if input rooms are disjointed</span>
        <span class="k">return</span> <span class="n">Polyface3D</span><span class="o">.</span><span class="n">from_faces</span><span class="p">(</span><span class="n">room_floors</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.outline_segments">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.outline_segments">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">outline_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of LineSegment3D objects for the outline of the floor plate.</span>

<span class="sd">        Note that these segments include both the boundary surrounding the floor</span>
<span class="sd">        and any holes for courtyards that exist within the floor.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span><span class="o">.</span><span class="n">naked_edges</span></div>


<div class="viewcode-block" id="Story.outline_polylines">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.outline_polylines">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">outline_polylines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of Polyline3D objects for the outline of the floor plate.</span>

<span class="sd">        Note that these segments include both the boundary surrounding the floor</span>
<span class="sd">        and any holes for courtyards that exist within the floor.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Polyline3D</span><span class="o">.</span><span class="n">join_segments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outline_segments</span><span class="p">(</span><span class="n">tolerance</span><span class="p">),</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.footprint">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.footprint">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">footprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of Face3D objects for the minimum floor plate representation.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. (Default: 0.01, suitable for objects</span>
<span class="sd">                in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outline_polylines</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># can be represented with a single Face3D</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">Face3D</span><span class="p">(</span><span class="n">plines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])]</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># need to separate holes from distinct Face3Ds</span>
            <span class="n">faces</span> <span class="o">=</span> <span class="p">[</span><span class="n">Face3D</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">vertices</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">pl</span> <span class="ow">in</span> <span class="n">plines</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">merge_faces_to_holes</span><span class="p">(</span><span class="n">faces</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.shade_representation">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shade_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of honeybee Shade objects representing the story geometry.</span>

<span class="sd">        This accounts for the story multiplier and can be used to account for</span>
<span class="sd">        this Story&#39;s shade in the simulation of another nearby Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            cap: Boolean to note whether the shade representation should be capped</span>
<span class="sd">                with a top face. Usually, this is not necessary to account for</span>
<span class="sd">                blocked sun and is only needed when it&#39;s important to account for</span>
<span class="sd">                reflected sun off of roofs. (Default: False).</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">context_shades</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">extru_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_to_floor_height</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">seg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outline_segments</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">extru_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">from_extrusion</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="n">extru_vec</span><span class="p">)</span>
                <span class="n">shd_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">context_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Shade</span><span class="p">(</span><span class="n">shd_id</span><span class="p">,</span> <span class="n">extru_geo</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># duplicate vertex resulting in a segment of length 0</span>
        <span class="k">if</span> <span class="n">cap</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">footprint</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)):</span>
                <span class="n">shd_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Top_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">context_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Shade</span><span class="p">(</span><span class="n">shd_id</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">extru_vec</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">context_shades</span></div>


<div class="viewcode-block" id="Story.shade_representation_multiplier">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.shade_representation_multiplier">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">shade_representation_multiplier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                        <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A list of honeybee Shade objects for just the &quot;multiplier&quot; part of the story.</span>

<span class="sd">        This includes all of the geometry along the height of the multiplier except</span>
<span class="sd">        for one of the floors (represented by the exclude_index). This will be an</span>
<span class="sd">        empty list if the story has a multiplier of 1.</span>

<span class="sd">        Args:</span>
<span class="sd">            exclude_index: An optional index for a story along the multiplier to</span>
<span class="sd">                be excluded from the shade representation. For example, if 0,</span>
<span class="sd">                the bottom geometry along the multiplier is excluded. (Default: 0).</span>
<span class="sd">            cap: Boolean to note whether the shade representation should be capped</span>
<span class="sd">                with a top face. Usually, this is not necessary to account for</span>
<span class="sd">                blocked sun and is only needed when it&#39;s important to account for</span>
<span class="sd">                reflected sun off of roofs. (Default: False).</span>
<span class="sd">            tolerance: The minimum distance between points at which they are</span>
<span class="sd">                not considered touching. Default: 0.01, suitable for objects</span>
<span class="sd">                in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="c1"># get the extrusion and moving vectors</span>
        <span class="n">ftf</span><span class="p">,</span> <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_to_floor_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span>
        <span class="n">context_shades</span><span class="p">,</span> <span class="n">ceil_vecs</span><span class="p">,</span> <span class="n">extru_vecs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">exclude_index</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># insert vectors for the bottom shade</span>
            <span class="n">ceil_vecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">extru_vecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ftf</span> <span class="o">*</span> <span class="n">exclude_index</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">exclude_index</span> <span class="o">&lt;</span> <span class="n">mult</span><span class="p">:</span>  <span class="c1"># insert vectors for the top shade</span>
            <span class="n">ceil_vecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ftf</span> <span class="o">*</span> <span class="p">(</span><span class="n">exclude_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
            <span class="n">extru_vecs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ftf</span> <span class="o">*</span> <span class="p">(</span><span class="n">mult</span> <span class="o">-</span> <span class="n">exclude_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="c1"># loop through the segments and build up the shades</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">seg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outline_segments</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">ceil_vec</span><span class="p">,</span> <span class="n">extru_vec</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ceil_vecs</span><span class="p">,</span> <span class="n">extru_vecs</span><span class="p">):</span>
                <span class="n">seg</span> <span class="o">=</span> <span class="n">seg</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">ceil_vec</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">extru_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">from_extrusion</span><span class="p">(</span><span class="n">seg</span><span class="p">,</span> <span class="n">extru_vec</span><span class="p">)</span>
                    <span class="n">shd_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">context_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Shade</span><span class="p">(</span><span class="n">shd_id</span><span class="p">,</span> <span class="n">extru_geo</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                    <span class="k">pass</span>  <span class="c1"># duplicate vertex resulting in a segment of length 0</span>
        <span class="c1"># cap the extrusions if requested</span>
        <span class="k">if</span> <span class="n">cap</span> <span class="ow">and</span> <span class="n">exclude_index</span> <span class="o">&lt;</span> <span class="n">mult</span><span class="p">:</span>
            <span class="n">full_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ftf</span> <span class="o">*</span> <span class="n">mult</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">footprint</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)):</span>
                <span class="n">shd_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_Top_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">context_shades</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Shade</span><span class="p">(</span><span class="n">shd_id</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">full_vec</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">context_shades</span></div>


<div class="viewcode-block" id="Story.room_by_identifier">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.room_by_identifier">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_by_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_identifier</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a Room2D from this Story using its identifier.</span>

<span class="sd">        Result will be None if the Room2D is not found in the Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_identifier: String for the identifier of the Room2D to be</span>
<span class="sd">                retrieved from this story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">room_identifier</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">room</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; was not found in the story &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span>
                             <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room_identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">))</span></div>


<div class="viewcode-block" id="Story.rooms_by_identifier">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.rooms_by_identifier">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rooms_by_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_identifiers</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of Room2D objects in this story given Room2D identifiers.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_identifier: Array of strings for the identifiers of the Room2D</span>
<span class="sd">                to be retrieved from this Story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">room_2ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">room_identifiers</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">identifier</span><span class="p">:</span>
                    <span class="n">room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; was not found in the story &#39;</span>
                                 <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">room_2ds</span></div>


<div class="viewcode-block" id="Story.add_prefix">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.add_prefix">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the identifier and all child Room2D ids by inserting a prefix.</span>

<span class="sd">        This is particularly useful in workflows where you duplicate and edit</span>
<span class="sd">        a starting object and then want to combine it with the original object</span>
<span class="sd">        into one Model (like making a model of repeated stories) since all objects</span>
<span class="sd">        within a Model must have unique identifiers.</span>

<span class="sd">        This method is used internally to convert from a Story with a multiplier</span>
<span class="sd">        to fully-detailed Stories with unique identifiers.</span>

<span class="sd">        Args:</span>
<span class="sd">            prefix: Text that will be inserted at the start of this object&#39;s</span>
<span class="sd">                (and child segments&#39;) identifier and display_name. It is recommended</span>
<span class="sd">                that this prefix be short to avoid maxing out the 100 allowable</span>
<span class="sd">                characters for dragonfly identifiers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_identifier</span> <span class="o">=</span> <span class="n">clean_string</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.add_room_2d">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2d">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_room_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_2d</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a Room2D to this Story.</span>

<span class="sd">        No check will be performed for whether the input room_2d&#39;s identifier</span>
<span class="sd">        matches one in the current Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_2d: A Room2D object to be added to this Story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room_2d</span><span class="p">,</span> <span class="n">Room2D</span><span class="p">),</span> \
            <span class="s1">&#39;Expected dragonfly Room2D. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">room_2d</span><span class="p">))</span>
        <span class="n">room_2d</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">+</span> <span class="p">(</span><span class="n">room_2d</span><span class="p">,)</span></div>


<div class="viewcode-block" id="Story.add_room_2ds">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.add_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rooms_2ds</span><span class="p">,</span> <span class="n">add_duplicate_ids</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a list of Room2Ds to this Story with checks for duplicate identifiers.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_2d: A list of Room2D objects to be added to this Story.</span>
<span class="sd">            add_duplicate_ids: A boolean to note whether added Room2Ds that</span>
<span class="sd">                have matching identifiers within the current Story should be</span>
<span class="sd">                ignored (False) or they should be added to the Story creating</span>
<span class="sd">                an ID collision that can be resolved later (True). (Default: False).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check to be sure that the input is composed of Room2Ds</span>
        <span class="k">for</span> <span class="n">o_room_2d</span> <span class="ow">in</span> <span class="n">rooms_2ds</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o_room_2d</span><span class="p">,</span> <span class="n">Room2D</span><span class="p">),</span> \
                <span class="s1">&#39;Expected dragonfly Room2D. Got </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">o_room_2d</span><span class="p">))</span>
        <span class="c1"># add the rooms and deal with duplicated IDs appropriately</span>
        <span class="n">new_room_2ds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_duplicate_ids</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">o_room_2d</span> <span class="ow">in</span> <span class="n">rooms_2ds</span><span class="p">:</span>
                <span class="n">o_room_2d</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
                <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o_room_2d</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exist_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">rm</span><span class="o">.</span><span class="n">identifier</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">o_room_2d</span> <span class="ow">in</span> <span class="n">rooms_2ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">o_room_2d</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exist_set</span><span class="p">:</span>
                    <span class="n">o_room_2d</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
                    <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o_room_2d</span><span class="p">)</span>
        <span class="c1"># assign the new Room2Ds to this Story</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.reset_room_2d_boundaries">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.reset_room_2d_boundaries">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset_room_2d_boundaries</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">polygons</span><span class="p">,</span> <span class="n">identifiers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">display_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">floor_to_ceiling_heights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rebuild the Room2Ds of the Story using boundary Polygons.</span>

<span class="sd">        All existing properties of segments along the boundary polygons will be</span>
<span class="sd">        preserved, including all window geometries. By default, the largest room</span>
<span class="sd">        that is identified within each of the boundary polygons will determine the</span>
<span class="sd">        extension properties of the resulting Room2D.</span>

<span class="sd">        It is recommended that the Room2Ds be aligned to the boundaries of the</span>
<span class="sd">        polygon and duplicate vertices be removed before using this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            polygons: A list of ladybug_geometry Polygon2D, which will become</span>
<span class="sd">                the new boundaries of the Story&#39;s Room2Ds. Note that it is</span>
<span class="sd">                acceptable to include hole polygons in this list and they will</span>
<span class="sd">                automatically be sensed by their relationship to the other</span>
<span class="sd">                polygons.</span>
<span class="sd">            identifiers: An optional list of text that align with the polygons</span>
<span class="sd">                and will dictate the identifiers of the Story&#39;s Rooms. If this</span>
<span class="sd">                matches an existing Room2D inside of the polygon, the existing</span>
<span class="sd">                Room2D will be used to set the extension properties of the output</span>
<span class="sd">                Room2D. If None, the identifier and extension properties of the</span>
<span class="sd">                output Room2D will be those of the largest Room2D found inside</span>
<span class="sd">                of the polygon. (Default: None).</span>
<span class="sd">            display_names: An optional list of text that align with the</span>
<span class="sd">                polygons and will dictate the display_names of the Story&#39;s Rooms.</span>
<span class="sd">                If None, the display_name will be taken from the</span>
<span class="sd">                largest existing Room2D inside the polygon or the existing</span>
<span class="sd">                Room2D matching the identifier above. (Default: None).</span>
<span class="sd">            floor_to_ceiling_heights: An optional list of numbers that align with the</span>
<span class="sd">                polygons and will dictate the the floor-to-ceiling heights of the</span>
<span class="sd">                resulting Room2Ds. If None, it will be the maximum of the Room2Ds</span>
<span class="sd">                that are found inside each of the polygon, which ensures</span>
<span class="sd">                that all window geometries are included in the output. If specified</span>
<span class="sd">                and it is lower than the maximum Room2D height, any detailed</span>
<span class="sd">                windows will be automatically trimmed to accommodate the new</span>
<span class="sd">                floor-to-ceiling height. (Default: None).</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the polygon</span>
<span class="sd">                boundary at which point the vertex is considered to lie on the</span>
<span class="sd">                polygon. (Default: 0.01, suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set defaults for identifiers and display_names</span>
        <span class="k">if</span> <span class="n">identifiers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">identifiers</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">display_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">display_names</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">floor_to_ceiling_heights</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">floor_to_ceiling_heights</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">polygons</span><span class="p">)</span>
        <span class="c1"># sort the polygons so they can be correctly interpreted as holes</span>
        <span class="n">p_areas</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">area</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">polygons</span><span class="p">]</span>
        <span class="n">sort_ind</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">p_areas</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_areas</span><span class="p">))))]</span>
        <span class="n">sort_ind</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">sort_poly</span> <span class="o">=</span> <span class="p">[</span><span class="n">polygons</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sort_ind</span><span class="p">]</span>
        <span class="n">sort_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">identifiers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sort_ind</span><span class="p">]</span>
        <span class="n">sort_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">display_names</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sort_ind</span><span class="p">]</span>
        <span class="n">sort_ftcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">floor_to_ceiling_heights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sort_ind</span><span class="p">]</span>
        <span class="c1"># loop through the polygons and make the Room2Ds</span>
        <span class="n">new_room_2ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">skip_i</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list to track hole polygons to be skipped</span>
        <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sort_poly</span><span class="p">,</span> <span class="n">sort_ids</span><span class="p">,</span> <span class="n">sort_names</span><span class="p">,</span> <span class="n">sort_ftcs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">r_id</span><span class="p">,</span> <span class="n">r_nm</span><span class="p">,</span> <span class="n">ftc</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_obj</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">skip_i</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">holes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">o_poly</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sort_poly</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]):</span>
                <span class="k">if</span> <span class="n">poly</span><span class="o">.</span><span class="n">is_polygon_inside</span><span class="p">(</span><span class="n">o_poly</span><span class="p">):</span>
                    <span class="n">holes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o_poly</span><span class="p">)</span>
                    <span class="n">skip_i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">new_room</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">join_by_boundary</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">holes</span><span class="p">,</span> <span class="n">ftc</span><span class="p">,</span> <span class="n">r_id</span><span class="p">,</span> <span class="n">r_nm</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_room</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.suggested_alignment_axes">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.suggested_alignment_axes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">suggested_alignment_axes</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">Vector2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get suggested LineSegment2Ds to be used for this Story in the align methods.</span>

<span class="sd">        This method will return the most common axes across the Story geometry</span>
<span class="sd">        along with the number of Room2D segments that correspond to each axis.</span>
<span class="sd">        The latter can be used to filter the suggested alignment axes to get</span>
<span class="sd">        only the most common ones across the input Room2Ds.</span>

<span class="sd">        Args:</span>
<span class="sd">            distance: A number for the distance that will be used in the alignment</span>
<span class="sd">                operation. This will be used to determine the resolution at which</span>
<span class="sd">                alignment axes are generated and evaluated. Smaller alignment</span>
<span class="sd">                distances will result in the generation of more common_axes since</span>
<span class="sd">                a finer resolution can differentiate common that would typically be</span>
<span class="sd">                grouped together. For typical building geometry, an alignment distance</span>
<span class="sd">                of 0.3 meters or 1 foot is typically suitable for eliminating</span>
<span class="sd">                unwanted details while not changing the geometry too much from</span>
<span class="sd">                its original location.</span>
<span class="sd">            direction: A Vector2D object to represent the direction in which the</span>
<span class="sd">                common axes will be evaluated and generated.</span>
<span class="sd">            angle_tolerance: The max angle difference in radians that the Room2D</span>
<span class="sd">                segment direction can differ from the input direction before the</span>
<span class="sd">                segments are not factored into this calculation of common axes.</span>

<span class="sd">            Returns:</span>
<span class="sd">                A tuple with two elements.</span>

<span class="sd">            -   common_axes: A list of LineSegment2D objects for the common</span>
<span class="sd">                axes across the input Room2Ds.</span>

<span class="sd">            -   axis_values: A list of integers that aligns with the common_axes</span>
<span class="sd">                and denotes how many segments of the input Room2D each axis</span>
<span class="sd">                relates to. Higher numbers indicate that that the axis is more</span>
<span class="sd">                commonly aligned across the Room2Ds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">generate_alignment_axes</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.align_room_2ds">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.align_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">align_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_ray</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move Room2D vertices within a given distance of a line to be on that line.</span>

<span class="sd">        Note that, when there are small Room2Ds next to the input line_ray,</span>
<span class="sd">        this method can create degenerate Room2Ds and so it may be wise to run</span>
<span class="sd">        the delete_degenerate_room_2ds method after running this one.</span>

<span class="sd">        Args:</span>
<span class="sd">            line_ray: A ladybug_geometry Ray2D or LineSegment2D to which the Room2D</span>
<span class="sd">                vertices will be aligned. Ray2Ds will be interpreted as being infinite</span>
<span class="sd">                in both directions while LineSegment2Ds will be interpreted as only</span>
<span class="sd">                existing between two points.</span>
<span class="sd">            distance: The maximum distance between a vertex and the line_ray where</span>
<span class="sd">                the vertex will be moved to lie on the line_ray. Vertices beyond</span>
<span class="sd">                this distance will be left as they are.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">line_ray</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.align">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.align">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">align</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_ray</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move Room2D and Roof vertices within a distance of a line to be on that line.</span>

<span class="sd">        This method differs from the align_room_2ds method in that it will also</span>
<span class="sd">        align any Roof geometry (if it is present).</span>

<span class="sd">        Args:</span>
<span class="sd">            line_ray: A ladybug_geometry Ray2D or LineSegment2D to which the Room2D</span>
<span class="sd">                and Roof vertices will be aligned. Ray2Ds will be interpreted as being</span>
<span class="sd">                infinite in both directions while LineSegment2Ds will be interpreted</span>
<span class="sd">                as only existing between two points.</span>
<span class="sd">            distance: The maximum distance between a vertex and the line_ray where</span>
<span class="sd">                the vertex will be moved to lie on the line_ray. Vertices beyond</span>
<span class="sd">                this distance will be left as they are.</span>
<span class="sd">            tolerance: The minimum distance between vertices below which they are</span>
<span class="sd">                considered co-located. This is used to ensure that the alignment process</span>
<span class="sd">                does not create new overlaps in the roof geometry. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">align_room_2ds</span><span class="p">(</span><span class="n">line_ray</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">line_ray</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.remove_room_2d_duplicate_vertices">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_duplicate_vertices">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_room_2d_duplicate_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">delete_degenerate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove duplicate vertices from all Room2Ds in this Story.</span>

<span class="sd">        All properties assigned to the Room2D will be preserved and any changed</span>
<span class="sd">        Surface boundary conditions will be automatically updated based on the</span>
<span class="sd">        removed wall segment indices.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the line it lies</span>
<span class="sd">                upon at which point the vertex is considered duplicated. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">            delete_degenerate: Boolean to note whether degenerate Room2Ds (with floor</span>
<span class="sd">                geometries that evaluate to less than 3 vertices at the tolerance)</span>
<span class="sd">                should be deleted from the Story instead of raising a ValueError.</span>
<span class="sd">                Note that using this option frequently creates invalid missing</span>
<span class="sd">                adjacencies, requiring the run of reset_adjacencies followed</span>
<span class="sd">                by re-running solve_adjacency. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all degenerate Room2Ds that were removed if delete_degenerate</span>
<span class="sd">            is True. Will be None if delete_degenerate is False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># remove vertices from the rooms and track the removed indices</span>
        <span class="n">removed_dict</span><span class="p">,</span> <span class="n">removed_rooms</span> <span class="o">=</span> <span class="p">{},</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">delete_degenerate</span><span class="p">:</span>
            <span class="n">new_room_2ds</span><span class="p">,</span> <span class="n">removed_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">removed_dict</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> \
                        <span class="n">room</span><span class="o">.</span><span class="n">remove_duplicate_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># degenerate room found!</span>
                    <span class="n">removed_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;All Room2Ds of Story &quot;</span><span class="si">{}</span><span class="s1">&quot; are &#39;</span>\
                <span class="s1">&#39;degenerate.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="n">removed_dict</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> \
                    <span class="n">room</span><span class="o">.</span><span class="n">remove_duplicate_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># go through the rooms and update any changed Surface boundary conditions</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                        <span class="n">adj_wall</span><span class="p">,</span> <span class="n">adj_room</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">removed_i</span> <span class="o">=</span> <span class="n">removed_dict</span><span class="p">[</span><span class="n">adj_room</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># illegal boundary condition; just ignore</span>
                            <span class="k">continue</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">removed_i</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># no removed vertices in room</span>
                            <span class="k">continue</span>
                        <span class="n">current_i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">adj_wall</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;..Face&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">removed_i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">current_i</span><span class="p">:</span>  <span class="c1"># surface bc to be updated</span>
                            <span class="n">bef_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">removed_i</span> <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">current_i</span><span class="p">])</span>
                            <span class="n">new_i</span> <span class="o">=</span> <span class="n">current_i</span> <span class="o">-</span> <span class="n">bef_count</span>
                            <span class="n">new_bc</span> <span class="o">=</span> <span class="n">Surface</span><span class="p">(</span>
                                <span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">..Face</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">adj_room</span><span class="p">,</span> <span class="n">new_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">adj_room</span><span class="p">)</span>
                            <span class="p">)</span>
                            <span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_bc</span>
        <span class="k">return</span> <span class="n">removed_rooms</span></div>


<div class="viewcode-block" id="Story.remove_room_2d_colinear_vertices">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_colinear_vertices">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_room_2d_colinear_vertices</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">preserve_wall_props</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delete_degenerate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically remove colinear or duplicate vertices for the Story&#39;s Room2Ds.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values at</span>
<span class="sd">                which they are considered co-located. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">            preserve_wall_props: Boolean to note whether existing window parameters</span>
<span class="sd">                and Ground boundary conditions should be preserved as vertices are</span>
<span class="sd">                removed. If False, all boundary conditions are replaced with Outdoors,</span>
<span class="sd">                all window parameters are erased, and this method will execute quickly.</span>
<span class="sd">                If True, an attempt will be made to merge window parameters together</span>
<span class="sd">                across colinear segments, translating simple window parameters to</span>
<span class="sd">                rectangular ones if necessary. Also, existing Ground boundary</span>
<span class="sd">                conditions will be kept. (Default: True).</span>
<span class="sd">            delete_degenerate: Boolean to note whether degenerate Room2Ds (with</span>
<span class="sd">                floor geometries that evaluate to less than 3 vertices at the</span>
<span class="sd">                tolerance) should be deleted from the Story instead of raising</span>
<span class="sd">                a ValueError. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all degenerate Room2Ds that were removed if delete_degenerate</span>
<span class="sd">            is True. Will be None if delete_degenerate is False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># remove vertices from the rooms and track the removed indices</span>
        <span class="k">if</span> <span class="n">delete_degenerate</span><span class="p">:</span>
            <span class="n">new_room_2ds</span><span class="p">,</span> <span class="n">removed_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_r</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">preserve_wall_props</span><span class="p">)</span>
                    <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_r</span><span class="p">)</span>
                <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>  <span class="c1"># degenerate room found!</span>
                    <span class="n">removed_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;All Room2Ds of Story &quot;</span><span class="si">{}</span><span class="s1">&quot; are &#39;</span>\
                <span class="s1">&#39;degenerate.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">removed_rooms</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_room_2ds</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="n">new_room</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">remove_colinear_vertices</span><span class="p">(</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">preserve_wall_props</span><span class="p">)</span>
                <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_room</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.remove_room_2d_short_segments">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.remove_room_2d_short_segments">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">remove_room_2d_short_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove consecutive short segments on this Story&#39;s Room2Ds.</span>

<span class="sd">        To patch over the removed segments, an attempt will first be made to find the</span>
<span class="sd">        intersection of the two neighboring segments. If these two lines are parallel,</span>
<span class="sd">        they will simply be connected with a segment.</span>

<span class="sd">        Properties assigned to the Room2Ds will be preserved for the segments that</span>
<span class="sd">        are not removed. Room2Ds that have all of their walls shorter than the</span>
<span class="sd">        distance will be removed from the Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            distance: The maximum length of a segment below which the segment</span>
<span class="sd">                will be considered for removal.</span>
<span class="sd">            angle_tolerance: The max angle difference in degrees that vertices</span>
<span class="sd">                are allowed to differ from one another in order to consider them</span>
<span class="sd">                colinear. (Default: 1).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all small Room2Ds that were removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># remove vertices from the rooms and track the removed indices</span>
        <span class="n">new_room_2ds</span><span class="p">,</span> <span class="n">removed_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">nr</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">remove_short_segments</span><span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">angle_tolerance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">removed_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;All Room2Ds of Story &quot;</span><span class="si">{}</span><span class="s1">&quot; are &#39;</span>\
            <span class="s1">&#39;are shorter than the distance </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">removed_rooms</span></div>


<div class="viewcode-block" id="Story.delete_degenerate_room_2ds">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.delete_degenerate_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">delete_degenerate_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove all Room2Ds with a floor_area of zero from this Story.</span>

<span class="sd">        This method will also automatically remove any degenerate holes in Room2D</span>
<span class="sd">        floor geometries, which have an area less than zero.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values at</span>
<span class="sd">                which they are considered co-located. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of all degenerate Room2Ds that were removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_room_2ds</span><span class="p">,</span> <span class="n">removed_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">max_dim</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">room</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">room</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">room</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">area</span> <span class="o">&lt;</span> <span class="n">max_dim</span> <span class="o">*</span> <span class="n">tolerance</span><span class="p">:</span>
                <span class="n">removed_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">room</span><span class="o">.</span><span class="n">remove_degenerate_holes</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">new_room_2ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;All Room2Ds of Story &quot;</span><span class="si">{}</span><span class="s1">&quot; are &#39;</span>\
            <span class="s1">&#39;degenerate.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">new_room_2ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">removed_rooms</span></div>


<div class="viewcode-block" id="Story.join_small_room_2ds">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.join_small_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join_small_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">area_threshold</span><span class="p">,</span> <span class="n">join_into_large</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Join small Room2Ds together within this Story.</span>

<span class="sd">        This is particularly useful when operations like automatic core/perimeter</span>
<span class="sd">        zoning creates several small Room2Ds from small segments in the outline</span>
<span class="sd">        boundary around the Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            area_threshold: A number for the Room2D floor area below which it is</span>
<span class="sd">                considered a small room to be joined into adjacent rooms.</span>
<span class="sd">            join_into_large: A boolean to note whether the small Room2Ds should</span>
<span class="sd">                be joined into neighboring large Room2Ds as opposed to simply</span>
<span class="sd">                joining the small rooms to one another. (Default: False).</span>
<span class="sd">            tolerance: The minimum distance between vertices at which point they</span>
<span class="sd">                are considered equivalent. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># first gather all of the small rooms in the model to be joined</span>
        <span class="n">all_rooms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>
        <span class="n">small_rooms</span><span class="p">,</span> <span class="n">large_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">all_rooms</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rm</span><span class="o">.</span><span class="n">floor_area</span> <span class="o">&lt;</span> <span class="n">area_threshold</span><span class="p">:</span>
                <span class="n">small_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rm</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">large_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rm</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">small_rooms</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># join Room2Ds together that share adjacency</span>
        <span class="n">joined_small_rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">room_groups</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">group_by_adjacency</span><span class="p">(</span><span class="n">small_rooms</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r_group</span> <span class="ow">in</span> <span class="n">room_groups</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r_group</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># no rooms to be joined together</span>
                <span class="n">joined_small_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">r_group</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">joined_rooms</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">join_room_2ds</span><span class="p">(</span><span class="n">r_group</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="n">joined_small_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">joined_rooms</span><span class="p">)</span>
            <span class="n">del_is</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">n_rm</span> <span class="ow">in</span> <span class="n">r_group</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">in_i</span><span class="p">,</span> <span class="n">e_rm</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">all_rooms</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">e_rm</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">n_rm</span><span class="o">.</span><span class="n">identifier</span><span class="p">:</span>
                        <span class="n">del_is</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">in_i</span><span class="p">)</span>
                        <span class="k">break</span>
            <span class="n">del_is</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">del_i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">del_is</span><span class="p">):</span>
                <span class="n">all_rooms</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">del_i</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j_room</span> <span class="ow">in</span> <span class="n">joined_rooms</span><span class="p">:</span>
                <span class="n">all_rooms</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">del_is</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">j_room</span><span class="p">)</span>

        <span class="c1"># if join_into_neighbor is selected, join the small rooms into the neighbors</span>
        <span class="k">if</span> <span class="n">join_into_large</span><span class="p">:</span>
            <span class="n">all_rooms</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">join_to_neighbor</span><span class="p">(</span>
                <span class="n">large_rooms</span><span class="p">,</span> <span class="n">joined_small_rooms</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># set Room2Ds and re-solve adjacencies to make the result valid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span> <span class="o">=</span> <span class="n">all_rooms</span></div>


<div class="viewcode-block" id="Story.fill_holes">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.fill_holes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">fill_holes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">base_name</span><span class="o">=</span><span class="s1">&#39;Room&#39;</span><span class="p">,</span> <span class="n">area_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill any holes in this Story&#39;s floor plate with new Room2Ds.</span>

<span class="sd">        Args:</span>
<span class="sd">            base_name: Text to set the display_name of the generated Room2Ds and</span>
<span class="sd">                will be incorporated into a unique Room2D identifier. (Default: &quot;Room&quot;).</span>
<span class="sd">            area_threshold: An optional positive number that the minimum area of</span>
<span class="sd">                a hole for it to be filled with a Room2D. This can be used to</span>
<span class="sd">                ensure very small holes aren&#39;t unintentionally filled with holes.</span>
<span class="sd">                Setting this value to zero will result in all holes filled with</span>
<span class="sd">                Room2Ds. (Default: 0).</span>
<span class="sd">            tolerance: The minimum distance between vertices at which point they</span>
<span class="sd">                are considered equivalent. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of new Rom2Ds that were added to the Story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># compute the horizontal boundary around the rooms</span>
        <span class="n">median_i</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ftcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">]</span>
        <span class="n">ftcs</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">median_height</span> <span class="o">=</span> <span class="n">ftcs</span><span class="p">[</span><span class="n">median_i</span><span class="p">]</span>
        <span class="n">h_bounds</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">grouped_horizontal_boundary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>

        <span class="c1"># convert holes in the resulting boundary to rooms</span>
        <span class="n">new_rooms</span><span class="p">,</span> <span class="n">room_count</span> <span class="o">=</span> <span class="p">[],</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">h_bound</span> <span class="ow">in</span> <span class="n">h_bounds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">h_bound</span><span class="o">.</span><span class="n">has_holes</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">hole</span> <span class="ow">in</span> <span class="n">h_bound</span><span class="o">.</span><span class="n">holes</span><span class="p">:</span>
                    <span class="n">hole_face</span> <span class="o">=</span> <span class="n">Face3D</span><span class="p">(</span><span class="n">hole</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">hole_face</span><span class="o">.</span><span class="n">area</span> <span class="o">&gt;</span> <span class="n">area_threshold</span><span class="p">:</span>
                        <span class="c1"># create the Room2D object</span>
                        <span class="n">room_name</span> <span class="o">=</span> <span class="n">base_name</span> <span class="k">if</span> <span class="n">room_count</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> \
                            <span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">base_name</span><span class="p">,</span> <span class="n">room_count</span><span class="p">)</span>
                        <span class="n">room_id</span> <span class="o">=</span> <span class="n">clean_and_id_string</span><span class="p">(</span><span class="n">room_name</span><span class="p">)</span>
                        <span class="n">new_room</span> <span class="o">=</span> <span class="n">Room2D</span><span class="p">(</span><span class="n">room_id</span><span class="p">,</span> <span class="n">hole_face</span><span class="p">,</span> <span class="n">median_height</span><span class="p">,</span>
                                          <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
                        <span class="n">new_room</span><span class="o">.</span><span class="n">display_name</span> <span class="o">=</span> <span class="n">room_name</span>

                        <span class="c1"># assign is_top_exposed and is_ground_contact with neighbor rooms</span>
                        <span class="n">neighbor_top_ex</span><span class="p">,</span> <span class="n">neighbor_grd_con</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">adj_room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                            <span class="n">adj_poly</span> <span class="o">=</span> <span class="n">adj_room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">polygon2d</span>
                            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">new_room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">polygon2d</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">adj_poly</span><span class="o">.</span><span class="n">distance_to_point</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">:</span>
                                    <span class="n">neighbor_top_ex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">adj_room</span><span class="o">.</span><span class="n">is_top_exposed</span><span class="p">)</span>
                                    <span class="n">neighbor_grd_con</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">adj_room</span><span class="o">.</span><span class="n">is_ground_contact</span><span class="p">)</span>
                                    <span class="k">break</span>
                        <span class="n">new_room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">neighbor_top_ex</span><span class="p">)</span>
                        <span class="n">new_room</span><span class="o">.</span><span class="n">is_ground_contact</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">neighbor_grd_con</span><span class="p">)</span>

                        <span class="c1"># add the new rooms and the corresponding stories to the output</span>
                        <span class="n">new_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_room</span><span class="p">)</span>
                        <span class="n">room_count</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># add the new rooms to this story</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_room_2ds</span><span class="p">(</span><span class="n">new_rooms</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_rooms</span></div>


<div class="viewcode-block" id="Story.join_room_2ds">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.join_room_2ds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join_room_2ds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_ids</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Join Room2Ds together on this Story.</span>

<span class="sd">        The largest Room2D that is identified within each connected group will</span>
<span class="sd">        determine the extension properties of the resulting Room2D. Skylights</span>
<span class="sd">        will be merged across rooms if they are of the same type or if they are None.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_ids: A list of Room2Ds identifiers for rooms on this Story to</span>
<span class="sd">                be joined together where they touch one another.</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the polygon</span>
<span class="sd">                boundary at which point the vertex is considered to lie on the</span>
<span class="sd">                polygon. (Default: 0.01, suitable for objects in meters).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of Room2Ds for the new rooms created through joining.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">remove_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">room_ids</span><span class="p">)</span>
        <span class="n">final_rooms</span><span class="p">,</span> <span class="n">merge_rooms</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">remove_ids</span><span class="p">:</span>
                <span class="n">final_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">merge_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
        <span class="n">new_rooms</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">join_room_2ds</span><span class="p">(</span><span class="n">merge_rooms</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>
        <span class="n">final_rooms</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">new_rooms</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span> <span class="o">=</span> <span class="n">final_rooms</span>
        <span class="k">return</span> <span class="n">new_rooms</span></div>


<div class="viewcode-block" id="Story.rebuild_detailed_windows">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.rebuild_detailed_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rebuild_detailed_windows</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">match_adjacency</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">rebuild_skylights</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rebuild all detailed windows such that they are bounded by their parent walls.</span>

<span class="sd">        This method will also ensure that all interior windows on adjacent wall</span>
<span class="sd">        segments are matched correctly with one another.</span>

<span class="sd">        This is useful to run after situations where Room2D vertices have been moved,</span>
<span class="sd">        which can otherwise disrupt the pattern of detailed windows.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between a vertex and the edge of the</span>
<span class="sd">                wall segment that is considered not touching. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">            match_adjacency: A boolean to note whether this method should ensure</span>
<span class="sd">                that all interior windows on adjacent wall segments are matched</span>
<span class="sd">                correctly with one another. This is desirable when the existing</span>
<span class="sd">                adjacencies across the model are correct but it can create several</span>
<span class="sd">                unwanted cases when the adjacencies are not correct. (Default: False).</span>
<span class="sd">            rebuild_skylights: A boolean to note whether skylights should be offset</span>
<span class="sd">                and rebuilt if they lie outside their parent Room2D.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">adj_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">new_w_pars</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">zip_items</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="n">room</span><span class="o">.</span><span class="n">_window_parameters</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_segments</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">w_par</span><span class="p">,</span> <span class="n">seg</span><span class="p">,</span> <span class="n">bc</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_items</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">w_par</span><span class="p">,</span> <span class="n">DetailedWindows</span><span class="p">):</span>
                    <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">w_par</span><span class="o">.</span><span class="n">adjust_for_segment</span><span class="p">(</span>
                        <span class="n">seg</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">match_adjacency</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">adj_seg</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">boundary_condition_objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">adj_dict</span><span class="p">[</span><span class="n">adj_seg</span><span class="p">]</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">seg</span><span class="o">.</span><span class="n">length</span><span class="p">)</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># first of the two adjacencies</span>
                            <span class="n">this_seg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">..Face</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                            <span class="n">adj_dict</span><span class="p">[</span><span class="n">this_seg</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_w_par</span>
                        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>  <span class="c1"># all windows were removed from adjacency</span>
                            <span class="n">new_w_par</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">new_w_par</span> <span class="o">=</span> <span class="n">w_par</span>
                <span class="n">new_w_pars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_w_par</span><span class="p">)</span>
            <span class="n">room</span><span class="o">.</span><span class="n">_window_parameters</span> <span class="o">=</span> <span class="n">new_w_pars</span>
            <span class="k">if</span> <span class="n">rebuild_skylights</span><span class="p">:</span>
                <span class="n">room</span><span class="o">.</span><span class="n">offset_skylights_from_edges</span><span class="p">(</span><span class="n">tolerance</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.reset_adjacency">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.reset_adjacency">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all Surface boundary conditions on the Story to be Outdoors.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">reset_adjacency</span><span class="p">()</span></div>


<div class="viewcode-block" id="Story.intersect_room_2d_adjacency">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.intersect_room_2d_adjacency">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">intersect_room_2d_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically intersect the line segments of the Story&#39;s Room2Ds.</span>

<span class="sd">        Note that this method effectively erases window parameters and shading</span>
<span class="sd">        parameters for any intersected segments as the original segments are</span>
<span class="sd">        subdivided. As such, it is recommended that this method be used before</span>
<span class="sd">        assigning window or shading parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values of two</span>
<span class="sd">                at which they can be considered adjacent. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">intersect_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.solve_room_2d_adjacency">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.solve_room_2d_adjacency">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">solve_room_2d_adjacency</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">intersect</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">resolve_window_conflicts</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically solve adjacencies across the Room2Ds in this Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values of two</span>
<span class="sd">                faces at which they can be considered adjacent. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">            intersect: Boolean to note wether the Room2Ds should be intersected</span>
<span class="sd">                to obtain matching wall segments before solving adjacency. Note</span>
<span class="sd">                that setting this to True will result in the loss of windows and</span>
<span class="sd">                shades assigned to intersected segments. (Default: False).</span>
<span class="sd">            resolve_window_conflicts: Boolean to note whether conflicts between</span>
<span class="sd">                window parameters of adjacent segments should be resolved during</span>
<span class="sd">                adjacency setting or an error should be raised about the mismatch.</span>
<span class="sd">                Resolving conflicts will default to the window parameters with the</span>
<span class="sd">                larger are and assign them to the other segment. (Default: True).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">intersect</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">intersect_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="n">Room2D</span><span class="o">.</span><span class="n">solve_adjacency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">resolve_window_conflicts</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.patch_missing_adjacencies">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.patch_missing_adjacencies">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">patch_missing_adjacencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace any Surface BCs with missing adjacent objects with outdoors.&quot;&quot;&quot;</span>
        <span class="n">Room2D</span><span class="o">.</span><span class="n">patch_missing_adjacencies</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.set_adjacent_air_boundary">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_adjacent_air_boundary">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_adjacent_air_boundary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">guide_lines</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set adjacencies between Room2Ds in this Story to use air boundaries.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_ids: An optional list of Room2D identifiers to specify a subset</span>
<span class="sd">                of rooms within the Story that will have air boundaries set</span>
<span class="sd">                between them. If None, all Room2Ds in the story will have</span>
<span class="sd">                air boundaries set if they are adjacent to another. (Default: None).</span>
<span class="sd">            guide_lines: An optional list of LineSegment2Ds to specify a subset</span>
<span class="sd">                of rooms within the Story that will have air boundaries set</span>
<span class="sd">                between them. If None, all Room2Ds in the story will have</span>
<span class="sd">                air boundaries set if they are adjacent to another. (Default: None).</span>
<span class="sd">            tolerance: The minimum difference between the coordinate values of two</span>
<span class="sd">                faces at which they can be considered adjacent. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># gather all of the Room2Ds which will have air boundaries assigned</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span> <span class="k">if</span> <span class="n">room_ids</span> <span class="ow">is</span> <span class="kc">None</span> \
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">rooms_by_identifier</span><span class="p">(</span><span class="n">room_ids</span><span class="p">)</span>
        <span class="c1"># find the adjacencies along which air boundaries will be set</span>
        <span class="k">if</span> <span class="n">guide_lines</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">guide_lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">adj_info</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">find_adjacency</span><span class="p">(</span><span class="n">rooms</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">adj_info</span> <span class="o">=</span> <span class="n">Room2D</span><span class="o">.</span><span class="n">find_adjacency_by_guide_lines</span><span class="p">(</span>
                <span class="n">rooms</span><span class="p">,</span> <span class="n">guide_lines</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># assign air boundaries to all of the pairs that were found</span>
        <span class="k">for</span> <span class="n">room_pair</span> <span class="ow">in</span> <span class="n">adj_info</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room_adj</span> <span class="ow">in</span> <span class="n">room_pair</span><span class="p">:</span>
                <span class="n">room</span><span class="p">,</span> <span class="n">wall_i</span> <span class="o">=</span> <span class="n">room_adj</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">set_window_parameter</span><span class="p">(</span><span class="n">wall_i</span><span class="p">)</span>  <span class="c1"># remove windows along air bound</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">set_air_boundary</span><span class="p">(</span><span class="n">wall_i</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>  <span class="c1"># segment with non-adjacent BC</span>
                    <span class="k">pass</span>  <span class="c1"># ignore this particular segment</span></div>


<div class="viewcode-block" id="Story.set_outdoor_window_parameters">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_window_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_outdoor_window_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window_parameter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all of the outdoor walls to have the same window parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            window_parameter: A WindowParameter object that will be assigned to</span>
<span class="sd">                all wall segments of this story&#39;s rooms that have an Outdoors</span>
<span class="sd">                boundary conditions. This can also be None, to remove all</span>
<span class="sd">                windows from the story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">set_outdoor_window_parameters</span><span class="p">(</span><span class="n">window_parameter</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.set_outdoor_shading_parameters">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_outdoor_shading_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_outdoor_shading_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shading_parameter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all of the outdoor walls to have the same shading parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            shading_parameter: A ShadingParameter object that will be assigned to</span>
<span class="sd">                all wall segments of this story&#39;s rooms that have an Outdoors</span>
<span class="sd">                boundary conditions. This can also be None, to remove all</span>
<span class="sd">                shades from the story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">set_outdoor_shading_parameters</span><span class="p">(</span><span class="n">shading_parameter</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.to_rectangular_windows">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.to_rectangular_windows">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_rectangular_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert all of the windows of the Story to the RectangularWindows format.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">to_rectangular_windows</span><span class="p">()</span></div>


<div class="viewcode-block" id="Story.set_ground_contact">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_ground_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_ground_contact</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all child Room2Ds of this object to have floors with ground contact.</span>

<span class="sd">        Args:</span>
<span class="sd">            is_ground_contact: A boolean noting whether all the Story&#39;s room_2ds</span>
<span class="sd">                have floors in contact with the ground. Default: True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">is_ground_contact</span> <span class="o">=</span> <span class="n">is_ground_contact</span></div>


<div class="viewcode-block" id="Story.set_top_exposed">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_top_exposed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_top_exposed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set all child Room2Ds of this object to have ceilings exposed to the outdoors.</span>

<span class="sd">        Args:</span>
<span class="sd">            is_top_exposed: A boolean noting whether all the Story&#39;s room_2ds</span>
<span class="sd">                have ceilings exposed to the outdoors. Default: True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="o">=</span> <span class="n">is_top_exposed</span></div>


<div class="viewcode-block" id="Story.split_with_story_above">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.split_with_story_above">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">split_with_story_above</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story_above</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split the child Room2Ds of this object with the footprint of the Story above.</span>

<span class="sd">        This is useful as a pre-step before running set_top_exposed_by_story_above</span>
<span class="sd">        as it ensures all top-exposed areas of this Story have a Room2D that can</span>
<span class="sd">        be set to exposed.</span>

<span class="sd">        Args:</span>
<span class="sd">            story_above: A Story object that sits above this Story. Each Room2D</span>
<span class="sd">                of this Story will be checked to see if it intersects the Story</span>
<span class="sd">                above and it will be split based on this.</span>
<span class="sd">            tolerance: The tolerance with which the splitting intersection will be</span>
<span class="sd">                computed. Default: 0.01, suitable for objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the footprint geometry of the story above</span>
        <span class="n">above_geos</span> <span class="o">=</span> <span class="n">story_above</span><span class="o">.</span><span class="n">footprint</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
        <span class="c1"># loop through the rooms and split them</span>
        <span class="n">split_rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="c1"># split the floor with all geometries above</span>
            <span class="n">room_height</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_height</span>
            <span class="n">split_geo</span> <span class="o">=</span> <span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a_geo</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">above_geos</span><span class="p">):</span>
                <span class="c1"># make sure all above geometries are at the room floor_height</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a_geo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> <span class="n">room_height</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tolerance</span><span class="p">:</span>
                    <span class="n">a_geo</span> <span class="o">=</span> <span class="n">a_geo</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">room_height</span> <span class="o">-</span> <span class="n">a_geo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span><span class="p">))</span>
                    <span class="n">above_geos</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a_geo</span>  <span class="c1"># set it so we hopefully don&#39;t move next time</span>
                <span class="c1"># split the geometries with one another</span>
                <span class="n">new_geo</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">r_geo</span> <span class="ow">in</span> <span class="n">split_geo</span><span class="p">:</span>
                    <span class="n">floor_split</span><span class="p">,</span> <span class="n">above_split</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">coplanar_split</span><span class="p">(</span>
                        <span class="n">r_geo</span><span class="p">,</span> <span class="n">a_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="n">new_geo</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">floor_split</span><span class="p">)</span>
                <span class="n">split_geo</span> <span class="o">=</span> <span class="n">new_geo</span>
            <span class="c1"># create the new Room2D if necessary</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_geo</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># no room splitting needed</span>
                <span class="n">split_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># the Room2D has been split</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">s_geo</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">split_geo</span><span class="p">):</span>
                    <span class="c1"># check to make sure the split geometry is not degenerate</span>
                    <span class="n">max_dim</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">s_geo</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">s_geo</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">s_geo</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">s_geo</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">y</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">s_geo</span><span class="o">.</span><span class="n">area</span> <span class="o">&lt;</span> <span class="n">max_dim</span> <span class="o">*</span> <span class="n">tolerance</span><span class="p">:</span>  <span class="c1"># degenerate geometry found</span>
                        <span class="k">continue</span>
                    <span class="n">new_id</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
                    <span class="n">new_room</span> <span class="o">=</span> <span class="n">Room2D</span><span class="p">(</span>
                        <span class="n">new_id</span><span class="p">,</span> <span class="n">s_geo</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span><span class="p">,</span>
                        <span class="n">is_ground_contact</span><span class="o">=</span><span class="n">room</span><span class="o">.</span><span class="n">is_ground_contact</span><span class="p">,</span>
                        <span class="n">is_top_exposed</span><span class="o">=</span><span class="n">room</span><span class="o">.</span><span class="n">is_top_exposed</span><span class="p">)</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">_match_and_transfer_wall_props</span><span class="p">(</span><span class="n">new_room</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_display_name</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> \
                        <span class="k">else</span> <span class="n">room</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_has_floor</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_has_floor</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_has_ceiling</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_has_ceiling</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_ceiling_plenum_depth</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_ceiling_plenum_depth</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_floor_plenum_depth</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_floor_plenum_depth</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_skylight_parameters</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_skylight_parameters</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">_duplicate_extension_attr</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span>
                    <span class="n">split_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_room</span><span class="p">)</span>
        <span class="c1"># set the split rooms to this story</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span> <span class="o">=</span> <span class="n">split_rooms</span></div>


<div class="viewcode-block" id="Story.set_top_exposed_by_story_above">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_top_exposed_by_story_above">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_top_exposed_by_story_above</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story_above</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Room2Ds of this Story to have ceilings exposed to the outdoors.</span>

<span class="sd">        Args:</span>
<span class="sd">            story_above: A Story object that sits above this Story. Each Room2D</span>
<span class="sd">                of this Story will be checked to see if the story_above geometry</span>
<span class="sd">                lies above the room and, if not, the top exposure will be set to True.</span>
<span class="sd">            tolerance: The tolerance that will be used to compute the point within</span>
<span class="sd">                the floor boundary that is used to check whether there is geometry</span>
<span class="sd">                above each Room2D. It is recommended that this number not be less</span>
<span class="sd">                than 1 centimeter to avoid long computation times. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">up_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">rm_pt</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">center</span> <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">is_convex</span> <span class="k">else</span> \
                <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">pole_of_inaccessibility</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="n">face_ray</span> <span class="o">=</span> <span class="n">Ray3D</span><span class="p">(</span><span class="n">rm_pt</span><span class="p">,</span> <span class="n">up_vec</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">other_room</span> <span class="ow">in</span> <span class="n">story_above</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other_room</span><span class="o">.</span><span class="n">_floor_geometry</span><span class="o">.</span><span class="n">intersect_line_ray</span><span class="p">(</span><span class="n">face_ray</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Story.set_ground_contact_by_story_below">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.set_ground_contact_by_story_below">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_ground_contact_by_story_below</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">story_below</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Room2Ds of this Story to have ground contact using the story below.</span>

<span class="sd">        Note that this method assumes that the story_below is completely</span>
<span class="sd">        underground such that any Room2D of this Story will be ground contact</span>
<span class="sd">        if there is no Room2D below the room.</span>

<span class="sd">        Args:</span>
<span class="sd">            story_below: A Story object that sits below this Story. Each Room2D</span>
<span class="sd">                of this Story will be checked to see if the story_below geometry</span>
<span class="sd">                lies below the room and, if not, the ground contact will be set to True.</span>
<span class="sd">            tolerance: The tolerance that will be used to compute the point within</span>
<span class="sd">                the floor boundary that is used to check whether there is geometry</span>
<span class="sd">                above each Room2D. It is recommended that this number not be less</span>
<span class="sd">                than 1 centimeter to avoid long computation times. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">down_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">rm_pt</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">center</span> <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">is_convex</span> <span class="k">else</span> \
                <span class="n">room</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">pole_of_inaccessibility</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="n">face_ray</span> <span class="o">=</span> <span class="n">Ray3D</span><span class="p">(</span><span class="n">Point3D</span><span class="p">(</span><span class="n">rm_pt</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">rm_pt</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">rm_pt</span><span class="o">.</span><span class="n">z</span> <span class="o">+</span> <span class="n">tolerance</span><span class="p">),</span> <span class="n">down_vec</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">other_room</span> <span class="ow">in</span> <span class="n">story_below</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other_room</span><span class="o">.</span><span class="n">_floor_geometry</span><span class="o">.</span><span class="n">intersect_line_ray</span><span class="p">(</span><span class="n">face_ray</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">is_ground_contact</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">room</span><span class="o">.</span><span class="n">is_ground_contact</span> <span class="o">=</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Story.make_underground">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.make_underground">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_underground</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">remove_windows</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make this Story underground by setting all Room2D segments to have Ground BCs.</span>

<span class="sd">        Note that this method only changes the outdoor walls of the Room2Ds to have</span>
<span class="sd">        Ground boundary conditions and, if the floors of the story are also in</span>
<span class="sd">        contact with the ground, the set_ground_contact should be used in addition</span>
<span class="sd">        to this method.</span>

<span class="sd">        Args:</span>
<span class="sd">            remove_windows: Boolean to note whether outdoor Room2D segments</span>
<span class="sd">                with windows should have their outdoor boundary conditions and</span>
<span class="sd">                windows kept (True) or whether the windows should be removed</span>
<span class="sd">                in order to assign a ground boundary condition to all</span>
<span class="sd">                walls (False). (Default: False).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">remove_windows</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_outdoor_window_parameters</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                        <span class="n">room</span><span class="o">.</span><span class="n">set_boundary_condition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">bcs</span><span class="o">.</span><span class="n">ground</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
                <span class="n">zip_obj</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">_window_parameters</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zip_obj</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                        <span class="n">room</span><span class="o">.</span><span class="n">set_boundary_condition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">bcs</span><span class="o">.</span><span class="n">ground</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.make_aboveground">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.make_aboveground">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">make_aboveground</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make this Story aboveground by setting all Room2D segments to have Outdoor BCs.</span>

<span class="sd">        Note that this method only changes the ground contact walls of the Room2Ds</span>
<span class="sd">        to have Outdoor boundary conditions and, if the floors of the story are</span>
<span class="sd">        also exposed, the set_ground_contact method should be used in addition</span>
<span class="sd">        to this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Ground</span><span class="p">):</span>
                    <span class="n">room</span><span class="o">.</span><span class="n">set_boundary_condition</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.automatically_zone">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.automatically_zone">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">automatically_zone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orient_count</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">north_vector</span><span class="o">=</span><span class="n">Vector2D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                           <span class="n">attr_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Automatically group the rooms of this Story into zones.</span>

<span class="sd">        Relevant properties that are used to group Room2Ds into zones include</span>
<span class="sd">        orientation, and additional attributes (like programs).</span>

<span class="sd">        Args:</span>
<span class="sd">            orient_count: An optional positive integer to set the number of orientation</span>
<span class="sd">                groups to use for zoning. For example, setting this to 4 will result</span>
<span class="sd">                in zones being established based on the four orientations (North,</span>
<span class="sd">                East, South, West). If None, the maximum number of unique groups</span>
<span class="sd">                will be used.</span>
<span class="sd">            north_vector: A ladybug_geometry Vector2D for the north direction.</span>
<span class="sd">                Default is the Y-axis (0, 1).</span>
<span class="sd">            attr_name: A string of an attribute that the input Room2Ds should have.</span>
<span class="sd">                This can have &#39;.&#39; that separate the nested attributes from one another.</span>
<span class="sd">                For example, &#39;properties.energy.program_type&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Room2D</span><span class="o">.</span><span class="n">automatically_zone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">,</span> <span class="n">orient_count</span><span class="p">,</span> <span class="n">north_vector</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.generate_grid">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.generate_grid">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_dim</span><span class="p">,</span> <span class="n">y_dim</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a list of gridded Mesh3D objects offset from the floors of this story.</span>

<span class="sd">        Args:</span>
<span class="sd">            x_dim: The x dimension of the grid cells as a number.</span>
<span class="sd">            y_dim: The y dimension of the grid cells as a number. Default is None,</span>
<span class="sd">                which will assume the same cell dimension for y as is set for x.</span>
<span class="sd">            offset: A number for how far to offset the grid from the base face.</span>
<span class="sd">                Default is 1.0, which will not offset the grid to be 1 unit above</span>
<span class="sd">                the floor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">generate_grid</span><span class="p">(</span><span class="n">x_dim</span><span class="p">,</span> <span class="n">y_dim</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">]</span></div>


<div class="viewcode-block" id="Story.move">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.move">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">moving_vec</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move this Story along a vector.</span>

<span class="sd">        Args:</span>
<span class="sd">            moving_vec: A ladybug_geometry Vector3D with the direction and distance</span>
<span class="sd">                to move the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">moving_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span> <span class="o">+</span> <span class="n">moving_vec</span><span class="o">.</span><span class="n">z</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">moving_vec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">moving_vec</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.rotate_xy">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.rotate_xy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">rotate_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Rotate this Story counterclockwise in the XY plane by a certain angle.</span>

<span class="sd">        Args:</span>
<span class="sd">            angle: An angle in degrees.</span>
<span class="sd">            origin: A ladybug_geometry Point3D for the origin around which the</span>
<span class="sd">                object will be rotated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">rotate_xy</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.reflect">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.reflect">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reflect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plane</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reflect this Story across a plane.</span>

<span class="sd">        Args:</span>
<span class="sd">            plane: A ladybug_geometry Plane across which the object will be reflected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">reflect</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.scale">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.scale">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scale this Story by a factor from an origin point.</span>

<span class="sd">        Args:</span>
<span class="sd">            factor: A number representing how much the object should be scaled.</span>
<span class="sd">            origin: A ladybug_geometry Point3D representing the origin from which</span>
<span class="sd">                to scale. If None, it will be scaled from the World origin (0, 0, 0).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">room</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floor_to_floor_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floor_to_floor_height</span> <span class="o">*</span> <span class="n">factor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span> <span class="o">*</span> <span class="n">factor</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">origin</span><span class="p">)</span></div>


<div class="viewcode-block" id="Story.check_room2d_floor_heights_valid">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.check_room2d_floor_heights_valid">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_room2d_floor_heights_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that all Room2Ds have floor elevations in range to be on the same Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised</span>
<span class="sd">                if rooms with inappropriate floor elevations are found. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with a dictionary if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2d_story_geometry_valid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">):</span>
            <span class="c1"># determine if are more offending rooms above or below average floor height</span>
            <span class="n">flr_hts</span> <span class="o">=</span> <span class="p">[</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_height</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">]</span>
            <span class="n">flr_hts</span><span class="p">,</span> <span class="n">rooms</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">flr_hts</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">),</span>
                                         <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">sum_ftc</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">])</span>
            <span class="n">avg_ftc</span> <span class="o">=</span> <span class="n">sum_ftc</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">)</span>
            <span class="n">rms_below</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">flr_ht</span><span class="p">,</span> <span class="n">room</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">flr_hts</span><span class="p">,</span> <span class="n">rooms</span><span class="p">):</span>
                <span class="n">f_dif</span> <span class="o">=</span> <span class="n">flr_hts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">flr_ht</span>
                <span class="k">if</span> <span class="n">f_dif</span> <span class="o">&gt;=</span> <span class="n">avg_ftc</span><span class="p">:</span>
                    <span class="n">r_info</span> <span class="o">=</span> <span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">f_dif</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                              <span class="nb">round</span><span class="p">(</span><span class="n">flr_ht</span> <span class="o">+</span> <span class="p">(</span><span class="n">f_dif</span> <span class="o">-</span> <span class="n">avg_ftc</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
                    <span class="n">rms_below</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_info</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="n">rms_above</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">flr_ht</span><span class="p">,</span> <span class="n">room</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">flr_hts</span><span class="p">),</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">rooms</span><span class="p">)):</span>
                <span class="n">f_dif</span> <span class="o">=</span> <span class="n">flr_ht</span> <span class="o">-</span> <span class="n">flr_hts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">f_dif</span> <span class="o">&gt;=</span> <span class="n">avg_ftc</span><span class="p">:</span>
                    <span class="n">r_info</span> <span class="o">=</span> <span class="p">(</span><span class="n">room</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">f_dif</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                              <span class="nb">round</span><span class="p">(</span><span class="n">flr_ht</span> <span class="o">-</span> <span class="p">(</span><span class="n">f_dif</span> <span class="o">-</span> <span class="n">avg_ftc</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
                    <span class="n">rms_above</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_info</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="c1"># prepare to give an exception message</span>
            <span class="n">detailed</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">raise_exception</span> <span class="k">else</span> <span class="n">detailed</span>
            <span class="n">msg1</span> <span class="o">=</span> <span class="s1">&#39;Story &quot;</span><span class="si">{}</span><span class="s1">&quot; has Room floor elevations that are too different from &#39;</span> \
                <span class="s1">&#39;one another to be a part of the same Story.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
            <span class="n">msg2t</span> <span class="o">=</span> <span class="s1">&#39;  The following Rooms have an elevation </span><span class="si">{}</span><span class="s1"> the others:</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span>
            <span class="n">msg3t</span> <span class="o">=</span> <span class="s1">&#39;The Room &quot;</span><span class="si">{}</span><span class="s1">&quot; has an elevation that is </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> the others. &#39;</span> \
                <span class="s1">&#39;Changing the floor elevation to something </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> would make it valid.&#39;</span>
            <span class="c1"># create the exception messages</span>
            <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rms_below</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">rms_above</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">b_room</span> <span class="ow">in</span> <span class="n">rms_below</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="n">msg3t</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">b_room</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">b_room</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                           <span class="s1">&#39;below&#39;</span><span class="p">,</span> <span class="s1">&#39;above&#39;</span><span class="p">,</span> <span class="n">b_room</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                            <span class="n">msg</span><span class="p">,</span> <span class="n">b_room</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100106&#39;</span><span class="p">,</span>
                            <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Invalid Room Floor Elevation&#39;</span><span class="p">)</span>
                        <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">a_room</span> <span class="ow">in</span> <span class="n">rms_above</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="n">msg3t</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a_room</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">a_room</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                           <span class="s1">&#39;above&#39;</span><span class="p">,</span> <span class="s1">&#39;below&#39;</span><span class="p">,</span> <span class="n">a_room</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                            <span class="n">msg</span><span class="p">,</span> <span class="n">a_room</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100106&#39;</span><span class="p">,</span>
                            <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Invalid Room Floor Elevation&#39;</span><span class="p">)</span>
                        <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">msgs</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rms_below</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;   </span><span class="si">{}</span><span class="s1"> - distance: -</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">rm</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                             <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">rms_below</span><span class="p">]</span>
                <span class="n">rms_above</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;   </span><span class="si">{}</span><span class="s1"> - distance: +</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">rm</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                             <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">rms_above</span><span class="p">]</span>
                <span class="n">msg2</span> <span class="o">=</span> <span class="n">msg2t</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;below&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rms_below</span><span class="p">))</span> \
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rms_below</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">rms_above</span><span class="p">)</span> <span class="k">else</span> \
                    <span class="n">msg2t</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;above&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rms_above</span><span class="p">))</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msg1</span><span class="p">,</span> <span class="n">msg2</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">raise_exception</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">msg</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># no error to report</span>
            <span class="k">return</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">detailed</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="Story.check_missing_adjacencies">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.check_missing_adjacencies">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_missing_adjacencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that all Room2Ds have adjacent objects that exist within this Story.</span>

<span class="sd">        Args:</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised</span>
<span class="sd">                if missing or invalid adjacencies are found. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with a dictionary if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">detailed</span> <span class="o">=</span> <span class="kc">False</span> <span class="k">if</span> <span class="n">raise_exception</span> <span class="k">else</span> <span class="n">detailed</span>
        <span class="c1"># gather all of the Surface boundary conditions</span>
        <span class="n">srf_bc_dict</span><span class="p">,</span> <span class="n">rid_map</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">bc</span><span class="p">,</span> <span class="n">w_par</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">,</span> <span class="n">room</span><span class="o">.</span><span class="n">_window_parameters</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                    <span class="n">bc_objs</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">boundary_condition_objects</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">bc_ind</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bc_objs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;..Face&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                        <span class="n">srf_bc_dict</span><span class="p">[(</span><span class="n">bc_objs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">bc_ind</span><span class="p">)]</span> <span class="o">=</span> \
                            <span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">bc_objs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">w_par</span><span class="p">,</span> <span class="n">room</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># Surface BC not following dragonfly convention</span>
                        <span class="c1"># this will be reported as a missing adjacency later</span>
                        <span class="n">srf_bc_dict</span><span class="p">[(</span><span class="n">bc_objs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10000</span><span class="p">)]</span> <span class="o">=</span> \
                            <span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">bc_objs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">w_par</span><span class="p">,</span> <span class="n">room</span><span class="p">)</span>
            <span class="n">rid_map</span><span class="p">[</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">full_id</span>
        <span class="c1"># check the adjacencies for all Surface boundary conditions</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">srf_bc_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">rm_id</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">rm_id</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">rm_bc</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_boundary_conditions</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                        <span class="n">rm_w_par</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">_window_parameters</span><span class="p">[</span><span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>  <span class="c1"># referenced wall segment does not exist</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">rm_id</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># completely missing from the model</span>
                            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rm_id</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; has an adjacency referencing a missing &#39;</span> \
                            <span class="s1">&#39;wall segment on Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                            <span class="n">msg</span><span class="p">,</span> <span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100203&#39;</span><span class="p">,</span>
                            <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Missing Adjacency&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="k">break</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rm_bc</span><span class="p">,</span> <span class="n">Surface</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">rm_id</span><span class="p">],</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># completely missing from the model</span>
                            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">rm_id</span><span class="p">,</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; does not have a Surface boundary condition &#39;</span> \
                            <span class="s1">&#39;at &quot;</span><span class="si">{}</span><span class="s1">&quot; but its adjacent object does.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                            <span class="n">msg</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100201&#39;</span><span class="p">,</span>
                            <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Mismatched Adjacency&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">val</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="n">rm_w_par</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">rm_id</span><span class="p">]</span>
                        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># completely missing from the model</span>
                            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rm_id</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Window parameters do not match between &#39;</span> \
                            <span class="s1">&#39;adjacent Room2Ds &quot;</span><span class="si">{}</span><span class="s1">&quot; and &quot;</span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                            <span class="n">msg</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100202&#39;</span><span class="p">,</span>
                            <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Mismatched WindowParameter Adjacency&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                            <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">rid_map</span><span class="p">[</span><span class="n">rm_id</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># completely missing from the model</span>
                    <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rm_id</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; has a missing adjacency for Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                    <span class="n">msg</span><span class="p">,</span> <span class="n">val</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100203&#39;</span><span class="p">,</span> <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Missing Adjacency&#39;</span><span class="p">)</span>
                <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># report any errors</span>
        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">msgs</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raise_exception</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_msg</span></div>


<div class="viewcode-block" id="Story.check_no_room2d_overlaps">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_room2d_overlaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_no_room2d_overlaps</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that geometries of Room2Ds do not overlap with one another.</span>

<span class="sd">        Overlaps in Room2Ds mean that the Room volumes will collide with one</span>
<span class="sd">        another during translation to Honeybee.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance that two Room2Ds geometries can overlap</span>
<span class="sd">                with one another and still be considered valid. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised</span>
<span class="sd">                if overlapping geometries are found. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with a dictionary if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># find the number of overlaps across the Room2Ds</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">rooms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">room_1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rooms</span><span class="p">):</span>
            <span class="c1"># first check whether the boundaries of the rooms overlap</span>
            <span class="n">poly_1</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">room_2</span> <span class="ow">in</span> <span class="n">rooms</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:]:</span>
                    <span class="n">poly_2</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span>
                    <span class="k">if</span> <span class="n">poly_1</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">poly_2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># check that one room is not inside the hole of another</span>
                        <span class="n">inside_hole</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">if</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">has_holes</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">hole</span> <span class="ow">in</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">hole_polygon2d</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">hole</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">poly_2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                    <span class="n">inside_hole</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">inside_hole</span> <span class="ow">and</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">has_holes</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">hole</span> <span class="ow">in</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">hole_polygon2d</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">hole</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">poly_1</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                    <span class="n">inside_hole</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                        <span class="c1"># if the room is not in a hole, then they overlap</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">inside_hole</span><span class="p">:</span>
                            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; overlaps with Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; more than &#39;</span> \
                                <span class="s1">&#39;the tolerance (</span><span class="si">{}</span><span class="s1">) on Story &quot;</span><span class="si">{}</span><span class="s1">&quot;.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                    <span class="n">room_1</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">room_2</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                                    <span class="n">tolerance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                                <span class="n">msg</span><span class="p">,</span> <span class="n">room_1</span><span class="p">,</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100104&#39;</span><span class="p">,</span>
                                <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Overlapping Room Geometries&#39;</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                                <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_2</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                                <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_2</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                                <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                                <span class="n">m_z</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> \
                                    <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span>
                                <span class="n">m_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">m_z</span><span class="p">)</span>
                                <span class="n">room_2_geo</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">m_vec</span><span class="p">)</span>
                                <span class="n">help_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">coplanar_intersection</span><span class="p">(</span>
                                    <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">,</span> <span class="n">room_2_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="mf">0.017</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">help_geo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;helper_geometry&#39;</span><span class="p">]</span> <span class="o">=</span> \
                                        <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">help_geo</span><span class="p">]</span>
                            <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># we have reached the end of the list</span>
        <span class="c1"># report any errors</span>
        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">msgs</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raise_exception</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_msg</span></div>


<div class="viewcode-block" id="Story.check_roofs_above_rooms">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.check_roofs_above_rooms">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_roofs_above_rooms</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that geometries of RoofSpecifications all lie above the Room2D geometry.</span>

<span class="sd">        Roofs that lie below or intersect the Room2D floor plates (or the plenum floors)</span>
<span class="sd">        will cause an invalid calculation of the Room volume when translated</span>
<span class="sd">        to Honeybee. Roofs touching the edges of floor plates within the tolerance</span>
<span class="sd">        are permitted and can be translated to closed Honeybee Room volumes.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance between coordinate values that is</span>
<span class="sd">                considered a meaningful difference. (Default: 0.01, suitable</span>
<span class="sd">                for objects in meters).</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised if</span>
<span class="sd">                roof geometries are found below the Room2D geometries. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with dictionaries if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># find the number of cases where the roof is below the story floor</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">min_height</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">highest_plenum_floor_height</span><span class="p">:</span>
                <span class="n">messages</span><span class="p">,</span> <span class="n">bad_rooms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">check_roof_above_rooms</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">msg</span><span class="p">,</span> <span class="n">bad_rm</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">bad_rooms</span><span class="p">):</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                        <span class="n">msg</span><span class="p">,</span> <span class="n">bad_rm</span><span class="p">,</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100105&#39;</span><span class="p">,</span> <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Invalid Roof&#39;</span><span class="p">)</span>
                    <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># report any errors</span>
        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">msgs</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raise_exception</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_msg</span></div>


<div class="viewcode-block" id="Story.check_collision_with_story">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.check_collision_with_story">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_collision_with_story</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_story</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                                   <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that the Room2Ds of this Story do not collide with those on another.</span>

<span class="sd">        The check is performed by first determining whether the rooms have any overlap</span>
<span class="sd">        in vertical space, which is greater than the tolerance. If so, a check is</span>
<span class="sd">        performed to evaluate whether the two room polygons overlap in plan, thereby</span>
<span class="sd">        indicating a collision.</span>

<span class="sd">        Args:</span>
<span class="sd">            other_story: The other Story object for which collisions with this</span>
<span class="sd">                Story will be evaluated.</span>
<span class="sd">            tolerance: The minimum distance that two Room2Ds geometries can collide</span>
<span class="sd">                with one another and still be considered valid. (Default: 0.01,</span>
<span class="sd">                suitable for objects in meters).</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised</span>
<span class="sd">                if colliding geometries are found. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with a dictionary if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># find the collisions across the Room2Ds</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room_1</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
            <span class="n">fh1</span><span class="p">,</span> <span class="n">ch1</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_height</span><span class="p">,</span> <span class="n">room_1</span><span class="o">.</span><span class="n">ceiling_height</span>
            <span class="n">poly_1</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span>
            <span class="c1"># first check whether the rooms have any vertical overlap</span>
            <span class="k">for</span> <span class="n">room_2</span> <span class="ow">in</span> <span class="n">other_story</span><span class="o">.</span><span class="n">room_2ds</span><span class="p">:</span>
                <span class="n">fh2</span><span class="p">,</span> <span class="n">ch2</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_height</span><span class="p">,</span> <span class="n">room_2</span><span class="o">.</span><span class="n">ceiling_height</span>
                <span class="n">v_overlap</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">fh1</span> <span class="o">&lt;</span> <span class="n">fh2</span> <span class="ow">and</span> <span class="n">ch1</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="o">&gt;</span> <span class="n">fh2</span><span class="p">:</span>
                    <span class="n">v_overlap</span> <span class="o">=</span> <span class="n">ch1</span> <span class="o">-</span> <span class="n">fh2</span>
                <span class="k">elif</span> <span class="n">fh2</span> <span class="o">&lt;</span> <span class="n">fh1</span> <span class="ow">and</span> <span class="n">ch2</span> <span class="o">-</span> <span class="n">tolerance</span> <span class="o">&gt;</span> <span class="n">fh1</span><span class="p">:</span>
                    <span class="n">v_overlap</span> <span class="o">=</span> <span class="n">ch2</span> <span class="o">-</span> <span class="n">fh1</span>
                <span class="k">if</span> <span class="n">v_overlap</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># check whether the boundaries of the rooms overlap</span>
                    <span class="n">poly_2</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">boundary_polygon2d</span>
                    <span class="k">if</span> <span class="n">poly_1</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">poly_2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># check that one room is not inside the hole of another</span>
                        <span class="n">inside_hole</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">if</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">has_holes</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">hole</span> <span class="ow">in</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">hole_polygon2d</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">hole</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">poly_2</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                    <span class="n">inside_hole</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">inside_hole</span> <span class="ow">and</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">has_holes</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">hole</span> <span class="ow">in</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">hole_polygon2d</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">hole</span><span class="o">.</span><span class="n">polygon_relationship</span><span class="p">(</span><span class="n">poly_1</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                    <span class="n">inside_hole</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">break</span>
                        <span class="c1"># if the room is not in a hole, then they collide</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">inside_hole</span><span class="p">:</span>
                            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot; on Story &quot;</span><span class="si">{}</span><span class="s1">&quot; collides with Room2D &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span> \
                                <span class="s1">&#39; on Story &quot;</span><span class="si">{}</span><span class="s1">&quot; with a vertical overlap of </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                    <span class="n">room_1</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                                    <span class="n">room_2</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">other_story</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span>
                                    <span class="n">v_overlap</span><span class="p">)</span>
                            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                                <span class="n">msg</span><span class="p">,</span> <span class="n">room_1</span><span class="p">,</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100108&#39;</span><span class="p">,</span>
                                <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Colliding Rooms Between Stories&#39;</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
                                <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_2</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                                <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">room_2</span><span class="o">.</span><span class="n">display_name</span><span class="p">)</span>
                                <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s1">&#39;parents&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                                <span class="k">if</span> <span class="n">fh1</span> <span class="o">&gt;</span> <span class="n">fh2</span><span class="p">:</span>
                                    <span class="n">m_z</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> \
                                        <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span>
                                    <span class="n">m_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">m_z</span><span class="p">)</span>
                                    <span class="n">room_1_geo</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span>
                                    <span class="n">room_2_geo</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">m_vec</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">m_z</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span> <span class="o">-</span> \
                                        <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">z</span>
                                    <span class="n">m_vec</span> <span class="o">=</span> <span class="n">Vector3D</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">m_z</span><span class="p">)</span>
                                    <span class="n">room_1_geo</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">floor_geometry</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">m_vec</span><span class="p">)</span>
                                    <span class="n">room_2_geo</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">floor_geometry</span>
                                <span class="n">help_geo</span> <span class="o">=</span> <span class="n">Face3D</span><span class="o">.</span><span class="n">coplanar_intersection</span><span class="p">(</span>
                                    <span class="n">room_1_geo</span><span class="p">,</span> <span class="n">room_2_geo</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="mf">0.017</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">help_geo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;helper_geometry&#39;</span><span class="p">]</span> <span class="o">=</span> \
                                        <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">help_geo</span><span class="p">]</span>
                            <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># report any errors</span>
        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">msgs</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raise_exception</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_msg</span></div>


<div class="viewcode-block" id="Story.check_no_roof_overlaps">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.check_no_roof_overlaps">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_no_roof_overlaps</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that geometries of RoofSpecifications do not overlap with one another.</span>

<span class="sd">        This is NOT a requirement for the Model to be valid but it is sometimes</span>
<span class="sd">        useful to check when trying to make the simplest and cleanest</span>
<span class="sd">        representation of the roofs.</span>

<span class="sd">        Args:</span>
<span class="sd">            tolerance: The minimum distance that two Roof geometries can overlap</span>
<span class="sd">                with one another and still be considered valid. Default: 0.01,</span>
<span class="sd">                suitable for objects in meters.</span>
<span class="sd">            raise_exception: Boolean to note whether a ValueError should be raised</span>
<span class="sd">                if overlapping geometries are found. (Default: True).</span>
<span class="sd">            detailed: Boolean for whether the returned object is a detailed list of</span>
<span class="sd">                dicts with error info or a string with a message. (Default: False).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A string with the message or a list with a dictionary if detailed is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># find the number of overlaps in the Roof specification</span>
        <span class="n">msgs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">over_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">overlap_count</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">over_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Story &quot;</span><span class="si">{}</span><span class="s1">&quot; has RoofSpecification geometry with </span><span class="si">{}</span><span class="s1"> overlaps &#39;</span> \
                    <span class="s1">&#39;in it.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_name</span><span class="p">,</span> <span class="n">over_count</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation_message_child</span><span class="p">(</span>
                    <span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="p">,</span> <span class="n">detailed</span><span class="p">,</span> <span class="s1">&#39;100105&#39;</span><span class="p">,</span> <span class="n">error_type</span><span class="o">=</span><span class="s1">&#39;Invalid Roof&#39;</span><span class="p">)</span>
                <span class="n">msgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># report any errors</span>
        <span class="k">if</span> <span class="n">detailed</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">msgs</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">raise_exception</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full_msg</span></div>


<div class="viewcode-block" id="Story.to_honeybee">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.to_honeybee">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_honeybee</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_multiplier</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                    <span class="n">enforce_adj</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enforce_solid</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert Dragonfly Story to a list of Honeybee Rooms.</span>

<span class="sd">        Args:</span>
<span class="sd">            use_multiplier: If True, this Story&#39;s multiplier will be passed along</span>
<span class="sd">                to the generated Honeybee Room objects, indicating the simulation</span>
<span class="sd">                will be run once for the Story and then results will be multiplied.</span>
<span class="sd">                You will want to set this to False when exporting each Story as</span>
<span class="sd">                full geometry.</span>
<span class="sd">            tolerance: The minimum distance in z values of floor_height and</span>
<span class="sd">                floor_to_ceiling_height at which adjacent Faces will be split.</span>
<span class="sd">                If None, no splitting will occur. (Default: 0.01, suitable for</span>
<span class="sd">                objects in meters).</span>
<span class="sd">            enforce_adj: Boolean to note whether an exception should be raised if</span>
<span class="sd">                an adjacency between two Room2Ds is invalid (True) or if the invalid</span>
<span class="sd">                Surface boundary condition should be replaced with an Outdoor</span>
<span class="sd">                boundary condition (False). If False, any Walls containing</span>
<span class="sd">                WindowParameters and an illegal boundary condition will also</span>
<span class="sd">                be replaced with an Outdoor boundary condition. (Default: True).</span>
<span class="sd">            enforce_solid: Boolean to note whether rooms should be translated</span>
<span class="sd">                as solid extrusions whenever translating them with custom</span>
<span class="sd">                roof geometry produces a non-solid result (True) or the non-solid</span>
<span class="sd">                room geometry should be allowed to remain in the result (False).</span>
<span class="sd">                The latter is useful for understanding why a particular roof</span>
<span class="sd">                geometry has produced a non-solid result. (Default: True).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of honeybee Rooms that represent the Story.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set up the multiplier</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span> <span class="k">if</span> <span class="n">use_multiplier</span> <span class="k">else</span> <span class="mi">1</span>

        <span class="c1"># if this story has any overlaps, resolve them before translation</span>
        <span class="n">original_roof</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">):</span>
                <span class="n">original_roof</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span>
                <span class="n">res_roof_geo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">resolved_geometry</span><span class="p">(</span>
                    <span class="n">tolerance</span><span class="p">,</span> <span class="n">split_through_holes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">res_roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">res_roof_geo</span><span class="p">)</span>
                <span class="n">res_roof</span><span class="o">.</span><span class="n">_is_resolved</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">res_roof</span>

        <span class="c1"># convert all of the Room2Ds to honeybee Rooms</span>
        <span class="n">hb_rooms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">adjacencies</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">:</span>
            <span class="n">hb_room</span><span class="p">,</span> <span class="n">adj</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">to_honeybee</span><span class="p">(</span><span class="n">mult</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">,</span>
                                            <span class="n">enforce_bc</span><span class="o">=</span><span class="n">enforce_adj</span><span class="p">,</span>
                                            <span class="n">enforce_solid</span><span class="o">=</span><span class="n">enforce_solid</span><span class="p">)</span>
            <span class="n">hb_rooms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hb_room</span><span class="p">)</span>
            <span class="n">adjacencies</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">adj</span><span class="p">)</span>

        <span class="c1"># assign adjacent boundary conditions that could not be set on the room level</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">adjacencies</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">adj_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">adj</span> <span class="ow">in</span> <span class="n">adjacencies</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">adj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">identifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">adj_set</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="n">hb_rooms</span><span class="p">:</span>
                        <span class="n">adj_room</span> <span class="o">=</span> <span class="n">adj</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">room</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">adj_room</span><span class="p">:</span>
                            <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                                <span class="n">adj_face</span> <span class="o">=</span> <span class="n">adj</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">face</span><span class="o">.</span><span class="n">identifier</span> <span class="o">==</span> <span class="n">adj_face</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">_match_apertures</span><span class="p">(</span><span class="n">adj</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">face</span><span class="p">)</span>
                                    <span class="n">other_resolve</span> <span class="o">=</span> <span class="kc">False</span>
                                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># two roofs may meet</span>
                                        <span class="n">tol_area</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">*</span> <span class="n">tolerance</span>
                                        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">area</span> <span class="o">-</span> <span class="n">adj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">area</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_area</span><span class="p">:</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_roof_adj</span><span class="p">(</span>
                                                <span class="n">face</span><span class="p">,</span> <span class="n">adj</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">tolerance</span><span class="p">)</span>
                                            <span class="n">other_resolve</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">other_resolve</span><span class="p">:</span>
                                        <span class="k">try</span><span class="p">:</span>
                                            <span class="n">adj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">face</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
                                        <span class="k">except</span> <span class="p">(</span><span class="ne">AssertionError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                                            <span class="k">if</span> <span class="n">enforce_adj</span><span class="p">:</span>
                                                <span class="k">raise</span> <span class="n">e</span>
                                            <span class="n">face</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span>
                                            <span class="n">adj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">bcs</span><span class="o">.</span><span class="n">outdoors</span>
                                    <span class="n">adj_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">face</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
                                    <span class="k">break</span>
                            <span class="k">break</span>
        <span class="c1"># put back the original roof to avoid mutating the story</span>
        <span class="k">if</span> <span class="n">original_roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="o">=</span> <span class="n">original_roof</span>
        <span class="k">return</span> <span class="n">hb_rooms</span></div>


<div class="viewcode-block" id="Story.to_dict">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.to_dict">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">abridged</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">included_prop</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return Story as a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            abridged: Boolean to note whether the extension properties of the</span>
<span class="sd">                object (ie. construction sets) should be included in detail</span>
<span class="sd">                (False) or just referenced by identifier (True). Default: False.</span>
<span class="sd">            included_prop: List of properties to filter keys that must be included in</span>
<span class="sd">                output dictionary. For example [&#39;energy&#39;] will include &#39;energy&#39; key if</span>
<span class="sd">                available in properties to_dict. By default all the keys will be</span>
<span class="sd">                included. To exclude all the keys from extensions use an empty list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Story&#39;</span><span class="p">}</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;display_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;room_2ds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">abridged</span><span class="p">,</span> <span class="n">included_prop</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">]</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;floor_to_floor_height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_to_floor_height</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;floor_height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">floor_height</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;multiplier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;story_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;roof&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">roof</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">base</span><span class="p">[</span><span class="s1">&#39;user_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span>
        <span class="n">base</span><span class="p">[</span><span class="s1">&#39;properties&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">abridged</span><span class="p">,</span> <span class="n">included_prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">base</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">to</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Story writer object.</span>

<span class="sd">        Use this method to access Writer class to write the story in other formats.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">writer</span>

<div class="viewcode-block" id="Story.room_2d_story_geometry_valid">
<a class="viewcode-back" href="../../dragonfly.story.html#dragonfly.story.Story.room_2d_story_geometry_valid">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">room_2d_story_geometry_valid</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that a set of Room2Ds have geometry that makes a valid Story.</span>

<span class="sd">        This means that all of the floors of the Room2Ds are close enough to</span>
<span class="sd">        one another in elevation that their walls could touch each other.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_2ds: An array of Room2Ds that will be checked to ensure their</span>
<span class="sd">                geometry makes a valid Story.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the Room2D geometries make a valid Story. False if they do not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">flr_hts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_height</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">room_2ds</span><span class="p">])</span>
        <span class="n">avg_ftc</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">rm</span><span class="o">.</span><span class="n">floor_to_ceiling_height</span> <span class="k">for</span> <span class="n">rm</span> <span class="ow">in</span> <span class="n">room_2ds</span><span class="p">])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_2ds</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">flr_hts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">flr_hts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">avg_ftc</span> <span class="k">else</span> <span class="kc">False</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_room_roofs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">room_2d</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a RoofSpecification to be used for a specific Room2D in the Story.</span>

<span class="sd">        This will account for the case that a Room2D extends to the roof of</span>
<span class="sd">        another Story within the parent Buildings.</span>

<span class="sd">        Args:</span>
<span class="sd">            room_2d: A Room2D object within the Story for which RoofSpecifications</span>
<span class="sd">                will be evaluated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># first check whether it&#39;s possible for the room to be shaped by a roof</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">room_2d</span><span class="o">.</span><span class="n">is_top_exposed</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># it&#39;s impossible for the room to be shaped by a roof</span>
        <span class="c1"># determine all roof specifications that can influence the Room2D</span>
        <span class="n">room_roofs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">room_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_roof</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">room_ch</span> <span class="o">=</span> <span class="n">room_2d</span><span class="o">.</span><span class="n">ceiling_height</span>
            <span class="n">story_roofs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span><span class="o">.</span><span class="n">_story_roofs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">hgt</span><span class="p">,</span> <span class="n">rf</span> <span class="ow">in</span> <span class="n">story_roofs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">room_ch</span> <span class="o">&gt;</span> <span class="n">hgt</span><span class="p">:</span>  <span class="c1"># the room extends into the roof</span>
                    <span class="n">room_roofs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rf</span><span class="p">)</span>
        <span class="c1"># if there is only one or no roofs, the solution is simple</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_roofs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># no relevant roofs were found</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">room_roofs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># just return a variation of the lone roof</span>
            <span class="k">if</span> <span class="n">room_roofs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_is_resolved</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">room_roofs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># the roof of another story; we must resolve it</span>
                <span class="n">res_roof_geo</span> <span class="o">=</span> <span class="n">room_roofs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">resolved_geometry</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
                <span class="n">res_roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">res_roof_geo</span><span class="p">)</span>
                <span class="n">res_roof</span><span class="o">.</span><span class="n">_is_resolved</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">return</span> <span class="n">res_roof</span>
        <span class="c1"># if we have multiple roofs, create a new roof with everything resolved</span>
        <span class="n">all_geo</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">roof</span> <span class="ow">in</span> <span class="n">room_roofs</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">roof</span><span class="p">]</span>
        <span class="n">base_roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">all_geo</span><span class="p">)</span>
        <span class="n">res_roof_geo</span> <span class="o">=</span> <span class="n">base_roof</span><span class="o">.</span><span class="n">resolved_geometry</span><span class="p">(</span><span class="n">tolerance</span><span class="p">)</span>
        <span class="n">res_roof</span> <span class="o">=</span> <span class="n">RoofSpecification</span><span class="p">(</span><span class="n">res_roof_geo</span><span class="p">)</span>
        <span class="n">res_roof</span><span class="o">.</span><span class="n">_is_resolved</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">res_roof</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_match_apertures</span><span class="p">(</span><span class="n">face_1</span><span class="p">,</span> <span class="n">face2</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ap1</span><span class="p">,</span> <span class="n">ap2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">face_1</span><span class="o">.</span><span class="n">apertures</span><span class="p">,</span> <span class="n">face2</span><span class="o">.</span><span class="n">apertures</span><span class="p">):</span>
            <span class="n">ap1</span><span class="o">.</span><span class="n">_is_operable</span><span class="p">,</span> <span class="n">ap2</span><span class="o">.</span><span class="n">_is_operable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ap1</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">vent_opening</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">ap2</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">vent_opening</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># honeybee-energy extension is not loaded</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_resolve_roof_adj</span><span class="p">(</span><span class="n">face_1</span><span class="p">,</span> <span class="n">face_2</span><span class="p">,</span> <span class="n">tol</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve incorrect adjacency where walls of two roofs meet.&quot;&quot;&quot;</span>
        <span class="c1"># remove air boundaries so the split result is valid</span>
        <span class="n">use_ab</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face_1</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">AirBoundary</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">face_2</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">AirBoundary</span><span class="p">):</span>
            <span class="n">face_1</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">wall</span>
            <span class="n">face_2</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">wall</span>
            <span class="n">use_ab</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># split the adjacent walls with one another to get a match</span>
        <span class="n">room_1</span><span class="p">,</span> <span class="n">room_2</span> <span class="o">=</span> <span class="n">face_1</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">face_2</span><span class="o">.</span><span class="n">parent</span>
        <span class="n">new_faces1</span> <span class="o">=</span> <span class="n">room_1</span><span class="o">.</span><span class="n">coplanar_split</span><span class="p">([</span><span class="n">face_2</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> <span class="n">tol</span><span class="p">)</span>
        <span class="n">new_faces2</span> <span class="o">=</span> <span class="n">room_2</span><span class="o">.</span><span class="n">coplanar_split</span><span class="p">([</span><span class="n">face_1</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> <span class="n">tol</span><span class="p">)</span>
        <span class="n">new_faces1</span> <span class="o">=</span> <span class="p">[</span><span class="n">face_1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_faces1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">new_faces1</span>
        <span class="n">new_faces2</span> <span class="o">=</span> <span class="p">[</span><span class="n">face_2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_faces2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">new_faces2</span>

        <span class="c1"># find the adjacency and set it</span>
        <span class="n">adj_geo</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">f_1</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_faces1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">f_2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_faces2</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">f_1</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">is_centered_adjacent</span><span class="p">(</span><span class="n">f_2</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span> <span class="n">tol</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">f_1</span><span class="o">.</span><span class="n">has_sub_faces</span> <span class="ow">or</span> <span class="n">f_2</span><span class="o">.</span><span class="n">has_sub_faces</span><span class="p">:</span>
                        <span class="n">f_1</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">f_2</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                    <span class="n">f_1</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">f_2</span><span class="p">)</span>
                    <span class="n">adj_geo</span> <span class="o">=</span> <span class="n">f_1</span><span class="o">.</span><span class="n">geometry</span>
                    <span class="k">if</span> <span class="n">use_ab</span><span class="p">:</span>
                        <span class="n">f_1</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">air_boundary</span>
                        <span class="n">f_2</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">air_boundary</span>
                    <span class="n">new_faces1</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                    <span class="n">new_faces2</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">break</span>

        <span class="c1"># set the boundary conditions of the other newly-created Faces</span>
        <span class="k">for</span> <span class="n">nf</span> <span class="ow">in</span> <span class="n">new_faces1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">of</span> <span class="ow">in</span> <span class="n">room_2</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">nf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">is_centered_adjacent</span><span class="p">(</span><span class="n">of</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span> <span class="n">tol</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">nf</span><span class="o">.</span><span class="n">has_sub_faces</span> <span class="ow">or</span> <span class="n">of</span><span class="o">.</span><span class="n">has_sub_faces</span><span class="p">:</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">of</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                    <span class="n">nf</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">of</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">use_ab</span><span class="p">:</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">air_boundary</span>
                        <span class="n">of</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">air_boundary</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">adj_geo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">nf</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span> <span class="o">&lt;</span> <span class="n">adj_geo</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room_2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                            <span class="n">nf</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">room_2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span>
                    <span class="k">elif</span> <span class="n">nf</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span> <span class="o">&gt;</span> <span class="n">adj_geo</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room_2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                            <span class="n">nf</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">room_2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span>
        <span class="k">for</span> <span class="n">nf</span> <span class="ow">in</span> <span class="n">new_faces2</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">of</span> <span class="ow">in</span> <span class="n">room_1</span><span class="o">.</span><span class="n">faces</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">nf</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">is_centered_adjacent</span><span class="p">(</span><span class="n">of</span><span class="o">.</span><span class="n">geometry</span><span class="p">,</span> <span class="n">tol</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">nf</span><span class="o">.</span><span class="n">has_sub_faces</span> <span class="ow">or</span> <span class="n">of</span><span class="o">.</span><span class="n">has_sub_faces</span><span class="p">:</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">of</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                    <span class="n">nf</span><span class="o">.</span><span class="n">set_adjacency</span><span class="p">(</span><span class="n">of</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">use_ab</span><span class="p">:</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">air_boundary</span>
                        <span class="n">of</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ftyp</span><span class="o">.</span><span class="n">air_boundary</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">adj_geo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">nf</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span> <span class="o">&lt;</span> <span class="n">adj_geo</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                            <span class="n">nf</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">room_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span>
                    <span class="k">elif</span> <span class="n">nf</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span> <span class="o">&gt;</span> <span class="n">adj_geo</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">z</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">room_1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span><span class="p">,</span> <span class="n">Outdoors</span><span class="p">):</span>
                            <span class="n">nf</span><span class="o">.</span><span class="n">remove_sub_faces</span><span class="p">()</span>
                        <span class="n">nf</span><span class="o">.</span><span class="n">boundary_condition</span> <span class="o">=</span> <span class="n">room_1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boundary_condition</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_s</span> <span class="o">=</span> <span class="n">Story</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">room</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span> <span class="k">for</span> <span class="n">room</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_floor_to_floor_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_floor_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_multiplier</span><span class="p">,</span>
            <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">)</span>
        <span class="n">new_s</span><span class="o">.</span><span class="n">_roof</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_roof</span><span class="o">.</span><span class="n">duplicate</span><span class="p">()</span>
        <span class="n">new_s</span><span class="o">.</span><span class="n">_display_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_name</span>
        <span class="n">new_s</span><span class="o">.</span><span class="n">_user_data</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">new_s</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span>
        <span class="n">new_s</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">_duplicate_extension_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_s</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_room_2ds</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;Story: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_name</span></div>

</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2026, Ladybug Tools.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>